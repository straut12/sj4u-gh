<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>Python | ST</title> <meta name="author" content="Sean Trautman"/> <meta name="description" content="Intro to Python"/> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"/> <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-DF7Zhf293AJxJNTmh5zhoYYIMs2oXitRfBjY+9L//AY=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"/> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha256-i1+4qU2G2860dGGIOJscdC30s9beBXjFfzjWLjBRsBg=" crossorigin="anonymous"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/native.css" media="" id="highlight_theme_light"/> <link rel="shortcut icon" href="/assets/img/st-logo-transparent.png"/> <link rel="stylesheet" href="/assets/css/main.css"> <link rel="canonical" href="https://straut12.github.io/ref/coding/python/"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/native.css" media="none" id="highlight_theme_dark"/> <script src="/assets/js/theme.js"></script> <script src="/assets/js/dark_mode.js"></script> </head> <body class="fixed-top-nav "> <div class="site-container"> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/">ST</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/"></a> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Coding</a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item" href="/ref/coding/git/">VScode Github</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/coding/bash/">Bash Shell</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/coding/python/">Python</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/coding/js/">JavaScript</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/coding/html/">Web HTML</a> </div> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Data Analysis</a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item" href="/ref/data-analysis/data-collection/">data collection</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/data-analysis/databases/">databases</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/data-analysis/basic-charting/">basic charting</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/data-analysis/data-visualization/">data visualization</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/data-analysis/ml/">machine learning</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/data-analysis/statistics/">notes</a> </div> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Linux</a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item" href="/ref/linux/linuxdistros/">Linux Options</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/linux/desktop/">Desktop Appearance</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/linux/software/">Installing SW</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/linux/sharing/">File Sharing</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/linux/vnc-ssh/">Remote vnc ssh</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/linux/terminal/">Terminal cli</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/linux/autostart/">Autostart systemd</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/linux/logs/">Logs</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/linux/list/">List of SW to Install</a> </div> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">Repositories</a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="site-body wrapper"> <aside class="site-sidebar" id="site-sidebar"> <nav class="toc"> <header><h4 class="toc__title">Table of Contents</h4></header> <ul class="toc__menu"> <li><a href="#installation">Installation</a></li> <li><a href="#oop-vs-procedural">OOP vs Procedural</a></li> <li><a href="#helpful-python-commands">Helpful Python Commands</a></li> <li><a href="#python-pip">Python-pip</a></li> <li><a href="#python-venv">Python-venv</a></li> <li><a href="#python-framework">Python Framework</a></li> <li><a href="#package-module-importing">Package Module Importing</a></li> <li><a href="#upython">uPython</a></li> <li><a href="#logging">logging</a></li> <li> <a href="#cheat-sheet">Cheat sheet</a> <ul> <li><a href="#lists-and-dictionaries">Lists and Dictionaries</a></li> <li><a href="#functions-and-arguments">Functions and Arguments</a></li> <li><a href="#list-comprehension">List comprehension</a></li> <li><a href="#enumerate">enumerate</a></li> <li><a href="#print-formatting">Print formatting</a></li> <li><a href="#map-filter-lambda">map, filter, lambda</a></li> <li><a href="#inheritance-child-class">Inheritance (Child Class)</a></li> </ul> </li> </ul> </nav> </aside> <main> <div class="post"> <p class="post-description">Intro to Python</p> <article> <p>I primarily use <a href="https://www.python.org/" target="_blank" rel="noopener noreferrer">Python</a> because of its easy to read syntax, it is now available in Excel and Google Sheets, and has a large number of data analysis and visualization tools (<a href="https://pandas.pydata.org/" target="_blank" rel="noopener noreferrer">pandas</a>, <a href="https://numpy.org/" target="_blank" rel="noopener noreferrer">numpy</a>, <a href="https://scikit-learn.org/stable/" target="_blank" rel="noopener noreferrer">scikit-learn</a>, <a href="https://matplotlib.org/" target="_blank" rel="noopener noreferrer">matplot</a>, <a href="https://plotly.com/" target="_blank" rel="noopener noreferrer">plotly</a>, etc).</p> <p>A powerful tool you can use that incorporates all these tools into one dashboard is <a href="https://dash.plotly.com/" target="_blank" rel="noopener noreferrer">dash</a><br> Example of an Engineering Dash Board that uses Python, plotly, pandas, numpy, scikit-learn.</p> <div class="row"> <div class="col-md mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/coding/EDB1.jpg" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="row"> <div class="col-md mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/coding/EDB2.jpg" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="row"> <div class="col-md mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/coding/EDB3.jpg" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <hr> <h1 id="installation">Installation</h1> <p>There are many methods for using Python as stand alone program, inside Excel/Google Sheets, Jupyter Notebooks/Google Colab, and there are also various web sites you can play with it.</p> <ul> <li>On Linux systems I normally use the built-in Python (I only install anaconda for jupyter notebook functions. And I don’t run the init script which updates your .bashrc to activate anaconda when you open a terminal. Instead I activate manually with <code class="language-plaintext highlighter-rouge">source &lt;PATH_TO_CONDA&gt;/bin/activate</code> when I want to use it and use <code class="language-plaintext highlighter-rouge">conda deactivate</code> to go back to std env.</li> <li>For Windows I use Anaconda for python/jupyter notebooks. The Anaconda Navigator has a gui with options to create environments and install python packages. (I typically allow it to add to the PATH. There is also a anaconda prompt link added to your desktop/task bar that you can use.)</li> <li>For Windows/wsl be sure to run a <code class="language-plaintext highlighter-rouge">sudo apt-get update</code> and <code class="language-plaintext highlighter-rouge">sudo apt install python3-pip</code> to make sure you have all the Python tools installed.</li> </ul> <p>A powerful aspect of python are all the additional packages you can install. Almost all projects you work on will likely require installing additional python packages (using pip). A nuance of this is that the package installed is specific to the python3 version you used to install it and there are frequently newer versions of Python3 coming out. Which means you end up managing packages for multiple python3 versions. Although extra steps it is cleanest to use virtual environments and always specifying the python version you’re using when executing scripts installing packages with pip (<code class="language-plaintext highlighter-rouge">(venv)$ python3.7 -m pip install packageA</code> vs generic <code class="language-plaintext highlighter-rouge">(venv)$ python3 -m pip install packageA</code>). If you use a venv for each project it will have its own python3/pip environment and will minimize the number of times you get confused or get missing module errors. ie you know you’ve installed a package before but don’t realize it was installed with a different version of python3. Especially if you install anaconda’s python3 distribution later on. Unfortunately I did not learn this til later so a lot of my references to python3 commands do not specify the python3 version.</p> <hr> <p>Another Python version you will see is Jupyter notebook (which uses IPython as a backend. IPython is a dependency of Jupyter). Jupyter is a interactive Python interface usually using a web front end.</p> <p>ipykernel package provides the IPython kernel for Jupyter. But you can manually create a venv and install it for usage in Jupyter. See below in venv notes.</p> <p>For VS code to work with Python in Jupyter Notebooks you need to activate an Anaconda environment in VS Code or another Python venv in which the Jupyter package has been installed. If you don’t want to use Anaconda then <code class="language-plaintext highlighter-rouge">(.venv) python3.10 -m pip install jupyter</code> will install the Jupyter system, including the notebook, qtconsole, and the IPython kernel. You select the kernel in the upper right.</p> <hr> <p>To check Python versions installed on your system.<br> <code class="language-plaintext highlighter-rouge">$ ll /usr/bin/python3*</code><br> <code class="language-plaintext highlighter-rouge">$ python3 --version</code> (to see which version is used with generic python3 command)<br> (or just python* if you want to see python 2)<br> <code class="language-plaintext highlighter-rouge">$ which python3.7</code> (will give you the path to python 3.7 binary/executable)</p> <p>Advice on stackexchange..<br> Do not use “sudo” with pip install<br> ie do not use <code class="language-plaintext highlighter-rouge">sudo pip install package</code><br> Instead run pip as a module with the -m using the specific python version you want<br> <code class="language-plaintext highlighter-rouge">(venv) python3.7 -m pip install package</code></p> <p>Inside the venv you can list locations (sys.path) Python is looking for modules to confirm the path of the module is included. There are both system (standard Python library) and site packages.<br> Standard Python library <code class="language-plaintext highlighter-rouge">(.venv)$ python3.7 -c "import os; print (os.sys.path)" | tr "," "\n"</code><br> Show where third party packages, using pip, will be installed<br> <code class="language-plaintext highlighter-rouge">$ python3.7 -c "import site; print (site.getsitepackages())" | tr "," "\n"</code><br> You can use pydoc to browse the locations in a browser and searches for the specific methods you’re using<br> <code class="language-plaintext highlighter-rouge">$ python3.7 -m pydoc -b</code></p> <blockquote> <p>If working in an editor like vs code you’ll need to make sure you have the right version of python3 selected (in vscode it can be selected in bottom right frame).</p> </blockquote> <h1 id="oop-vs-procedural">OOP vs Procedural</h1> <p>There are a couple different approaches to the over-all flow or framework of your code, how it is structured and organized. Procedural vs Object Oriented Programming (OOP).</p> <p>Procedural is a fairly simple concept. Your code is written as a sequence of steps that are executed step-by-step. This makes sense when your project only requires a small number of steps to do some basic actions. You can still use functions, subroutines, procedures to organize actions that are often repeated to help keep the code clean and efficient. For quick, simple instructions procedural will be the most straight forward solution. But is it not as easy to scale up or build upon. If you plan on building on the project and making it a larger application then structuring your code with OOP will usually be better. (Almost all languages can do some level of procedural but the reverse is not necessarily true. There are some languages that are primarily procedural and could not do OOP. ie Fortran, C, and Basic)</p> <p>In Object Oriented Programming (OOP) you try and think of your project in terms of objects. Each object usually contains data (attributes) and procedures (methods) that can access or manipulate the data. A method is similar to a function but resides inside the object. A common term you’ll here is class or the blueprint for your objects. (objects are instances of classes). My first interpretation of objects was that they are similar to complex variables that have both containers and functions built into them.</p> <p>Since STEM projects will frequently use external Python packages objects (that are using OOP) early on you will run into OOP methods. Or you’re likely already using OOP concepts by using the built-in methods on python objects. For example using the .lower or .upper on a string. (You’ll notice it from the dot notation) Dot notation means you are accessing data or running an operation connected to that object. (ie using an external library to get the temperature might call something like sensor.temperature). So OOP allows you to create your own objects and better organize your code with larger projects. It also makes it easier for someone else to use your code.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">adafruit_dht</span>

<span class="n">mySensor</span> <span class="o">=</span> <span class="n">adafruit_dht</span><span class="p">.</span><span class="nc">DHT22</span><span class="p">(</span><span class="n">board</span><span class="p">.</span><span class="n">D18</span><span class="p">)</span> <span class="c1"># connected to gpio pin 18
</span>
<span class="n">temp</span> <span class="o">=</span> <span class="n">mySensor</span><span class="p">.</span><span class="n">temperature</span>
</code></pre></div></div> <p>Code example above using a DHT22 sensor and the adafruit dht library to get the temp data from the sensor.</p> <ul> <li>At the top of the code you import the adafruit DHT library (and the library is using OOP approach).</li> <li>You create a specific object representing your temp sensor (and it’s using a class in the adafruit library as the blueprint)</li> <li>Then you call on the temperature method of that object to get the temperature at which point you can put it in your temp variable.​</li> </ul> <p>So understanding OOP early on will make it easier to navigate using 3rd party packages along with allowing you to better structure your code for more complex projects.</p> <p>It is also helpful to understand Python as modular programming. Python supports grouping these classes into separate files or modules. But you can easily import the module (step 1 above) to use in your own code. This helps with organization and allowing you to easily use code from other libraries. The modules are namespaced (ensures unique names) to avoid conflict when a class has the same name as a class in another module.</p> <p>note - variables/functions usually use lower case for the names since class will use CamelStyle naming.</p> <p><strong>OOP Concepts</strong><br> Two main components of OOP are classes and objects. (sometimes can be interchanged)</p> <ul> <li>Classes - this is the blueprint or template that defines the data(attributes) and available methods for acting on that data. (a complex user-defined data type). It lets you create your own user defined object.</li> <li>Objects - these are the specific instances of the class</li> </ul> <p><strong>Python Structure with OOP</strong></p> <ul> <li>MODULE (module_name.py) is a python file that contains classes/functions and will have a .(dot) extension and can be executed/imported. If using OOP it will contain objects that are used to define the data and functions to work with that data. <ul> <li>CLASS (ClassExample) is a type or container a variable can take on; just like int, float, str, list, dict. Typically uses CamelStyle naming. <ul> <li>ATTRIBUTES - variables inside a class that define the data</li> <li>METHODS (class_method) - similar to attributes but define functions instead of data. Typically used to take some kind of action</li> </ul> </li> </ul> </li> </ul> <p>Inheritance is the concept of building an object (child) or class based upon another (parent). The child inherits the attributes/methods of the parent class which reduces redundancy while also maintaining hierarchy. The child can add new attributes/methods that wouldn’t be applicable to the parent.<br> Two styles of OOP or inheritance models are</p> <ol> <li>class based inheritance (ie Python)</li> <li>prototype based inheritance (ie JavaScript). This can be confusing since JavaScript can use the ‘class’ keyword (considered syntactic sugar) to mimic a class type language.​</li> </ol> <p><strong>JavaScript Structure with OOP</strong><br> ​​In JavaScript instances can be instantiated via constructor functions with the ‘new’ keyword.<br> Classes have to be specified in specific order. js can not use the class until it is defined in the code.<br> Encapsulation - the bundling of data and the methods that act on that data in objects. Access to that data from outside can be restricted. Wrap all properties into one object.<br> Constructor is a special method on js class. When called later using the new keyword, constructor will create one new blank js object and assign it properties and values based on the blueprint inside. It will run once when we instantiate the class using the new keyword.<br> Objects in js are reference data types which means that unlike primitive data types they are dynamic.<br> Inheritance - Extend the same behaviors. If property/method is not found in child it will look in parent<br> Abstraction - hide the implementation that is critical or does not need to be exposed. Avoids bugs.<br> Polymorphism - behavior of the object may change according to state or context.<br> Instantiation - create the object. return the handler.<br> Initialization (constructor) - set the initial/default values.</p> <p><strong>Other helpful terms to know</strong></p> <ul> <li>Dynamically typed - you do not have to specify the data type (float, int, string) when writing the code. More convenient, common with scripting languages. The type is checked at run time when being executed. (Python/JS).</li> <li>Statically typed - you must specify the data type (float, int, string) of your variables to avoid errors during compile. Less convenient but can help catch bugs early on. (C++, Java)</li> <li>Strongly typed language means it will give an error if you try and perform an operation with incompatible data types (ie try and add an integer 1 and a string ‘2’. 1 + ‘2’ will give an error). The program will not make implicit conversions between unrelated data types for you. (Python)</li> <li>Loosely/weakly typed language will make conversions between unrelated data types. It will try and perform the action even if the data types are not compatible. 1 + ‘2’ = 3. (Javascript)</li> </ul> <h1 id="helpful-python-commands">Helpful Python Commands</h1> <p>I will not be listing the Python syntax for loops, variables, conditionals, etc. There are many online resources for syntax including <a href="https://www.w3schools.com/python/" target="_blank" rel="noopener noreferrer">w3schools</a> and udemy courses (I liked complete python bootcamp)</p> <p>These are Python commands/concepts that I’ve come across and found useful.</p> <p>Dictionary vs list</p> <ul> <li>dict - objects referenced by key names. Easy to reference an item by its name. But can not be sorted.</li> <li>list - objects referenced by location (similary to arrays). Can be sorted, indexed or sliced.</li> </ul> <p>New Python versions will come out with features you may want to use. To install a new version on Linux (example below to install python3.7)<br> <code class="language-plaintext highlighter-rouge">$ sudo add-apt-repository ppa:deadsnakes/ppa</code><br> <code class="language-plaintext highlighter-rouge">$ sudo apt install python3.7</code></p> <p>Can now run <code class="language-plaintext highlighter-rouge">$ python3.7</code> or <code class="language-plaintext highlighter-rouge">$ pip3.7</code></p> <p>Next update venv to match the python version <code class="language-plaintext highlighter-rouge">$ sudo apt install python3.7-venv</code></p> <p>Now virtual environment can be created with <code class="language-plaintext highlighter-rouge">$ python3.7 -m venv .venv</code></p> <p>To add python3.7 to VScode. After installing a new version, closing, re-opening VScode recognized the new python as an option. Otherwise<br> <code class="language-plaintext highlighter-rouge">$ which python3.7</code> (will give you the path to python 3.7 binary/executable)<br> Copy the path (ie. /usr/bin/python3.7)<br> In VScode change interpreter in bottom left and select “enter Interpreter path..”<br> Paste the /usr/bin/python3.7</p> <p>Trying to change the default version of python3 was a hassle. It broke my gnome terminal. So I just type python3.7 or python3.8 (or which ever version using at the time)</p> <p>Using pip<br> Advice on stackexchange..<br> Never use “sudo” with pip install<br> Do not use <code class="language-plaintext highlighter-rouge">$ pip install package</code><br> Instead run pip as a module with the -m using the specific python version you want<br> <code class="language-plaintext highlighter-rouge">$ python3.7 -m pip install package</code></p> <h1 id="python-pip">Python-pip</h1> <p><strong>Python pip</strong> Pip is the Python package manager. Many projects involve pip to install specific Python packages, ie the files needed for a module. Modules are python libraries that other people wrote which you can use in your code. This saves time/effort compared to trying to write all of the code from scratch. Pip packages can be found at <a href="https://pypi.org/" target="_blank" rel="noopener noreferrer">pypi</a></p> <p>Using pip<br> Note it is recommended to install packages inside a virtual environment to avoid broken/conflicting packages.<br> <code class="language-plaintext highlighter-rouge">(.venv)$ python3.7 -m pip install package</code> or<br> <code class="language-plaintext highlighter-rouge">curl -sS https://bootstrap.pypa.io/get-pip.py | python3.10</code></p> <p>To see what packages are installed and the version<br> <code class="language-plaintext highlighter-rouge">(.venv)$ pip3 list</code><br> Side note list vs freeze <code class="language-plaintext highlighter-rouge">(.venv)$ pip3 list --format=freeze &gt; requirements.txt</code><br> will list packages you installed in a txt file and in a format that can be used to reinstall.</p> <p>To see the version of a package when not inside a venv<br> <code class="language-plaintext highlighter-rouge">python3.7 -m pip show package</code></p> <p>Upgrade pip <code class="language-plaintext highlighter-rouge">python3 -m pip install --upgrade pip</code><br> or <code class="language-plaintext highlighter-rouge">curl -sS https://bootstrap.pypa.io/get-pip.py | python3.10</code></p> <blockquote> <p>pipx is a tool similar to brew, npx, apt. It is designed for isolating application installation.</p> </blockquote> <p><code class="language-plaintext highlighter-rouge">python3 -m pip install --user pipx</code><br> ```pipx install virtualenv``</p> <p><strong>Python wheels</strong> Often during a pip installation you’ll see reference to wheels. Python wheels are a tool that help install python packages. From stack overflow.. if the package is not a wheel, pip tries to build a wheel for it (via setup.py bdist_wheel). If that fails you get “failed building wheel for <strong>package</strong>” and pip falls back to installing directly (via setup.py install). Once we have a wheel, pip can install the wheel by unpacking it correctly. pip tries to install packages via wheels as often as it can. This is because of various advantages of using wheels (like faster installs, cache-able, not executing code again etc).</p> <p>If having problems with wheels you can try installing/updating.<br> <code class="language-plaintext highlighter-rouge">$ python3.7 -m pip install --upgrade pip setuptools wheel</code><br> or<br> <code class="language-plaintext highlighter-rouge">$ pip install &lt;package&gt; --no-cache-dir</code></p> <p>There are times I’ve had problems getting the pip version of a package to install and had to use apt.<br> ie pip3 would not work for RPi.GPIO on a project so I used apt<br> <code class="language-plaintext highlighter-rouge">$ sudo apt install python3-wheel</code><br> <code class="language-plaintext highlighter-rouge">$ sudo apt-get install RPi.GPIO</code></p> <h1 id="python-venv">Python-venv</h1> <p>Using a virtual environment involves a couple extra steps but is a good practice. In my projects I only use python3 and venv for simplicity. (vs virtualenv or pipenv). The concept is that you’re creating an isolated, unique python environment/folder which can be activated when working on a specific project. That environment will have its own Python and when you install python packages they will be specific to that environment. This helps handle the scenario where different projects have the same dependency; or share the same packages but different versions of that shared package which creates a dependency conflict. venv handles the conflict by isolating the project dependencies and allowing you to install a specific version of a package within that project folder; without affecting other projects. Since you start with a clean slate each time you can also use commands to see what packages are necessary for your project (and version), output them to a requirements.txt file and use it to easily install on another system.</p> <p>Note - if you want to run your python program outside the venv (during startup of RPi) then you need to put the location of the venv python being used in the shebang !# header of your python program.<br> For example<br> <code class="language-plaintext highlighter-rouge">#!/home/pi/projectA/.venv/bin/python3</code><br> You can then make it executable with<br> <code class="language-plaintext highlighter-rouge">$ chmod +x filename.py</code><br> Now you can execute it with<br> <code class="language-plaintext highlighter-rouge">$ ./filename.py</code><br> To see more details go to <a href="../../../ref/coding/bash/#shebang">shebang</a> section</p> <p>Installation (may need to go through update/upgrade steps)<br> <code class="language-plaintext highlighter-rouge">$ sudo apt install python3</code><br> <code class="language-plaintext highlighter-rouge">$ sudo apt install python3-pip</code><br> <code class="language-plaintext highlighter-rouge">$ sudo apt update</code><br> <code class="language-plaintext highlighter-rouge">$ sudo apt upgrade</code><br> <code class="language-plaintext highlighter-rouge">$ sudo apt install python3-venv</code></p> <p>Often you’ll be using a different version of python from the python3 default on your system (ie 3.8, 3.9) just replace python3 with python3.7 or python3.8 etc.</p> <p><strong>Quick steps</strong><br> Install virtualenv<br> <code class="language-plaintext highlighter-rouge">python3.7 -m pip install virtualenv</code> create a new project folder and activate the venv<br> <code class="language-plaintext highlighter-rouge">$ mkdir project-name &amp;&amp; cd project-name</code><br> <code class="language-plaintext highlighter-rouge">$ python3 -m venv .venv</code><br> You can change the second .venv to whatever virtual env name you want. The .venv folder will contain python and packages you install.</p> <p>Now use ‘source’, a built-in shell command to read/execute the contents of the ‘activate’ file<br> <code class="language-plaintext highlighter-rouge">$ source .venv/bin/activate</code> (a .venv will now be at the beginning of your command prompt line)</p> <p>In VS code select the Python interpreter created in the venv from the menu at the bottom right of the window. Or go to command palette, ctrl-shift-P, and then type ‘Python: Select Interpreter’ and choose your venv.</p> <p><strong>Jupyter Notebook in venv</strong> I usually using anaconda for jupyter notebook so instructions are for venv inside conda. <code class="language-plaintext highlighter-rouge">conda create -n .venv python=3.10</code> <code class="language-plaintext highlighter-rouge">conda activate .venv</code> <code class="language-plaintext highlighter-rouge">pip install --user ipykernel</code> <code class="language-plaintext highlighter-rouge">python -m ipykernel install --user --name.venv</code> # manually add the vevn kernel Now you can go to Jupyter Notebook and refresh and you should see .venv as an option when creating a new kernel. You can also switch once inside the notebook. <code class="language-plaintext highlighter-rouge">jupyter kernelspec uninstall .venv</code> to remove the kernel</p> <p><strong>git Housekeeping Item</strong> Add .venv to your .gitignore list so you do not load it to github. This can be done automatically when you create the repo by selecting Python template for your git ignore.</p> <p>To turn off the venv<br> <code class="language-plaintext highlighter-rouge">(.venv)$ deactivate</code> (when you’re done and need to deactivate.)</p> <p>To remove the venv just delete the venv folder with recursive/force flags<br> <code class="language-plaintext highlighter-rouge">$ rm -rf .venv/</code></p> <p><strong>Move/Install project in another location</strong><br> <code class="language-plaintext highlighter-rouge">(.venv)$ pip3 freeze</code>(or $pip3 list -v or $python3 -m pip list -v) to see what packages are installed<br> <code class="language-plaintext highlighter-rouge">(.venv)$ pip3 freeze &gt; requirements.txt</code>to output in a file for installing in another location<br> or $ python3 -m pip3 freeze &gt; requirements.txt</p> <p>Go to new location and create/activate a .venv<br> <code class="language-plaintext highlighter-rouge">$ python3 -m venv .venv</code><br> <code class="language-plaintext highlighter-rouge">$ source .venv/bin/activate</code><br> install with -r for requirement install<br> <code class="language-plaintext highlighter-rouge">(.venv)$pip3 install -r requirements.txt</code><br> or $ python3 -m pip install -r requirements.txt</p> <p>May have to remove pkg-resources from the requirements.txt to avoid errors when installing on another system.</p> <p><strong>Installing/uninstalling packages</strong><br> <code class="language-plaintext highlighter-rouge">(.venv)$ python3 -m pip install package-name</code><br> Can use find to see where it was installed<br> <code class="language-plaintext highlighter-rouge">(.venv)$ find . -print | grep -i package-name</code><br> (do not need to use * wildcards, will find files and folders)<br> To uninstall<br> <code class="language-plaintext highlighter-rouge">(.venv)$ python3 -m pip uninstall package-name</code> ​ To upgrade a package<br> <code class="language-plaintext highlighter-rouge">(.venv)$ python3 -m pip3 install --upgrade &lt;package&gt;</code><br> To remove a .venv <code class="language-plaintext highlighter-rouge">rm -r .venv</code></p> <p><strong>Other Commands</strong><br> Install requests (useful for making HTTP requests in Python)<br> <code class="language-plaintext highlighter-rouge">$ python3 -m pip install requests</code></p> <p>Install from source<br> <code class="language-plaintext highlighter-rouge">$ cd &lt;source name&gt;</code><br> <code class="language-plaintext highlighter-rouge">$ python3 -m pip3 install .</code></p> <p>To get access to site packages go into the virtual env folder and edit pyvenv.cfg<br> change include-system-site-packages=true<br> Module installations will still go to venv as normal and site packages will be visible too.</p> <p><strong>Troubleshooting</strong><br> Helpful commands when you get ‘module not found’. Make sure the python version you’re using has the module installed and the pip version is upgraded too. If you believe you’ve already installed the module before it’s possible you installed it in an earlier version of Python. If using vs studio or other IDE check which Python version it is using.</p> <p>Inside the venv list locations (sys.path) Python is looking for modules to confirm the path of the module is included.<br> <code class="language-plaintext highlighter-rouge">(.venv)$ python3 -c "import os; print (os.sys.path)" | tr "," "\n"</code></p> <p>You can use pydoc to browse the locations<br> <code class="language-plaintext highlighter-rouge">$ python3 -m pydoc -b</code></p> <p>Some folder explanations</p> <ul> <li>bin - the executables you use in the venv. ie activate</li> <li>include - used for compiling the python packages.</li> <li>lib - where the python version you’re using for the venv is stored/installed and site package folder for dependencies.<br> Example<br> ├── bin<br> │ ├── activate<br> │ ├── pip<br> │ ├── pip3.6<br> │ ├── pylint<br> ├── include<br> ├── lib<br> └── python3.6</li> </ul> <h1 id="python-framework">Python Framework</h1> <p>Python Infrastructure<br> BOTTOM</p> <ul> <li> <strong>MODULE</strong> (module_name.py) is a python file that contains classes/functions and will have a .py extension and can be executed/imported.</li> <li> <strong>PACKAGE</strong> (package) is a directory with a collection of modules and will include __init__.py (constructor) so the interpreter knows it is a package.</li> <li> <strong>LIBRARY</strong> is a collection of packages. More of a generic term meaning a collection of code that is designed to be re-used. A library can be a collection of packages/modules or even a single module.</li> <li> <strong>FRAMEWORK</strong> is a collection of libraries.</li> <li>(API or application programming interface is an interface or description of how to interact with an application)<br> TOP</li> </ul> <p>Example<br> The files inside of a package <strong>temp-measure</strong> might be</p> <div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">/temp-measure/ 
__init__.py 
ntc_measure.py (module)
dht11_measure.py (module)
</span></code></pre></div></div> <p>To use a part of the module, import it, create an object, and then access the data or methods.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">ntc_measure.py</span>
<span class="n">sensorA</span> <span class="o">=</span> <span class="n">ntc_measure</span><span class="p">.</span><span class="nf">sensorSetup</span><span class="p">(</span><span class="n">pin</span> <span class="mi">18</span><span class="p">)</span>
<span class="n">temp</span> <span class="o">=</span> <span class="n">sensorA</span><span class="p">.</span><span class="nf">readtemp</span><span class="p">()</span>
</code></pre></div></div> <ul> <li> <strong>MODULE</strong> (module_name.py) is a python file that contains classes/functions and will have a .py extension and can be executed/imported. OOP will involve objects where you combine data (attributes) and functions (methods/actions) to work with that data. <ul> <li> <strong>CLASS</strong> (ClassExample) is a type or container a variable can take on; just like int, float, str, list, dict. Typically uses CamelStyle naming.</li> <li> <strong>OBJECT</strong> is a specific instance of a class.</li> <li> <strong>__init__()</strong> method is a constructor. Creates INSTANCE variables instead of CLASS variables. Initializes an object within a class. This helps avoid the issues of class attributes that are mutable (like a list) and being modified by other objects unintentionally.</li> <li> <strong>ATTRIBUTES</strong> are variables inside a class that define the data (variable_name, CONSTANT_NAME)</li> <li> <strong>METHODS</strong> (class_method) are similar to attributes but define functions instead of data. Typically used to take some kind of action.</li> </ul> </li> </ul> <p>When using a third party package (ie a package you installed with pip) it is sometimes helpful to go look at the modules to see what they’re doing and what arguments can be passed.</p> <p>For example<br> <strong>speedtest-cli</strong> is a python package that can be used to get your network download/upload speed.</p> <ul> <li>You can either use the command line or call the modules in your python code. For the cli to work I was having to use the <strong>–secure flag</strong> (otherwise I got an HTTP error).</li> <li>However it was not clear how to use the ‘secure’ option in python code. But if you went to the <strong>speedtest.py</strong> module (in a venv it was under venv/lib/python3x/site-packages) and looked at the arguments in the Speedtest class you could see there was a <strong>secure=False</strong> flag. Passing <strong>secure=True</strong> allowed Speedtest to run in the code. <div class="language-python highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Speedtest</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
  <span class="sh">"""</span><span class="s">Class for performing standard speedtest.net testing operations</span><span class="sh">"""</span>

  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">source_address</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
               <span class="n">secure</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">shutdown_event</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
</code></pre></div> </div> </li> <li>Another method to browse the Speedtest class arguments is using <strong>pydoc</strong>. Go into the directory and active the venv and then run<br> <code class="language-plaintext highlighter-rouge">$ python3 -m pydoc -b</code> <br> It will open a browser where you can go to the site-packages and looks at the speedtest module/classes.</li> </ul> <p><strong>Some underscore naming conventions:</strong><br> _(single): internal, weaker enforcement, can use to indicate the scope.<br> __(double): private, stronger enforcement, I don’t use my own version of these.</p> <p>SINGLE(internal)<br> _var, _method, _attr : Indicates it is meant for private, internal use, and not to be imported. Has ‘weak’ enforcement. (ie Python will not import when ‘import *’ used)<br> var_ : Naming convention to make the variable different from a Python keyword</p> <p>DOUBLE(private)<br> __method or __attribute : Not recommended. Makes the method/attribute private and can’t be accessed outside the class. ‘Stronger’ enforcement. Will cause naming mangling (ie will become Class._Class__method)<br> __method__or __attr__ : Indicates a special or magic Python method. Do not use for your own naming.</p> <ul> <li>self keyword is passed into methods to let python know that it’s not just a simple function but a method connected to that class. So ‘self’ connects methods to the class.</li> <li>default constructor will only have one argument, self, which is referencing the instance being constructed.</li> <li>parameterized constructor can have extra arguments you pass to it.</li> </ul> <p><strong>Helpful Troubleshooting Commands</strong></p> <p>Lists locations (sys.path) Python is looking for modules (can do inside venv)<br> <code class="language-plaintext highlighter-rouge">$ python3 -c "import os; print (os.sys.path)" | tr "," "\n"</code></p> <p>Show where third party packages, using pip, will be installed<br> <code class="language-plaintext highlighter-rouge">$ python3 -c "import site; print (site.getsitepackages())" | tr "," "\n"</code><br> note - There are both system (standard Python library) and site packages. This command prints site packages.</p> <p>-c command –&gt; Specify the command to execute. This terminates the option list (following options are passed as arguments to the command).</p> <p>-m module-name –&gt; Searches sys.path for the named module and runs the corresponding .py file as a script. Examples in python -m section</p> <p>dir() - List all properties and methods of an object.<br> globals() - Returns dict of variables defined in global symbol table (namepsace). <br> locals() - Returns dict of local symbol table</p> <p>From the python interpreter - in a script use pprint(dir()) for pretty printer. (from pprint import pprint)<br> Can import modules and re-run dir() to see what was loaded.</p> <div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">&gt;</span><span class="o">&gt;&gt;</span> import modules
<span class="gp">&gt;</span><span class="o">&gt;&gt;</span> <span class="nb">dir</span><span class="o">()</span>
<span class="gp">&gt;</span><span class="o">&gt;&gt;</span> import moduleA
<span class="gp">&gt;</span><span class="o">&gt;&gt;</span> <span class="nb">dir</span><span class="o">()</span>
</code></pre></div></div> <p>Can create an object and run dir(myObject)</p> <div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">&gt;</span><span class="o">&gt;&gt;</span><span class="nb">exec</span><span class="o">(</span>open<span class="o">(</span><span class="s2">"file.py"</span><span class="o">)</span>.read<span class="o">())</span>
<span class="gp">&gt;</span><span class="o">&gt;&gt;</span>globals<span class="o">()</span>
</code></pre></div></div> <p>Or put it inside a function with pprint(globals())</p> <p><strong>Python -m flag</strong><br> The python -m flag allows you to execute a python script (file.py) from the command line by using the module name (file) rather than the entire file name (path/to/file.py). When running a single file it will execute as “main” (so you can use name=”main”). This has little advantage when you’re running a python script from your directory.<br> <code class="language-plaintext highlighter-rouge">$ python3 -m file</code><br> vs<br> <code class="language-plaintext highlighter-rouge">$ python3 file.py</code><br> Small note - <br> python3 -m file –&gt; sys.argv[0] = full/path/to/file.py<br> python3 file.py –&gt; sys.argv[0] = file.py</p> <p>The main -m advantage is running built-in python modules as one-liners. See examples below.</p> <p>You can also use -m on one of your packages (folder). When running -m on a package<br> First evaluates the __init__.py (adds the “import” ability)<br> Any code in imported modules will be executed (not in the name=”main”)<br> Then runs the __main__.py file (__main__.py is required to run -m on a package).</p> <p>So how does it work..<br> Example to create a simple web server at port 8000 from any directory<br> <code class="language-plaintext highlighter-rouge">$ python3 -m http.server 8000</code><br> (can now go to http://<strong>IPaddress</strong>:8000 from any PC on your network)</p> <p>The command executes server.py (module) in http folder (package)<br> Why does this work? <br> Python looks for modules in the current directory, paths from PYTHONPATH, and the installation-dependent defaults.</p> <p>To see the defaults sys.path use<br> <code class="language-plaintext highlighter-rouge">$ python3 -c "import os; print (os.sys.path)" | tr "," "\n"</code><br> This shows /usr/lib/python3.6 in my sys.path<br> http/server.py is under python3.6<br> /usr/lib/python3.6/<br> ├── http<br> └── __init__.py<br> └── server.py</p> <p>An even quicker way of seeing this is using the pydoc module<br> In the same directory run<br> <code class="language-plaintext highlighter-rouge">$ python3 -m pydoc -b</code><br> A browser should open. Find http under python3.6 and you can navigate to server.py</p> <p><strong>Pydocs</strong><br> go into a folder and run pydoc to create an HTTP server at the port specified with python documentation. Will show __doc__ files for your classes, functions.<br> <code class="language-plaintext highlighter-rouge">$ python3 -m pydoc -p 8001</code><br> <code class="language-plaintext highlighter-rouge">$ python3 -m pydoc -b</code> (open browser using next available port)</p> <p>Python <strong>pdb</strong> debugger (useful for debugging in a terminal on Pi0)<br> <code class="language-plaintext highlighter-rouge">$python3 -m pdb file.py</code></p> <p><strong>Profilers</strong> and <strong>timers</strong> (cProfile, timeit, pstats)<br> <code class="language-plaintext highlighter-rouge">$ python3 -m cProfile -o output.cprof file.py</code></p> <div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">&gt;</span><span class="o">&gt;&gt;</span> import pstats
<span class="gp">&gt;</span><span class="o">&gt;&gt;</span> p <span class="o">=</span> pstats.Stats<span class="o">(</span><span class="s1">'output.cprof'</span><span class="o">)</span>
<span class="gp">&gt;</span><span class="o">&gt;&gt;</span> p.sort_stats<span class="o">(</span><span class="s1">'cumulative'</span><span class="o">)</span>.print_stats<span class="o">(</span>10<span class="o">)</span>​​​​
</code></pre></div></div> <p>Or view results in SnakeViz<br> <code class="language-plaintext highlighter-rouge">$ snakeviz output.cprof</code><br> To install<br> <code class="language-plaintext highlighter-rouge">$ sudo pip3 install pstats-view</code><br> <code class="language-plaintext highlighter-rouge">$ sudo pip3 install snakeviz</code></p> <p><strong>Simple http.server</strong> Simple web server that allows you to browse folder/files and download a file. Can also serve static html files.<br> <code class="language-plaintext highlighter-rouge">$ cd &lt;directory&gt;</code><br> <code class="language-plaintext highlighter-rouge">$ python3 -m http.server 8000</code><br> You can now go to <strong>hostname</strong>.local:8000 from any PC on your network and see your folder/files.​</p> <div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">​​pi@raspberrypi:$</span><span class="w"> </span>python3 <span class="nt">-m</span> http.server 8000
<span class="go">Serving HTTP on 0.0.0.0 port 8000 (http://0.0.0.0:8000/) ...
10.0.0.100 - - [14/Mar/2021 11:52:10] "GET / HTTP/1.1" 200 -
</span></code></pre></div></div> <h1 id="package-module-importing">Package Module Importing</h1> <p><strong>Python Package-Module Import</strong> Packages are directories with a collection of modules.</p> <ul> <li>Package directories will often contain a __init__.py (which indicates it is a package)</li> <li>When a package (or module in the package) is imported the __init__.py is executed.</li> <li>Code in the __init__.py can be used for package initialization.</li> </ul> <p>A module is a python file (file.py) that contains classes/functions that can be used in other python scripts. It can be located in a package or stand alone.</p> <ul> <li>A module can be imported in a python script with <code class="language-plaintext highlighter-rouge">import module</code> </li> <li>Or executed as a script at the command line with <code class="language-plaintext highlighter-rouge">$ python3 module.py</code> </li> </ul> <p>The method for getting access to another module’s classes/functions is through “import”. When python sees the <code class="language-plaintext highlighter-rouge">import package or module</code> line it will look in the following locations for that directory/file.</p> <ol> <li>Current directory</li> <li>Directories listed in $PYTHONPATH (see PYTHONPATH section for details)</li> <li>The installation-dependent list of directories (specific to python version)</li> <li>Additional method is adding sys.path.append(/path/to/dir) in your code. The path will be added temporarily when your code runs.</li> </ol> <p>To see a list of your python packages (directories) you can print(sys.path). A quick way of doing this at the command line using the -c flag.<br> <code class="language-plaintext highlighter-rouge">$ python3 -c "import sys; print (sys.path)" | tr "," "\n"</code><br> <code class="language-plaintext highlighter-rouge">/usr/lib/python3.6</code> (you’ll see standard python packages you’ve used)<br> <code class="language-plaintext highlighter-rouge">$HOME/.local/lib/python3.6/site-packages</code> (you’ll see packages you’ve installed with pip)<br> <code class="language-plaintext highlighter-rouge">/usr/lib/python3/dist-packages</code> (you’ll see packages installed with apt)<br> If you look inside these directories you may see</p> <ul> <li>__init__.py (makes a directory a package and may list what modules will be loaded)</li> <li> <strong>directory</strong> (this could be a sub package)</li> <li> <strong>files</strong>.py (these are the modules containing the classes/functions)</li> </ul> <p>Another way to find the location is in the interpreter. Import a module and print the __file__ variable. (however this does not work on built-in modules)</p> <div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">&gt;</span><span class="o">&gt;&gt;</span> import http
<span class="gp">&gt;</span><span class="o">&gt;&gt;</span> http.__file__ 
<span class="go">/usr/lib/python3.6/http/__init__.py​
</span></code></pre></div></div> <p>Executing a module as a Script <br> When developing a module it is useful to execute the module as a script for testing and further development (unit testing). But when importing the module into another script you typically do not want it to execute that code.<br> An easy way to handle this is</p> <ul> <li>put an “if” condition in your module where you place your “unit testing” code</li> <li>and __name__ == ‘__main__’</li> </ul> <p>__name__ is just a variable python assigns to the file being executed</p> <p>When a module (or script) is executed as a script (ie $ python3 module.py)</p> <ul> <li>__name__ = ‘__main__’</li> </ul> <p>When a module is imported in another script (ie import module)</p> <ul> <li>__name__= module name</li> </ul> <p>So in your module put the if __name__ == ‘__main__’:<br> my_module.py</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">myfunction</span><span class="p">():</span><span class="err">​</span>
    <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">this is where the function does stuff</span><span class="sh">"</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="sh">'</span><span class="s">__main__</span><span class="sh">'</span><span class="p">:</span>
    <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">this is where i test the function</span><span class="sh">"</span><span class="p">)</span>
    <span class="nf">myfunction</span><span class="p">()</span>
</code></pre></div></div> <p>Now if you import this module in another script and call myfunction() it will only execute the myfunction. (because __name__ will = ‘my_module’)<br> But if you execute the module as a script. <code class="language-plaintext highlighter-rouge">$ python3 my_module.py</code><br> It will run the code inside the “if” condition because __name__ will = __main__</p> <p><strong>Experimenting with the “import”</strong><br> ​Early on your projects will be single python scripts or a single file (file.py). But even on these early scripts you’ll likely be leveraging off other python packages/modules and using “import”. There are two common methods for importing. (example below with a module)<br> Options</p> <ol> <li><code class="language-plaintext highlighter-rouge">import module</code></li> <li> <code class="language-plaintext highlighter-rouge">from module import function</code> (or Class)</li> </ol> <p>(note - most examples below use the function scenario. But you could also test by instantiating/creating an object with a = Class())</p> <p>Option 1. You have imported the module into the local symbol table but its contents are still private. You have to use dot notation and call the objects specifically with module.func()</p> <p>Option 2. You have imported the module objects directly so you directly call func(). The danger is if you already have a func() imported from a different module it would be over-written. You can avoid this by renaming using import ‘as’<br> <code class="language-plaintext highlighter-rouge">from module import func as thisfunc</code> <br> Now you use thisfunc()</p> <p>Below goes thru an example with the built-in “time” module often used for creating a short delay/pause in your code. Since “time” is a built-in module it is easier to use pydoc to find it.<br> First run pydoc -b to show a list of python packages/modules<br> <code class="language-plaintext highlighter-rouge">$ python3 -m pydoc -b</code><br> or<br> <code class="language-plaintext highlighter-rouge">$ python3 -m pydoc -n 10.0.0.222</code> (any device on network can access)</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">python3</span>
<span class="c1"># Option 1 above. Import time into the current namespace
</span><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="n">time</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nf">dir</span><span class="p">()</span>
<span class="c1"># Since we imported "time" we'll see it listed in dir(), the current local symbol table. And we know from pydoc that "sleep" was the function inside "time". So we use it with ..
</span><span class="o">&gt;&gt;&gt;</span> <span class="n">time</span><span class="p">.</span><span class="nf">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

<span class="c1"># Option 2 above. Now directly import  sleep
</span><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="n">time</span> <span class="kn">import</span> <span class="n">sleep</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nf">dir</span><span class="p">()</span>
<span class="c1"># Can now see "sleep" listed. So call it directly ..
</span><span class="o">&gt;&gt;&gt;</span> <span class="nf">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</code></pre></div></div> <p>A browser window should open up with the python package/modules. You’ll recognize the same directories listed from sys.path above. However the built-in modules are included here, too.<br> Under Built-in Modules select “time”. Scrolls past the Classes down to the functions and you’ll find “sleep”. Now use the interpreter to experiment with importing it. Use pydoc to Explore Packages/Modules<br> ​Pydoc is a graphical way to explore packages/modules in a directory (packages/modules you’ve created in that directory and the installed packages/modules by python).</p> <p><strong>Create Your Own Package Module</strong><br> The best way to get familiar with the package/module concept is creating your own packages (directories) and modules (file.py).</p> <ul> <li>Create __init__.py inside the directories to make them packages.</li> <li>Create simple functions with a print(“function”) inside the modules. Now experiment with different import syntax. <div class="language-console highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="gp">#</span><span class="w"> </span>User
<span class="go">|- user-script.py
</span><span class="gp">#</span><span class="w"> </span>Developer
<span class="go">├── package
│         ├── __init__.py
│         ├── moduleA.py
|         |       functionA()
│         ├── moduleB.py
|         |       functionB()
</span></code></pre></div> </div> </li> </ul> <p>Do iterations of changing your package __init__.py and method of importing in the script.<br> Each time check dir() to see what is loaded into the global namespace. (you can also do dir(object))</p> <p>For packages/modules that you build yourself it is easier to experiment with the import function using REPL and dir().<br> Create a package/module/function setup like above.<br> The function just does a simple print(“this is functionA”)<br> ​ Test 1<br> package __init__.py = from .moduleA import functionA<br> $ python3</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="n">package</span> 
<span class="o">&gt;&gt;&gt;</span> <span class="nf">dir</span><span class="p">()</span>
<span class="n">Try</span> <span class="ow">and</span> <span class="n">execute</span> <span class="n">the</span> <span class="n">test</span> <span class="n">function</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">package</span><span class="p">.</span><span class="n">module</span><span class="p">.</span><span class="nf">functionA</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">package</span><span class="p">.</span><span class="nf">functionA</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nf">functionA</span><span class="p">()</span>
</code></pre></div></div> <p>quit() and try another iteration to see how dir() changes. Note - if you don’t quit and keep importing thru different methods you’ll notice you can call a function with multiple conventions.</p> <p><strong>User and Developer Modes</strong><br> Although you may often be both the <strong>user</strong> and <strong>developer</strong> it is useful to think in both modes. You want to develop your package/<strong>init</strong>.py so that later you can easily user the modules.</p> <p><strong>__init__ –&gt; import package.module</strong><br> From developer side can list which modules are visible from the package</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Developer</span> <span class="o">-</span>  <span class="sh">'</span><span class="s">specific</span><span class="sh">'</span> <span class="err">​​</span> 
<span class="n">package</span><span class="o">/</span><span class="n">__init__</span><span class="p">.</span><span class="n">py</span>
<span class="err">​</span>
<span class="kn">import</span> <span class="n">package.moduleA</span>
<span class="c1"># import package.moduleB
</span>
<span class="c1"># Can control what modules/functions are visible
</span></code></pre></div></div> <p>User can import all (*) modules or specific modules that were listed in the __init__.py.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">​​</span><span class="n">User</span><span class="o">-</span><span class="n">script</span><span class="p">.</span><span class="n">py</span> 
<span class="kn">from</span> <span class="n">package</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">moduleA</span><span class="p">.</span><span class="nf">functionA</span><span class="p">()</span>
<span class="c1"># can not call moduleB.functionB()
</span></code></pre></div></div> <p>User can import package and call package.module.function</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">User</span><span class="o">-</span><span class="n">script</span><span class="p">.</span><span class="n">py</span> 
<span class="kn">import</span> <span class="n">package</span>
<span class="err">​</span>
<span class="n">call</span> <span class="n">package</span><span class="p">.</span><span class="n">moduleA</span><span class="p">.</span><span class="nf">functionA</span><span class="p">()</span>
</code></pre></div></div> <p>If the user knows the modules can import them specifically, regardless of the <strong>init</strong>.py</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">User</span><span class="o">-</span><span class="n">script</span><span class="p">.</span><span class="n">py</span> <span class="o">-</span> <span class="k">if</span> <span class="n">user</span> <span class="n">knows</span> <span class="n">the</span> <span class="n">module</span> <span class="n">can</span> <span class="n">still</span> <span class="n">specifically</span> <span class="kn">import</span> <span class="n">it</span> <span class="p">(</span><span class="n">even</span> <span class="k">if</span> <span class="n">init</span><span class="p">.</span><span class="n">py</span> <span class="n">does</span> <span class="ow">not</span><span class="p">)</span>
<span class="kn">import</span> <span class="n">package.moduleB</span> <span class="k">as</span> <span class="n">mymod</span><span class="err">​</span>
<span class="n">call</span> <span class="n">mymod</span><span class="p">.</span><span class="nf">functionB</span><span class="p">()</span><span class="err">​</span>

<span class="kn">from</span> <span class="n">package</span> <span class="kn">import</span> <span class="n">moduleB</span><span class="err">​</span>
<span class="err">​</span><span class="n">call</span> <span class="n">moduleB</span><span class="p">.</span><span class="nf">functionB</span><span class="p">()</span>
</code></pre></div></div> <div class="row"> <div class="col-md mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/linux/pythonimport1.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p><strong>__init__ –&gt; from module import *</strong></p> <p>From developer side can import all (*) classes/functions or be specific. This controls what is visible to the user.</p> <p>The downside of the ‘all’ (*) is that the user can see all functions/classes (even when not intended to be used by the user)</p> <p>The downside of the ‘specific’ scenario is that you have to keep updating your <strong>init</strong>.py as you add more functions.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Developer</span> <span class="o">-</span>  <span class="sh">'</span><span class="s">all</span><span class="sh">'</span> <span class="err">​</span> 
<span class="n">package</span><span class="o">/</span><span class="n">__init__</span><span class="p">.</span><span class="n">py</span>
<span class="err">​</span>
<span class="kn">from</span> <span class="n">.moduleA</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="n">.moduleB</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c1"># All functions are available to the user to import
</span></code></pre></div></div> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Developer</span> <span class="o">-</span> <span class="sh">'</span><span class="s">specific</span><span class="sh">'</span><span class="err">​</span>
<span class="n">package</span><span class="o">/</span><span class="n">__init__</span><span class="p">.</span><span class="n">py</span>
<span class="err">​</span>
<span class="kn">from</span> <span class="n">.moduleA</span> <span class="kn">import</span> <span class="n">functionA</span>
<span class="kn">from</span> <span class="n">.moduleB</span> <span class="kn">import</span> <span class="n">functionB</span>

<span class="c1"># Can control what functions are available to the user to import
</span></code></pre></div></div> <p>Since classes/functions are imported in <strong>init</strong>.py the user can call package.function()</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">User</span><span class="o">-</span><span class="n">script</span><span class="p">.</span><span class="n">py</span> 

<span class="kn">import</span> <span class="n">package</span>

<span class="c1">#call package.functionA()
</span><span class="n">package</span><span class="p">.</span><span class="nf">functionA</span><span class="p">()</span>

<span class="c1">#call package.functionB()​
</span><span class="err">​</span><span class="n">package</span><span class="p">.</span><span class="nf">functionB</span><span class="p">()</span>
</code></pre></div></div> <p>Or the user can directly import the function</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">User</span><span class="o">-</span><span class="n">script</span><span class="p">.</span><span class="n">py</span> 

<span class="kn">from</span> <span class="n">package</span> <span class="kn">import</span> <span class="n">functionA</span>

<span class="n">call</span> <span class="nf">functionA</span><span class="p">()</span>
</code></pre></div></div> <p><strong>__init__ –&gt; from module import * (_all__ = [‘module’])</strong></p> <p>From developer side if you want to limit what is visible (what should be called by the user) then the __all__ can be defined to specify what the user sees with “import * “</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Developer</span> <span class="o">-</span>  <span class="sh">'</span><span class="s">specific</span><span class="sh">'</span> <span class="err">​</span> 
<span class="n">package</span><span class="o">/</span><span class="n">__init__</span><span class="p">.</span><span class="n">py</span>
<span class="err">​</span>
<span class="kn">from</span> <span class="n">.module</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span>
  <span class="sh">'</span><span class="s">moduleA</span><span class="sh">'</span><span class="p">,</span>
  <span class="sh">'</span><span class="s">functionA</span><span class="sh">'</span>
<span class="err">​</span><span class="p">]</span>

<span class="c1"># Can control what modules/functions are visible
</span></code></pre></div></div> <p>User can import package modules that were listed in the <strong>init</strong>.py. ​</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">User</span><span class="o">-</span><span class="n">script</span><span class="p">.</span><span class="n">py</span> 
<span class="kn">from</span> <span class="n">package</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">call</span> <span class="n">moduleA</span><span class="p">.</span><span class="nf">functionA</span><span class="p">()</span>
<span class="err">​</span><span class="n">call</span> <span class="nf">functionA</span><span class="p">()</span>
<span class="c1"># can not call moduleB.functionB()
</span></code></pre></div></div> <p>User can still call specific modules if the name is known.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">User</span><span class="o">-</span><span class="n">script</span><span class="p">.</span><span class="n">py</span> <span class="o">-</span> <span class="k">if</span> <span class="n">user</span> <span class="n">knows</span> <span class="n">the</span> <span class="n">module</span> <span class="n">can</span> <span class="n">still</span> <span class="n">specifically</span> <span class="kn">import</span> <span class="n">it</span> <span class="p">(</span><span class="n">even</span> <span class="k">if</span> <span class="n">init</span><span class="p">.</span><span class="n">py</span> <span class="n">does</span> <span class="ow">not</span><span class="p">)</span>
<span class="kn">import</span> <span class="n">package.moduleB</span> <span class="k">as</span> <span class="n">moduleB</span><span class="err">​</span>
<span class="n">call</span> <span class="n">moduleB</span><span class="p">.</span><span class="nf">functionB</span><span class="p">()</span><span class="err">​</span>

<span class="kn">from</span> <span class="n">package</span> <span class="kn">import</span> <span class="n">moduleB</span><span class="err">​</span>
<span class="err">​</span><span class="n">call</span> <span class="n">moduleB</span><span class="p">.</span><span class="nf">functionB</span><span class="p">()</span>
</code></pre></div></div> <div class="row"> <div class="col-md mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/linux/pythonimport2.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p>Regardless of the package <strong>init</strong>.py (or if it even exists) you can import directly if the module/function names are known.</p> <div class="row"> <div class="col-md mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/linux/pythonimport3.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <h1 id="upython">uPython</h1> <p>MicroPython has a subset of Python libraries but there are some areas where the projects will deviate. Especially if you want to take advantage of more recent Python3.7+ features.</p> <p>Other differences come up due to the packages that are used for one vs the other. A good example is mqtt.<br> <strong>mqtt</strong></p> <ul> <li>For RaspberryPi/Python3 I use paho-mqtt - Paho does not require topics to be defined in binary format.</li> <li>For esp32/uPython I use umqtt.simple - umqtt.simple requires topics to be in binary (b’topic’) format. This is to save memory. MQTT requires binary format and converting back-and-forth between string-binary would be extra steps.</li> </ul> <p>Another example is logging. <strong>logging</strong></p> <ul> <li>Python3 has comprehensive built in logging modules.</li> <li>upython there is a basic version. To make it more advanced you have to add to it.<br> See section on <a href="../../../ref/coding/python/#logging">logging</a> </li> </ul> <p><strong>Get uPython System Info</strong><br> esp32 CPU info​</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">machine</span>  
<span class="n">cpufreq</span> <span class="o">=</span> <span class="n">machine</span><span class="p">.</span><span class="nf">freq</span><span class="p">()</span>  
</code></pre></div></div> <p>To set the freq</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">machine</span><span class="p">.</span><span class="nf">freq</span><span class="p">(</span><span class="mi">240000000</span><span class="p">)</span>  
</code></pre></div></div> <p>Python/RPi</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">f</span> <span class="o">=</span> <span class="nf">open</span><span class="p">(</span><span class="sh">"</span><span class="s">/sys/devices/system/cpu/cpu0/cpufreq/scaling_cur_freq</span><span class="sh">"</span><span class="p">)</span>  
<span class="n">cpufreq</span> <span class="o">=</span> <span class="nf">int</span><span class="p">(</span><span class="n">f</span><span class="p">.</span><span class="nf">read</span><span class="p">())</span> <span class="o">/</span> <span class="mi">1000</span>  
</code></pre></div></div> <p>When possible it is best to use integers in upython to keep the processing time as low as possible.<br> At 0.24MHz my esp32 showed <br> Integer calculations (+,-,//,<em>) take 0.025ms<br> Float calculations (+,-,/,</em>) take 0.03-0.04ms</p> <p>100 calculations would add up to an extra 1ms in process time. This is significant with a stepper motor project where the delay needs to be &lt;1ms.</p> <p>Time.sleep (&lt;1 sec delays)<br> Python sleep can be entered as a decimal</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">time</span> <span class="kn">import</span> <span class="n">sleep</span>  
<span class="nf">sleep</span><span class="p">(</span><span class="mf">0.001</span><span class="p">)</span> <span class="c1"># 1ms sleep  
</span></code></pre></div></div> <p><strong>upython</strong><br> Some boards do not support sleep as a float. Can use sleep_ms or sleep_us</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">time</span> <span class="kn">import</span> <span class="n">sleep_us</span>  
<span class="nf">sleep_us</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>  <span class="c1"># 1ms sleep .. enter an int in us  
</span></code></pre></div></div> <p>Timer Analysis<br> Python<br> perf_counter() includes delay times<br> process_time() derived from CPU counter so doesn’t update with delay</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">time</span> <span class="kn">import</span> <span class="n">perf_counter_ns</span> <span class="c1"># (the _ns is with 3.7+)  
</span><span class="n">time_ns</span> <span class="o">=</span> <span class="nf">perf_counter_ns</span><span class="p">()</span> <span class="c1"># returns integer, ns. Includes delay times  
</span><span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">code that is being timed</span><span class="sh">"</span><span class="p">)</span>  
<span class="n">time_ns</span> <span class="o">=</span> <span class="nf">perf_counter_ns</span><span class="p">()</span> <span class="o">-</span> <span class="n">self</span><span class="p">.</span><span class="n">time_ns</span>  
<span class="n">time_ms</span> <span class="o">=</span> <span class="n">time_ns</span><span class="o">/</span><span class="mi">1000000</span>  
</code></pre></div></div> <p>For python can also use timeit</p> <p><strong>uPython</strong></p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">utime</span><span class="p">,</span> <span class="n">uos</span>  
<span class="n">time_us</span> <span class="o">=</span> <span class="n">utime</span><span class="p">.</span><span class="nf">ticks_us</span><span class="p">()</span> <span class="c1"># returns integer, us. Includes delay times  
</span><span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">code that is being timed</span><span class="sh">"</span><span class="p">)</span>  
<span class="n">time_us</span> <span class="o">=</span> <span class="n">utime</span><span class="p">.</span><span class="nf">ticks_diff</span><span class="p">(</span><span class="n">utime</span><span class="p">.</span><span class="nf">ticks_us</span><span class="p">(),</span> <span class="n">time_us</span><span class="p">)</span>  
<span class="n">time_ms</span> <span class="o">=</span> <span class="n">time_us</span><span class="o">/</span><span class="mi">1000</span>  
</code></pre></div></div> <p>Another solution for both python/upython is creating a Timer class with start/stop methods built-in. (python Timer can be installed from pypi)</p> <h1 id="logging">logging</h1> <p>Logging can be used to debug code and/or trouble shooting system issues.<br> For system logging</p> <ul> <li>logs during boot</li> <li>systemd logs</li> <li>journalctl</li> <li>var/logs<br> Check out the <a href="../../../ref/linux/logs/">system logging</a> page.</li> </ul> <p><strong>For debugging</strong><br> The logging library has many useful features compared to standard print statements. It is installed with standard python installation and does not require extra install.</p> <ul> <li>There are multiple levels of logging (see levels below). DEBUG and INFO are the levels I use the most. I keep status and general information print statements at the INFO level and more detailed print statements with variables at the DEBUG.</li> <li>You can easily toggle these logging/print statements on/off for the entire code by changing the level.</li> <li>This on/off toggle can also control the logging for modules that are imported. (You can either pass the logger to them or use a root logger)</li> <li>There are logging options to include both printing to the console and/or a log file.</li> <li>There is a journal option to output the logs to the PC systemd journal (useful when your python script is running as a systemd service).​</li> </ul> <p>A couple approaches</p> <ul> <li> <strong>basicConfig</strong> Quick, simple logging with basicConfig(). With basicConfig() you can configure the root logger. I’ve noticed many modules in other libraries will also use the root logger so you can control the log level for them from your main script, too.</li> <li> <strong>RotatingFileHandler</strong> More advanced options with RotatingFileHandler. When you want to output to multiple places (console/standard output stream, a log file, and the journal) it is better to use Handlers. RotatingFileHandler lets you specify the max size of the log and enables rolling log files.​ ​ I have found both types of logging to be useful so I include an option for either in my main script. The template I use is below in the RotatingFileHandler example.</li> </ul> <p><strong>basicConfig()</strong><br> How to use basicConfig() logging in a python script<br> There are 5 levels of logging listed from lowest to highest (DEBUG/INFO do not get output by default. So you specify the level=logging.DEBUG in your code to force them)</p> <ul> <li>DEBUG</li> <li>INFO</li> <li>WARNING</li> <li>ERROR</li> <li>CRITICAL (can use this to turn logging off essentially)</li> </ul> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">logging</span>

<span class="n">logging</span><span class="p">.</span><span class="nf">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="p">.</span><span class="n">DEBUG</span><span class="p">)</span> <span class="c1"># Can set to CRITICAL to turn it off
</span><span class="n">logging</span><span class="p">.</span><span class="nf">debug</span><span class="p">(</span><span class="sh">'</span><span class="s">Output to console</span><span class="sh">'</span><span class="p">)</span>

<span class="c1"># or to log to a file using log format option
</span><span class="n">log_format</span> <span class="o">=</span> <span class="sh">'</span><span class="s">%(asctime)s %(filename)s: %(message)s</span><span class="sh">'</span>
<span class="n">logging</span><span class="p">.</span><span class="nf">basicConfig</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="sh">'</span><span class="s">test.log</span><span class="sh">'</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="n">log_format</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="p">.</span><span class="n">DEBUG</span><span class="p">)</span>
<span class="n">logging</span><span class="p">.</span><span class="nf">warning</span><span class="p">(</span><span class="sh">'</span><span class="s">Send to log file</span><span class="sh">'</span><span class="p">)</span>

<span class="sh">'''</span><span class="s">Can use the logging.error and exc_info=True to include the stack trace in the log (lists the function ran up to the point of the exception thrown)</span><span class="sh">'''</span>
<span class="n">dummy_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="k">try</span><span class="p">:</span>
  <span class="nf">print</span><span class="p">(</span><span class="n">dummy_list</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
<span class="k">except</span> <span class="nb">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
  <span class="n">logging</span><span class="p">.</span><span class="nf">error</span><span class="p">(</span><span class="sh">"</span><span class="s">exception error</span><span class="sh">"</span><span class="p">,</span> <span class="n">exc_info</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="c1"># Another method
</span><span class="k">try</span><span class="p">:</span>
    <span class="nf">functionA</span><span class="p">()</span>

<span class="k">except</span> <span class="nb">IOError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="n">logging</span><span class="p">.</span><span class="nf">info</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

<span class="k">except</span> <span class="nb">KeyboardInterrupt</span><span class="p">:</span>
    <span class="n">logging</span><span class="p">.</span><span class="nf">info</span><span class="p">(</span><span class="sh">"</span><span class="s">ctrl c</span><span class="sh">"</span><span class="p">)</span>
    <span class="nf">exit</span><span class="p">()</span>
</code></pre></div></div> <p><strong>RotatingFileHandler()</strong><br> How to use RotatingFileHandler() logging in a python script<br> For more logging options you can replace basicConfig() with RotatingFileHandler(). This allows you to create multiple handlers outputting to different levels of logging to multiple places (console or a log file). You can also specify the max size of the log file.</p> <p>The 5 levels of logging are still used. Listed from lowest to highest (DEBUG/INFO do not get output by default. So you specify the level=logging.DEBUG in your code to force them)</p> <p>Function below will create 3 handlers for three outputs (console, regular log, error log).<br> The auxillary loggers will only output up to the lowest level of main_logger.setLevel<br> If main_logger.setLevel is off (logging.CRITICAL) then the other loggers will not output.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">setup_logging</span><span class="p">(</span><span class="n">log_dir</span><span class="p">,</span> <span class="n">log_level</span><span class="o">=</span><span class="n">logging</span><span class="p">.</span><span class="n">INFO</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
    <span class="c1"># Create loggers
</span>
    <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">logfile_log_level</span> <span class="o">=</span> <span class="n">logging</span><span class="p">.</span><span class="n">CRITICAL</span>
    <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
        <span class="n">logfile_log_level</span> <span class="o">=</span> <span class="n">logging</span><span class="p">.</span><span class="n">DEBUG</span>

    <span class="n">main_logger</span> <span class="o">=</span> <span class="n">logging</span><span class="p">.</span><span class="nf">getLogger</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>
    <span class="n">main_logger</span><span class="p">.</span><span class="nf">setLevel</span><span class="p">(</span><span class="n">log_level</span><span class="p">)</span>
    <span class="n">log_file_format</span> <span class="o">=</span> <span class="n">logging</span><span class="p">.</span><span class="nc">Formatter</span><span class="p">(</span><span class="sh">"</span><span class="s">[%(levelname)s] - %(asctime)s - %(name)s - : %(message)s in %(pathname)s:%(lineno)d</span><span class="sh">"</span><span class="p">)</span>
    <span class="n">log_console_format</span> <span class="o">=</span> <span class="n">logging</span><span class="p">.</span><span class="nc">Formatter</span><span class="p">(</span><span class="sh">"</span><span class="s">[%(levelname)s]: %(message)s</span><span class="sh">"</span><span class="p">)</span>

    <span class="n">console_handler</span> <span class="o">=</span> <span class="n">logging</span><span class="p">.</span><span class="nc">StreamHandler</span><span class="p">()</span>
    <span class="n">console_handler</span><span class="p">.</span><span class="nf">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="p">.</span><span class="n">CRITICAL</span><span class="p">)</span>
    <span class="n">console_handler</span><span class="p">.</span><span class="nf">setFormatter</span><span class="p">(</span><span class="n">log_console_format</span><span class="p">)</span>

    <span class="n">exp_file_handler</span> <span class="o">=</span> <span class="nc">RotatingFileHandler</span><span class="p">(</span><span class="sh">'</span><span class="s">{}/debug.log</span><span class="sh">'</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="n">log_dir</span><span class="p">),</span> <span class="n">maxBytes</span><span class="o">=</span><span class="mi">10</span><span class="o">**</span><span class="mi">6</span><span class="p">,</span> <span class="n">backupCount</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span> <span class="c1"># 1MB file
</span>    <span class="n">exp_file_handler</span><span class="p">.</span><span class="nf">setLevel</span><span class="p">(</span><span class="n">logfile_log_level</span><span class="p">)</span>
    <span class="n">exp_file_handler</span><span class="p">.</span><span class="nf">setFormatter</span><span class="p">(</span><span class="n">log_file_format</span><span class="p">)</span>

    <span class="n">exp_errors_file_handler</span> <span class="o">=</span> <span class="nc">RotatingFileHandler</span><span class="p">(</span><span class="sh">'</span><span class="s">{}/error.log</span><span class="sh">'</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="n">log_dir</span><span class="p">),</span> <span class="n">maxBytes</span><span class="o">=</span><span class="mi">10</span><span class="o">**</span><span class="mi">6</span><span class="p">,</span> <span class="n">backupCount</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
    <span class="n">exp_errors_file_handler</span><span class="p">.</span><span class="nf">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="p">.</span><span class="n">WARNING</span><span class="p">)</span>
    <span class="n">exp_errors_file_handler</span><span class="p">.</span><span class="nf">setFormatter</span><span class="p">(</span><span class="n">log_file_format</span><span class="p">)</span>

    <span class="n">main_logger</span><span class="p">.</span><span class="nf">addHandler</span><span class="p">(</span><span class="n">console_handler</span><span class="p">)</span>
    <span class="n">main_logger</span><span class="p">.</span><span class="nf">addHandler</span><span class="p">(</span><span class="n">exp_file_handler</span><span class="p">)</span>
    <span class="n">main_logger</span><span class="p">.</span><span class="nf">addHandler</span><span class="p">(</span><span class="n">exp_errors_file_handler</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">main_logger</span>

<span class="c1"># Set next 3 variables for different logging options
</span>    <span class="n">logger_log_level</span><span class="o">=</span> <span class="n">logging</span><span class="p">.</span><span class="n">DEBUG</span> <span class="c1"># CRITICAL=logging off. DEBUG=get variables. INFO=status messages.
</span>    <span class="n">logger_setup</span> <span class="o">=</span> <span class="mi">1</span>  <span class="c1"># 0 for basicConfig, 1 for custom logger with RotatingFileHandler (RFH)
</span>    <span class="n">RFHmode</span> <span class="o">=</span> <span class="mi">2</span> <span class="c1"># If logger_setup ==1 (RotatingFileHandler) then access to modes below
</span>                <span class="c1">#Arguments
</span>                <span class="c1">#log_level, RFHmode|  logger.x() | output
</span>                <span class="c1">#------------------|-------------|-----------
</span>                <span class="c1">#      INFO, 1     |  info       | print only
</span>                <span class="c1">#      INFO, 2     |  info       | print+logfile
</span>                <span class="c1">#      DEBUG,1     |  info+debug | print only
</span>                <span class="c1">#      DEBUG,2     |  info+debug | print+logfile
</span>    <span class="k">if</span> <span class="n">logger_setup</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="c1"># Use basicConfig logger
</span>        <span class="k">if</span> <span class="nf">len</span><span class="p">(</span><span class="n">logging</span><span class="p">.</span><span class="nf">getLogger</span><span class="p">().</span><span class="n">handlers</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>      <span class="c1"># Root logger does not already exist, will create it
</span>            <span class="n">logging</span><span class="p">.</span><span class="nf">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">logger_log_level</span><span class="p">)</span> <span class="c1"># Create Root logger
</span>            <span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="p">.</span><span class="nf">getLogger</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>        <span class="c1"># Set logger to root logging
</span>            <span class="n">logger</span><span class="p">.</span><span class="nf">setLevel</span><span class="p">(</span><span class="n">logger_log_level</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="p">.</span><span class="nf">getLogger</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>        <span class="c1"># Root logger already exists so just linking logger to it
</span>            <span class="n">logger</span><span class="p">.</span><span class="nf">setLevel</span><span class="p">(</span><span class="n">logger_log_level</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">logger_setup</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>                             <span class="c1"># Using custom logger with RotatingFileHandler
</span>        <span class="n">logger</span> <span class="o">=</span> <span class="nf">setup_logging</span><span class="p">(</span><span class="n">path</span><span class="p">.</span><span class="nf">dirname</span><span class="p">(</span><span class="n">path</span><span class="p">.</span><span class="nf">abspath</span><span class="p">(</span><span class="n">__file__</span><span class="p">)),</span> <span class="n">logger_log_level</span><span class="p">,</span> <span class="n">RFHmode</span> <span class="p">)</span> <span class="c1"># dir for creating logfile
</span>    <span class="n">logger</span><span class="p">.</span><span class="nf">info</span><span class="p">(</span><span class="n">logger</span><span class="p">)</span>

    <span class="n">logger</span><span class="p">.</span><span class="nf">debug</span><span class="p">(</span><span class="sh">'</span><span class="s">this will only print when level set to DEBUG</span><span class="sh">'</span><span class="p">)</span>

<span class="c1"># Can pass the logger and log_level to sub modules
</span><span class="nf">example_function</span><span class="p">(</span><span class="n">mlogger</span><span class="o">=</span><span class="n">logger</span><span class="p">,</span> <span class="n">mlog_level</span><span class="o">=</span><span class="n">logger_log_level</span><span class="p">)</span>
</code></pre></div></div> <p><strong>MicroPython Logging (ulogging)</strong><br> Logging statements with string formatting will add a small amount of time to the code even when the logging level is set higher. On the esp32 (.24MHz) each logging statement added 10ms. When I’m finished with debugging I comment or remove the logging statements for esp32 projects.</p> <p>The basic upython version of logging is on <a href="https://github.com/peterhinch/micropython-samples/blob/master/PicoWeb/ulogging.py" target="_blank" rel="noopener noreferrer">github</a></p> <p>It follows similar syntax</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">ulogging</span>
<span class="sh">'''</span><span class="s">
CRITICAL = 50
ERROR = 40
WARNING = 30
INFO = 20
DEBUG = 10
NOTSET = 0
</span><span class="sh">'''</span>
<span class="n">a</span> <span class="o">=</span> <span class="sh">"</span><span class="s">test</span><span class="sh">"</span>

<span class="n">ulogging</span><span class="p">.</span><span class="nf">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">ulogging</span><span class="p">.</span><span class="nf">info</span><span class="p">(</span><span class="sh">'</span><span class="s">root logger info: {0}</span><span class="sh">'</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="n">a</span><span class="p">))</span>
<span class="n">ulogging</span><span class="p">.</span><span class="nf">debug</span><span class="p">(</span><span class="sh">'</span><span class="s">root logger debugging</span><span class="sh">'</span><span class="p">)</span>

<span class="n">logger</span> <span class="o">=</span> <span class="n">ulogging</span><span class="p">.</span><span class="nf">getLogger</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>
<span class="n">logger</span><span class="p">.</span><span class="nf">setLevel</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="n">logger</span><span class="p">.</span><span class="nf">info</span><span class="p">(</span><span class="sh">'</span><span class="s">logger info: {0}</span><span class="sh">'</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="n">a</span><span class="p">))</span>
<span class="n">logger</span><span class="p">.</span><span class="nf">debug</span><span class="p">(</span><span class="sh">'</span><span class="s">logger debug</span><span class="sh">'</span><span class="p">)</span>
</code></pre></div></div> <h1 id="cheat-sheet">Cheat sheet</h1> <p>Data types</p> <ul> <li>int</li> <li>float</li> <li>str</li> <li>list (ordered sequence of objects) <ul> <li>C++ std::vector</li> <li>JavaScript: Array</li> <li>Ruby: Array approximated</li> <li>HTML: can use js array</li> <li>PHP: array[], key is optional</li> </ul> </li> <li>dict (unordered key:value pairs) <ul> <li>C++ no built-in dict type</li> <li>C# Dictionary</li> <li>JavaScript: Object</li> <li>Ruby: Hash</li> <li>Java: Map approximated</li> <li>PHP: array[]</li> </ul> </li> </ul> <h2 id="lists-and-dictionaries">Lists and Dictionaries</h2> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">dictA</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># initialized empty
</span><span class="n">dictA</span><span class="p">[</span><span class="sh">'</span><span class="s">car</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="sh">'</span><span class="s">ford</span><span class="sh">'</span>
<span class="n">listA</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># initialized empty
</span><span class="n">listA</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="sh">'</span><span class="s">red</span><span class="sh">'</span><span class="p">)</span> <span class="c1"># since started empty need to use .append to assign a value
</span>  <span class="c1"># also .append would be required to keep adding more items to the list
</span>  <span class="c1"># But can change the value assignment with []
</span><span class="n">listA</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">=</span><span class="sh">'</span><span class="s">blue</span><span class="sh">'</span>

<span class="c1"># Can also initialize multiple items in a list during declaration
</span><span class="n">channels</span> <span class="o">=</span> <span class="mi">4</span>
<span class="nb">list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">channels</span>

</code></pre></div></div> <p>2D list</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">list2D</span> <span class="o">=</span> <span class="p">[[]]</span> <span class="c1"># first list is initialized with a 2nd list
</span>              <span class="c1"># note 2nd list is empty and would require .append to assign a value
# or
</span><span class="n">list2D</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">]]</span> <span class="c1"># both lists are initialized with objects and can be assigned using [] 
</span>
<span class="n">list2D</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">=</span><span class="mi">1</span>  <span class="c1"># [[1]]
</span><span class="n">list2D</span><span class="p">.</span><span class="nf">append</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>  <span class="c1"># [[1], [2, 3]]
</span>
<span class="n">list2D</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>    <span class="c1"># [[0, 1]]
</span><span class="n">list2D</span><span class="p">.</span><span class="nf">append</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span> <span class="c1"># [[0, 1], [2, 3]]
</span><span class="n">list2D</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">4</span>     <span class="c1"># [[0, 4], [2, 3]]
</span></code></pre></div></div> <p>Check if an item exists in a list</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">listx</span><span class="p">:</span>
</code></pre></div></div> <p>Iterate through items in a list</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">listx</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="mi">5</span>

<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">listx</span><span class="p">:</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</code></pre></div></div> <p>List comprehension + logic</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">tempC</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">80</span><span class="p">]</span>
<span class="n">tempF</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">9</span><span class="o">/</span><span class="mi">5</span><span class="o">*</span><span class="n">temp</span><span class="o">+</span><span class="mi">32</span><span class="p">)</span> <span class="k">for</span> <span class="n">temp</span> <span class="ow">in</span> <span class="n">tempC</span><span class="p">]</span> <span class="c1"># [32.0, 68.0, 104.0, 176.0]
</span>
<span class="n">oddeven</span> <span class="o">=</span> <span class="p">[</span><span class="sh">'</span><span class="s">EVEN</span><span class="sh">'</span> <span class="k">if</span> <span class="n">x</span><span class="o">%</span><span class="mi">2</span><span class="o">==</span><span class="mi">0</span> <span class="k">else</span> <span class="sh">'</span><span class="s">ODD</span><span class="sh">'</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">11</span><span class="p">)]</span> <span class="c1"># ['EVEN', 'ODD', 'EVEN',..]
</span></code></pre></div></div> <p>Dictionary and avoiding/handling errors</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">dict</span> <span class="o">=</span> <span class="p">{}</span>
<span class="nb">dict</span><span class="p">[</span><span class="sh">'</span><span class="s">a</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="sh">'</span><span class="s">alligator</span><span class="sh">'</span>
<span class="nb">dict</span><span class="p">[</span><span class="sh">'</span><span class="s">b</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="sh">'</span><span class="s">boxer</span><span class="sh">'</span>
<span class="nb">dict</span><span class="p">[</span><span class="sh">'</span><span class="s">c</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="sh">'</span><span class="s">cat</span><span class="sh">'</span>

<span class="nf">print</span><span class="p">(</span><span class="nb">dict</span><span class="p">)</span> <span class="c1"># {'a': 'alligator', 'b': 'boxer', 'c': 'cat'}
</span>
<span class="nf">print</span><span class="p">(</span><span class="nb">dict</span><span class="p">[</span><span class="sh">'</span><span class="s">a</span><span class="sh">'</span><span class="p">])</span>    <span class="c1"># Simple lookup, returns 'alligator'
</span><span class="nb">dict</span><span class="p">[</span><span class="sh">'</span><span class="s">a</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">6</span>       <span class="c1"># Put new key/value into dict
</span><span class="sh">'</span><span class="s">a</span><span class="sh">'</span> <span class="ow">in</span> <span class="nb">dict</span>         <span class="c1"># True
## print(dict['z'])                  # Will throw a KeyError
</span><span class="k">if</span> <span class="sh">'</span><span class="s">z</span><span class="sh">'</span> <span class="ow">in</span> <span class="nb">dict</span><span class="p">:</span> <span class="nf">print</span><span class="p">(</span><span class="nb">dict</span><span class="p">[</span><span class="sh">'</span><span class="s">z</span><span class="sh">'</span><span class="p">])</span>     <span class="c1"># Avoids KeyError
</span><span class="nf">print</span><span class="p">(</span><span class="nb">dict</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="sh">'</span><span class="s">z</span><span class="sh">'</span><span class="p">))</span>  <span class="c1"># Prints 'None' instead of throwing a KeyError
</span></code></pre></div></div> <p>Check for a specific key or value in a dict</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">testdict</span> <span class="o">=</span> <span class="p">{</span><span class="sh">'</span><span class="s">akey</span><span class="sh">'</span><span class="p">:</span><span class="mi">123</span><span class="p">}</span>
<span class="mi">123</span> <span class="ow">in</span> <span class="n">testdict</span><span class="p">.</span><span class="nf">values</span><span class="p">()</span>
<span class="sh">'</span><span class="s">akey</span><span class="sh">'</span> <span class="ow">in</span> <span class="n">testdict</span><span class="p">.</span><span class="nf">keys</span><span class="p">()</span>
</code></pre></div></div> <p>Check if key exists in a dictionary</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="nb">dict</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
</code></pre></div></div> <p>Check if dict is empty</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">bool</span><span class="p">(</span><span class="nb">dict</span><span class="p">)</span>
</code></pre></div></div> <p>list() function will create a list object.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">str</span><span class="o">=</span><span class="sh">'</span><span class="s">hello</span><span class="sh">'</span>
<span class="nf">list</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span> <span class="o">=</span> <span class="p">[</span><span class="sh">'</span><span class="s">h</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">e</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">l</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">l</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">o</span><span class="sh">'</span><span class="p">]</span>
<span class="nb">dict</span> <span class="o">=</span> <span class="p">{</span><span class="sh">'</span><span class="s">alpha</span><span class="sh">'</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="sh">'</span><span class="s">beta</span><span class="sh">'</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="sh">'</span><span class="s">gamma</span><span class="sh">'</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="sh">'</span><span class="s">delta</span><span class="sh">'</span><span class="p">:</span><span class="mi">4</span><span class="p">}</span>
<span class="nf">list</span><span class="p">(</span><span class="nb">dict</span><span class="p">)</span> <span class="o">=</span> <span class="p">[</span><span class="sh">'</span><span class="s">alpha</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">beta</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">gamma</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">delta</span><span class="sh">'</span><span class="p">]</span> <span class="c1"># &lt;-return the keys as a list
</span><span class="o">*</span><span class="nb">dict</span> <span class="o">=</span> <span class="n">alpha</span> <span class="n">beta</span> <span class="n">gamma</span> <span class="n">delta</span>    <span class="c1"># &lt;- will unpack the keys
</span></code></pre></div></div> <p>: is arrange. If now lower, upper then will select all [:] Python includes the lower bound but excludes the upper bound. So [:-1] starts at 0 but does not includes the last. to select first 2 row/col use [0:2, 0:2] to select last 2 row/col use [-2:, -2:]</p> <h2 id="functions-and-arguments">Functions and Arguments</h2> <p>Functions can return a value or return nothing (void function). A function that is meant to perform an action could be called a procedure. Passing variable number of arguments in a function. Terminology changes when referring to definition vs call of the function. Order is positional/non-default then keyword/default(a=1)</p> <p>Defining the function<br> 4 positional arguments. a,b are required (non-defaults). c,d are optional (have defaults)</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">d</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>  
    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span> <span class="o">+</span> <span class="n">c</span> <span class="o">+</span> <span class="n">d</span>
</code></pre></div></div> <p>return vs yield</p> <ul> <li>return is used to exit the function and return a value</li> <li>yield will suspend the execution of the function and return a value. the function can be resumed later by calling it again</li> </ul> <p>generator is a function that returns an iterator. An iterator is an object that can be used to iterate over a sequence of values.</p> <p>example of generator and yield</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">my_generator</span><span class="p">():</span>
  <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
    <span class="k">yield</span> <span class="nf">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>

<span class="n">rules</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">my_generator</span><span class="p">()]</span>

<span class="n">results</span> <span class="o">=</span> <span class="nf">list</span><span class="p">(</span><span class="n">rules</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
</code></pre></div></div> <p>Calling the function</p> <ul> <li> <strong>func(1, 1)</strong> Called using two positional arguments. Default c,d will also be used but not shown</li> <li> <strong>func(1, 1, 1, 1)</strong> Called using four positionals, no keywords used (and no defaults used)</li> <li> <strong>func(1, 1, d=1, c=1)</strong> Called using positionals and keywords (keyword position doesn’t matter)</li> </ul> <p>a and b can also be passed using keywords</p> <ul> <li> <strong>func(d=1, c=1, b=1, a=1)</strong> Called using keywords, order/position does not matter. c,d were still optional.</li> </ul> <p><em>if 1 of the positionals is used (passed without keyword) the order is important. Positional (non-default) must be first.</em></p> <ul> <li> <strong>func(1, b=1)</strong> Called using one positional and one keyword, b.</li> <li> <strong>func(b=1, 1)</strong> Not allowed - SyntaxError: positional argument follows keyword argument</li> </ul> <p>Positional is still required too. Argument ‘a’ is missing below</p> <ul> <li> <strong>func(b=1, c=1)</strong> Not allowed - missing 1 required positional argument: ‘a’</li> </ul> <p>The * can be used to force an argument to be passed by keyword-only.<br> <strong>Any argument after * must be passed using a keyword.</strong></p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">d</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
</code></pre></div></div> <p>a,b are still positional. c,d must now be passed using keywords</p> <ul> <li> <strong>func(1, 1, 1, 1)</strong> Using four positionals doesn’t work now. TypeError: takes 2 positional arguments but 4 were given</li> <li> <strong>func(1, 1, d=1, c=1)</strong> Called using positionals and keywords (keyword position doesn’t matter)​</li> </ul> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span>  <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">d</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
    <span class="c1"># code here
</span>    <span class="k">return</span> <span class="n">output</span>
</code></pre></div></div> <p>a is now the only positional. b, c,d must now be passed using keywords (c,d have defaults)</p> <ul> <li> <strong>func(1, 1, c=1, d=1)</strong> Can not pass two positionals. TypeError: takes 1 positional argument but 2 positional arguments (and 2 keyword-only arguments) were given. Keywords could still be used for all four arguments though.</li> <li> <strong>func(d=1, c=1, b=1, a=1)</strong> Called using keywords, order/position does not matter. c,d were still optional.</li> </ul> <p>With Python3.8 the / can also be used to force arguments to be called by position (using keyword is not allowed)</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">​</span><span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="o">/</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">d</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div></div> <p>a is now positional-only. b is still positional but can use keyword, c,d must use keywords</p> <ul> <li> <strong>func(a=1, b=1, c=1, d=1)</strong> Will not work. a is positional-only. TypeError: got some positional-only arguments passed as keyword arguments: ‘a’</li> <li> <strong>func(1, b=1, c=1, d=1)</strong> is good.</li> </ul> <p>Generator (ie. range(0,10,2))</p> <ul> <li>Will generate but not store to memory</li> <li>Can cast it to a list to save it to memory and print it <div class="language-python highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="nf">list</span><span class="p">(</span><span class="nf">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
</code></pre></div> </div> </li> </ul> <h2 id="list-comprehension">List comprehension</h2> <p>Flattened for loop. Less code space than doing i = i + 1 or list.append in a loop. <br> range takes 3 arg. starting, ending, step</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">sensor</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="mi">4</span><span class="p">)]</span> <span class="o">--&gt;</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="c1"># 2-dimensional
</span><span class="n">sensor</span> <span class="o">=</span> <span class="p">[[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="mi">4</span><span class="p">)]</span> <span class="o">-&gt;</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span>

<span class="nb">list</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)]</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">36</span><span class="p">,</span> <span class="mi">49</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">81</span><span class="p">]</span>
<span class="n">even</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">11</span><span class="p">)</span> <span class="k">if</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span><span class="mi">0</span><span class="p">]</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>
<span class="n">tempC</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">80</span><span class="p">]</span>
<span class="n">tempF</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">9</span><span class="o">/</span><span class="mi">5</span><span class="o">*</span><span class="n">temp</span><span class="o">+</span><span class="mi">32</span><span class="p">)</span> <span class="k">for</span> <span class="n">temp</span> <span class="ow">in</span> <span class="n">tempC</span><span class="p">]</span>
<span class="n">oddeven</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">if</span> <span class="n">x</span><span class="o">%</span><span class="mi">2</span><span class="o">==</span><span class="mi">0</span> <span class="k">else</span> <span class="sh">'</span><span class="s">ODD</span><span class="sh">'</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">11</span><span class="p">)]</span>

<span class="n">colors_list</span> <span class="o">=</span> <span class="p">[[</span><span class="sh">'</span><span class="s">blue</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">green</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">yellow</span><span class="sh">'</span><span class="p">],</span>
               <span class="p">[</span><span class="sh">'</span><span class="s">black</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">purple</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">orange</span><span class="sh">'</span><span class="p">],</span>
               <span class="p">[</span><span class="sh">'</span><span class="s">red</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">white</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">brown</span><span class="sh">'</span><span class="p">]</span>
               <span class="p">]</span>

<span class="n">new_colors_list</span> <span class="o">=</span> <span class="p">[(</span><span class="n">y</span> <span class="o">+</span> <span class="sh">'</span><span class="s">_color</span><span class="sh">'</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">colors_list</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">x</span><span class="p">]</span>

<span class="nf">print</span><span class="p">(</span><span class="n">new_colors_list</span><span class="p">)</span>
</code></pre></div></div> <h2 id="enumerate">enumerate</h2> <p>Enumerate to include a counter. Will come back with tuple but can unpack</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">rpiPins</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">18</span><span class="p">]</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">pins</span> <span class="ow">in</span> <span class="nf">enumerate</span><span class="p">(</span><span class="n">rpiPins</span><span class="p">):</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">'</span><span class="s">index=</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s"> and pin=</span><span class="si">{</span><span class="n">pins</span><span class="si">}</span><span class="sh">'</span><span class="p">)</span>

<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">pin</span> <span class="ow">in</span> <span class="nf">enumerate</span><span class="p">(</span><span class="n">pins</span><span class="p">,</span> <span class="n">start</span> <span class="o">=</span> <span class="mi">1</span><span class="p">):</span> <span class="p">(</span><span class="n">start</span> <span class="ow">is</span> <span class="n">optional</span><span class="p">,</span> <span class="n">otherwise</span> <span class="n">starts</span> <span class="n">at</span> <span class="mi">0</span><span class="p">)</span>
   <span class="n">io_pin</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nc">Pin</span><span class="p">(</span><span class="n">pin</span><span class="p">)</span>
</code></pre></div></div> <p>Unpack a tuple (tuple unpacking)</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">alist</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">),(</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">)]</span>
<span class="k">for</span> <span class="n">a</span><span class="p">,</span><span class="n">b</span> <span class="ow">in</span> <span class="n">alist</span><span class="p">:</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
</code></pre></div></div> <p>Unpack a dictionary</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="nf">isinstance</span><span class="p">(</span><span class="n">varD</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">varD</span><span class="p">.</span><span class="nf">items</span><span class="p">():</span>
        <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">{0}:{1}</span><span class="sh">"</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">))</span>
</code></pre></div></div> <p>Unpack a nested dictionary</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span> <span class="n">parm</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">varD</span><span class="p">.</span><span class="nf">items</span><span class="p">():</span>
    <span class="k">if</span> <span class="nf">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">item</span><span class="p">:</span>
            <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">{0}, {1}, {2}</span><span class="sh">"</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="n">parm</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">item</span><span class="p">[</span><span class="n">key</span><span class="p">]))</span>
</code></pre></div></div> <p>* and ** Operators (*args, **kwargs)<br> ​The * will unpack any iterable object (strings, lists, tuples, dictionaries)<br> ** will unpack dictionaries<br> Can be used as another method for combining lists</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">listA</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">listB</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">]</span>
<span class="n">listC</span> <span class="o">=</span> <span class="p">[</span><span class="o">*</span><span class="n">listA</span><span class="p">,</span> <span class="o">*</span><span class="n">listB</span><span class="p">]</span>
<span class="nf">print</span><span class="p">(</span><span class="n">listC</span><span class="p">)</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
<span class="nf">print</span><span class="p">(</span><span class="o">*</span><span class="n">listC</span><span class="p">)</span> <span class="o">=</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span> <span class="p">(</span><span class="n">unpacked</span><span class="p">)</span>
</code></pre></div></div> <p>So * and ** can be used in passing arguments to functions (*args, **kwargs)</p> <ul> <li>*args used to pass non-keyworded variable length argument list</li> <li>**kwargs used to pass keyworded variable length argument list</li> </ul> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">servos</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
  <span class="nf">print</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>       <span class="c1"># will unpack and print 1 2 3 on one line
</span>  <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>  <span class="c1"># will iterate thru args and print 1, 2, 3 on new lines
</span>     <span class="nf">print</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="nf">servos</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>

<span class="k">def</span> <span class="nf">motor</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">.</span><span class="nf">items</span><span class="p">():</span>
        <span class="nf">print </span><span class="p">(</span><span class="sh">"</span><span class="s">do setup using key:{0} and value:{1}</span><span class="sh">"</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>   <span class="c1"># will only print the keys.. motorA motorB
</span>        <span class="nf">print</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">.</span><span class="nf">values</span><span class="p">():</span>  <span class="c1"># will print the values 1 2
</span>        <span class="nf">print</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>
<span class="nf">motor</span><span class="p">(</span><span class="n">motorA</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">motorB</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</code></pre></div></div> <p>kwarg used to combine two dictionaries</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">dict1</span> <span class="o">=</span> <span class="p">{</span><span class="sh">'</span><span class="s">hello</span><span class="sh">'</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="sh">'</span><span class="s">hello2</span><span class="sh">'</span><span class="p">:</span><span class="mi">2</span><span class="p">}</span>
<span class="n">dict2</span> <span class="o">=</span> <span class="p">{</span><span class="sh">'</span><span class="s">hello3</span><span class="sh">'</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="sh">'</span><span class="s">hello4</span><span class="sh">'</span><span class="p">:</span><span class="mi">2</span><span class="p">}</span>
<span class="nb">dict</span> <span class="o">=</span> <span class="p">{</span><span class="o">**</span><span class="n">dict1</span><span class="p">,</span> <span class="o">**</span><span class="n">dict2</span><span class="p">}</span>  <span class="c1"># will combine the two dictionaries
</span><span class="nf">print</span><span class="p">(</span><span class="nb">dict</span><span class="p">)</span>
</code></pre></div></div> <h2 id="print-formatting">Print formatting</h2> <p>Formatting (place holder %, format, and f-string)<br> Examples below are format and f string</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">motor was spinning {rpm:1.2f}</span><span class="sh">"</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="n">rpm</span><span class="o">=</span><span class="n">motor</span><span class="o">-</span><span class="n">speed</span><span class="p">))</span>  
<span class="n">rpm</span> <span class="o">=</span> <span class="n">motor</span><span class="o">-</span><span class="n">speed</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">'</span><span class="s">motor was spinning </span><span class="si">{</span><span class="n">rpm</span><span class="si">:</span><span class="mf">1.2</span><span class="n">f</span><span class="si">}</span><span class="sh">'</span><span class="p">)</span>  
</code></pre></div></div> <p>Float formatting is {value:width.precision f}</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">voltage</span> <span class="o">=</span> <span class="mf">1.24543534</span>
<span class="n">modulo</span> <span class="o">=</span> <span class="sh">"</span><span class="s">%.2f</span><span class="sh">"</span><span class="o">%</span><span class="n">voltage</span>
<span class="nb">format</span> <span class="o">=</span> <span class="sh">"</span><span class="s">{:.2f}</span><span class="sh">"</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="n">voltage</span><span class="p">)</span>
<span class="n">fstring</span> <span class="o">=</span> <span class="sa">f</span><span class="sh">"</span><span class="si">{</span><span class="n">voltage</span><span class="si">:</span><span class="p">.</span><span class="mi">2</span><span class="n">f</span><span class="si">}</span><span class="sh">"</span>
<span class="c1"># Note - formatted variable will be a string type
</span><span class="nf">print</span><span class="p">(</span><span class="nf">type</span><span class="p">(</span><span class="n">fstring</span><span class="p">))</span>
</code></pre></div></div> <p>To format a list of data</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.23423</span><span class="p">,</span> <span class="mf">423.2432</span><span class="p">,</span> <span class="mf">1.2</span><span class="p">]</span>
<span class="n">formatted_data</span> <span class="o">=</span> <span class="p">[</span><span class="sh">"</span><span class="s">%.3f</span><span class="sh">"</span><span class="o">%</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">data</span><span class="p">]</span>
<span class="n">formatted_data</span> <span class="o">=</span> <span class="p">[</span><span class="sh">"</span><span class="s">{:.3f}</span><span class="sh">"</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">data</span><span class="p">]</span>
<span class="n">formatted_data</span> <span class="o">=</span> <span class="p">[</span><span class="sa">f</span><span class="sh">"</span><span class="si">{</span><span class="n">x</span><span class="si">:</span><span class="p">.</span><span class="mi">3</span><span class="n">f</span><span class="si">}</span><span class="sh">"</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">data</span><span class="p">]</span>
</code></pre></div></div> <h2 id="map-filter-lambda">map, filter, lambda</h2> <p>map will run a function on each item in a list,object<br> filter is similar but will return items that are true based on the function<br> You first give it the function and then the list,object <br> Will need to iterate through map()/filter() or cast it to a list</p> <p>map example</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">square</span><span class="p">(</span><span class="n">num</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">num</span><span class="o">**</span><span class="mi">2</span>

<span class="n">mylist</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>

<span class="c1"># iterate
</span><span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="nf">map</span><span class="p">(</span><span class="n">square</span><span class="p">,</span> <span class="n">mylist</span><span class="p">):</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

<span class="c1"># cast to list
</span><span class="nf">list</span><span class="p">(</span><span class="nf">map</span><span class="p">(</span><span class="n">square</span><span class="p">,</span> <span class="n">mylist</span><span class="p">))</span>
</code></pre></div></div> <p>filter example</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">is_even</span><span class="p">(</span><span class="n">num</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">num</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span> 

<span class="n">mylist</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">10</span><span class="p">]</span>

<span class="nf">list</span><span class="p">(</span><span class="nf">filter</span><span class="p">(</span><span class="n">is_even</span><span class="p">,</span><span class="n">mylist</span><span class="p">))</span>
</code></pre></div></div> <p>lambda is an anonymous, adhoc, function (you don’t use ‘def’ and give it a name) meant to run once for a simple task. Useful for when you are using a function that requires a simple functin passed into it. You can use lambda instead of formally defining the function.</p> <p>example of formal function</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">square</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span>
</code></pre></div></div> <p>Converted to lambda<br> remove the ‘def square’ name and put the return on the same line</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">**</span> <span class="mi">2</span>
</code></pre></div></div> <p>Could be used in the map/filter examples<br> instead of defining a ‘square’ function just use lambda</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">list</span><span class="p">(</span><span class="nf">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">**</span> <span class="mi">2</span><span class="p">,</span> <span class="n">mylist</span><span class="p">))</span>
<span class="nf">list</span><span class="p">(</span><span class="nf">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">n</span><span class="p">:</span> <span class="n">n</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">,</span><span class="n">mylist</span><span class="p">))</span>
</code></pre></div></div> <h2 id="inheritance-child-class">Inheritance (Child Class)</h2> <p>Create a class that inherits the functionality (properties and methods) from another class by passing the parent class as a parameter.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">halogen</span><span class="p">():</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">pin</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">pin</span> <span class="o">=</span> <span class="n">pin</span>
        <span class="n">self</span><span class="p">.</span><span class="nb">type</span> <span class="o">=</span> <span class="sh">"</span><span class="s">halogen</span><span class="sh">"</span>

    <span class="k">def</span> <span class="nf">on</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">light is on. pin= {} and light={}</span><span class="sh">"</span><span class="p">.</span><span class="nf">format</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">pin</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="nb">type</span><span class="p">))</span>

<span class="k">class</span> <span class="nc">led</span><span class="p">(</span><span class="n">halogen</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">pin</span><span class="p">,</span> <span class="n">socket</span><span class="p">):</span>
        <span class="n">self</span><span class="p">.</span><span class="n">pin</span> <span class="o">=</span> <span class="n">pin</span>
        <span class="n">self</span><span class="p">.</span><span class="nb">type</span> <span class="o">=</span> <span class="sh">"</span><span class="s">led</span><span class="sh">"</span>
        <span class="n">self</span><span class="p">.</span><span class="n">socket</span> <span class="o">=</span> <span class="n">socket</span>

<span class="n">toggle1</span> <span class="o">=</span> <span class="nf">led</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
<span class="n">toggle1</span><span class="p">.</span><span class="nf">on</span><span class="p">()</span>
</code></pre></div></div> <hr> <hr> </article> </div> </main> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2023 Sean Trautman. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="noopener noreferrer">Jekyll</a>. Hosted by <a href="https://pages.github.com/" target="_blank" rel="noopener noreferrer">GitHub Pages</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js" integrity="sha256-EdPgYcPk/IIrw7FYeuJQexva49pVRZNmt3LculEr7zM=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js"></script> <script defer src="/assets/js/common.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>