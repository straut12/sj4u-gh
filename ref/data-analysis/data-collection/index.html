<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>data | ST</title> <meta name="author" content="Sean Trautman"/> <meta name="description" content="Intro to Data Analysis"/> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"/> <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-DF7Zhf293AJxJNTmh5zhoYYIMs2oXitRfBjY+9L//AY=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"/> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha256-i1+4qU2G2860dGGIOJscdC30s9beBXjFfzjWLjBRsBg=" crossorigin="anonymous"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/native.css" media="" id="highlight_theme_light"/> <link rel="shortcut icon" href="/assets/img/st-logo-transparent.png"/> <link rel="stylesheet" href="/assets/css/main.css"> <link rel="canonical" href="https://straut12.github.io/ref/data-analysis/data-collection/"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/native.css" media="none" id="highlight_theme_dark"/> <script src="/assets/js/theme.js"></script> <script src="/assets/js/dark_mode.js"></script> </head> <body class="fixed-top-nav "> <div class="site-container"> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/">ST</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/"></a> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Coding</a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item" href="/ref/coding/git/">VScode Github</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/coding/bash/">Bash Shell</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/coding/python/">Python</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/coding/js/">JavaScript</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/coding/html/">Web HTML</a> </div> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Data Analysis</a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item" href="/ref/data-analysis/data-collection/">data collection</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/data-analysis/databases/">databases</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/data-analysis/basic-charting/">basic charting</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/data-analysis/data-visualization/">data visualization</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/data-analysis/ml/">machine learning</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/data-analysis/statistics/">notes</a> </div> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Linux</a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item" href="/ref/linux/linuxdistros/">Linux Options</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/linux/desktop/">Desktop Appearance</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/linux/software/">Installing SW</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/linux/sharing/">File Sharing</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/linux/vnc-ssh/">Remote vnc ssh</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/linux/terminal/">Terminal cli</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/linux/autostart/">Autostart systemd</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/linux/logs/">Logs</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/linux/list/">List of SW to Install</a> </div> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">Repositories</a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="site-body wrapper"> <aside class="site-sidebar" id="site-sidebar"> <nav class="toc"> <header><h4 class="toc__title">Table of Contents</h4></header> <ul class="toc__menu"> <li> <a href="#mqtt">MQTT</a> <ul> <li><a href="#paho-python">PAHO Python</a></li> <li><a href="#umqttsimple-upython">Umqttsimple uPython</a></li> </ul> </li> <li><a href="#node-red">Node Red</a></li> <li><a href="#api">API</a></li> </ul> </nav> </aside> <main> <div class="post"> <p class="post-description">Intro to Data Analysis</p> <article> <p>The data collection tools covered here are geared for projects where you have a wi-fi enabled micro controller with sensors connected to it. There is also a short section on API to gather information from web sites.</p> <h1 id="mqtt">MQTT</h1> <p><a href="https://mosquitto.org/" target="_blank" rel="noopener noreferrer">Mosquitto</a> MQTT is a lightweight messaging protocol that simplifies sending/receiving messages between devices (messages can be in the form of JSON objects). It acts as a broker to handle mqtt traffic among your devices. The messages are organized by topics. By publishing and subscribing to topics devices are able to talk to each other. For example, you can send commands from a node-red dashboard (web based), via the mqtt broker, to a RPi/esp32 to control servos or motors. And in return the the RPi/esp32 can send status (rpms) or other sensor data (voltage, current, temp) back to the node-red dashboard. The mqtt broker can run on the same RPi involved in the project or on a standalone RPi. The RPi can acts as the mqtt server/broker with node-red as the “brains”.​ Another example might be collecting the water level of a tank with a sensor and turning a pump off when sensor shows level is high.</p> <p>Measuring/Sending Data from a esp32/esp8266 or raspberry pi <br> Data collection can be made through sensors or other instruments</p> <ul> <li>ADC, ina219 current sensor, DHT11 temp sensor, encoder (motor rpm), etc</li> <li>I then use mosquitto (mqtt) to send the data to a server (usually a raspberry pi) and store it in a database (usually influxdb)</li> </ul> <blockquote> <p>Note - When possible I give each pi a unique name during setup and use hostname.local or just hostname instead of IP address. Using the raw IP address can be problematic due to it changing.​​ Static IP can also be a hassle since you’ll have to make sure your router doesn’t assign that ip address to another machine when it is offline.</p> </blockquote> <p>Mosquitto documentation can be found at mosquitto.org/man/. It’s a good reference tool for looking at the publish and subscribe functions. (Mosquitto uses port 1883)<br> ​ Initial setup on the device that will be used as the broker (mqtt server). You will use it both as the broker and client for initial testing.<br> <code class="language-plaintext highlighter-rouge">sudo apt install mosquitto mosquitto-clients</code><br> Now run an initial test. Since the subscribe/publish are happening on the broker you do not need to include the broker IP address.<br> In one window subscribe to “test” topic (-t)<br> <code class="language-plaintext highlighter-rouge">mosquitto_sub -t "test"</code> <br> In another window publish a msg (-m) to “test”topic (-t)<br> <code class="language-plaintext highlighter-rouge">mosquitto_pub -m "msg from window2" -t "test"</code><br> You should see the message show up on the first window</p> <p>Now add a password file. I called my file “passwd” and put it in /etc/mosquitto<br> <code class="language-plaintext highlighter-rouge">sudo mosquitto_passwd -c /etc/mosquitto/passwd &lt;user&gt;</code></p> <div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">Password: &lt;enter a password&gt;</span><span class="w">
</span></code></pre></div></div> <p>Check the status with <code class="language-plaintext highlighter-rouge">$ systemctl status mosquitto</code><br> The newer version requires a port defined for listening. You can add this in the user config file below <code class="language-plaintext highlighter-rouge">sudo nano /etc/mosquitto/conf.d/user.conf</code></p> <div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">listener 1883
</span></code></pre></div></div> <p>Note - If you look at <code class="language-plaintext highlighter-rouge">sudo nano /etc/mosquitto/The mosquitto.conf</code> it states it will also read user config in /etc/mosquitto/conf.d/ directory.</p> <p>If running the older version of mosquitto it opens port 1883 automatically and will shown in <code class="language-plaintext highlighter-rouge">systemctl status mosquitto</code></p> <p>To check that port 1883 is listening run <code class="language-plaintext highlighter-rouge">sudo lsof -i -P -n | grep LISTEN</code></p> <p>You can also tell mosquitto where the password file is by updating the user.conf file<br> <code class="language-plaintext highlighter-rouge">sudo nano /etc/mosquitto/conf.d/user.conf</code></p> <div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">listener 1883
allow_anonymous false
password_file /etc/mosquitto/passwd
</span></code></pre></div></div> <p>Now test again but this time you’ll have to include your user (-u) and password (-P).<br> First window<br> <code class="language-plaintext highlighter-rouge">mosquitto_sub -t "test" -u "user" -P "password"</code> <br> Second window<br> <code class="language-plaintext highlighter-rouge">mosquitto_pub -m "msg from window2" -t "test" -u "user" -P "password"</code></p> <p>Enable mosquitto to start on boot<br> <code class="language-plaintext highlighter-rouge">sudo systemctl enable mosquitto</code></p> <p>Additional testing -</p> <p>Default QOS (quality of services) is 0 which has no confirmation that the msg was received. Testing can be done with QOS=1 to get confirmation that the messag was received.<br> -V to use mqttv311 and -d for debugging<br> <code class="language-plaintext highlighter-rouge">mosquitto_sub -V mqttv311 -t "test" -u "user" -P "password" -q1 -d</code><br> Now publish a msg<br> <code class="language-plaintext highlighter-rouge">mosquitto_pub -V mqttv311 -t "test" -m "message" -u "user" -P "password" -q 1 -d</code></p> <p>If you have a second device you can try sending a msg from it to the broker. Now you’ll need to specify the IP address of the broker (-h) so mosquitto knows where to send the msg.<br> <code class="language-plaintext highlighter-rouge">mosquitto_pub -h &lt;Broker IPaddress&gt; -m "msg device2" -t "test" -u "user" -P "password"</code></p> <h2 id="paho-python">PAHO Python</h2> <p>RPi mqtt/Python specific libraries - <a href="https://eclipse.dev/paho/index.php?page=clients/python/docs/index.php" target="_blank" rel="noopener noreferrer">Paho Python client</a> makes it easy to setup the RPi broker functionality. It includes functions for connecting to the broker, sending and receiving messages.<br> install in venv <code class="language-plaintext highlighter-rouge">(.venv)$ python3.7 -m pip install paho-mqtt</code></p> <h2 id="umqttsimple-upython">Umqttsimple uPython</h2> <p>esp32 mqtt/upython specific libraries - Umqttsimple makes it easy to setup ESP32 communication to the RPi mqtt broker using upython. It also includes functions for connecting to the broker, sending and receiving messages.</p> <p>On the esp32 you will copy over a umqttsimple.py file along with your boot.py and main.py. You then import it with</p> <div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">from umqttsimple import MQTTClient
</span></code></pre></div></div> <p>The umqttsimple.py code can also be found in github for MQTT projects</p> <h1 id="node-red">Node Red</h1> <p><a href="https://nodered.org/" target="_blank" rel="noopener noreferrer">Node Red</a> is a flow-based coding tool. It has a web browser-based editor where you connect different nodes to retrieve data, store data, make decisions, etc. A common setup is to use the ‘mqtt in’ node to listen for messages/data. Then, based on the mqtt message content (JSON format), other nodes can be connected to store the data in a database, send data to gauges/charts, use a ‘mqtt out’ node to send instructions (publish) to another microcontroller. To program node-red you can use both the built-in nodes or code-blocks with custom javascript code/functions. Using json along with loads/dumps makes it easy to transfer data between Python running on your microcontroller and node-red js.</p> <p>Although node-red is installed on RPi’s the node-red web site recommends using their script to setup on a RPi.<br> <code class="language-plaintext highlighter-rouge">sudo apt install build-essential git</code><br> <code class="language-plaintext highlighter-rouge">bash &lt;(curl -sL https://raw.githubusercontent.com/node-red/linux-installers/master/deb/update-nodejs-and-nodered) </code><br> On Pi Node-RED works better with the Firefox or Chrome browser<br> <code class="language-plaintext highlighter-rouge">node-red-stop</code> to stop Node-RED<br> <code class="language-plaintext highlighter-rouge">node-red-start</code> to start Node-RED again<br> <code class="language-plaintext highlighter-rouge">node-red-log</code> to view the recent log output<br> <code class="language-plaintext highlighter-rouge">sudo systemctl enable nodered</code> to autostart Node-RED at every boot<br> <code class="language-plaintext highlighter-rouge">sudo systemctl disable nodered</code> to disable autostart on boot</p> <p><code class="language-plaintext highlighter-rouge">sudo reboot</code><br> To setup your node red flows go to <strong>http://hostname.local:1880</strong> (IP add = the address of RPi) on any device connected to the network.<br> For influxdb and gauges/charts options go to menu in upper right and “manage pallette” then install</p> <ul> <li>influxdb</li> <li>node red dashboard</li> </ul> <p>Dashboard<br> Once you have gauges/charts setup you can view them at <strong>http://hostname.local:1880/ui</strong></p> <h1 id="api">API</h1> <p>API (application programming interface) is a useful method for getting data from the web.<br> Documentation below is for REST API using Python requests library.<br> You pass the url link in the requests function and will get the requested data back<br> The payload (or parameters) passes criteria<br> The header can be used to pass keys</p> <p>Can use endpoint part of url to specify what resource to return. Typically found in API reference docs.<br> HTTP Method Description Method POST Create a new resource requests.post() GET Read existing resource requests.get() PUT Update existing resource requests.put() DELETE Delete existing resource requests.delete()</p> <p>Example with google translate<br> url = “https://google-translate1.p.rapidapi.com/language/translate/v2/detect”</p> <p><code class="language-plaintext highlighter-rouge">response = requests.get(url, param or payload, headers)</code></p> <p>You send the url, payload, and headers.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">requests</span>

<span class="n">payload</span> <span class="o">=</span> <span class="p">{</span> <span class="sh">"</span><span class="s">q</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">English is hard, but detectably so</span><span class="sh">"</span> <span class="p">}</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
	<span class="sh">"</span><span class="s">content-type</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">application/x-www-form-urlencoded</span><span class="sh">"</span><span class="p">,</span>
	<span class="sh">"</span><span class="s">Accept-Encoding</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">application/gzip</span><span class="sh">"</span><span class="p">,</span>
	<span class="sh">"</span><span class="s">X-RapidAPI-Key</span><span class="sh">"</span><span class="p">:</span> <span class="sh">""</span><span class="p">,</span>
	<span class="sh">"</span><span class="s">X-RapidAPI-Host</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">google-translate1.p.rapidapi.com</span><span class="sh">"</span>
<span class="p">}</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="nf">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">payload</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">).</span><span class="nf">json</span><span class="p">()</span>  
</code></pre></div></div> <p>This returned the language type of the sentence passed</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">example</span> <span class="n">response</span> <span class="o">=</span> <span class="p">{</span><span class="sh">'</span><span class="s">data</span><span class="sh">'</span><span class="p">:</span> <span class="p">{</span><span class="sh">'</span><span class="s">detections</span><span class="sh">'</span><span class="p">:</span> <span class="p">[[{</span><span class="sh">'</span><span class="s">isReliable</span><span class="sh">'</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span> <span class="sh">'</span><span class="s">language</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">en</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">confidence</span><span class="sh">'</span><span class="p">:</span> <span class="mi">1</span><span class="p">}]]}}</span>
<span class="n">langtype</span> <span class="o">=</span> <span class="n">response</span><span class="p">[</span><span class="sh">"</span><span class="s">data</span><span class="sh">"</span><span class="p">][</span><span class="sh">"</span><span class="s">detections</span><span class="sh">"</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="sh">"</span><span class="s">language</span><span class="sh">"</span><span class="p">]</span>
</code></pre></div></div> <p>Could then request translation</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">url</span> <span class="o">=</span> <span class="sh">"</span><span class="s">https://google-translate1.p.rapidapi.com/language/translate/v2</span><span class="sh">"</span>

<span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
	<span class="sh">"</span><span class="s">q</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">Hello, world!</span><span class="sh">"</span><span class="p">,</span>
	<span class="sh">"</span><span class="s">target</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">es</span><span class="sh">"</span><span class="p">,</span>
	<span class="sh">"</span><span class="s">source</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">en</span><span class="sh">"</span>
<span class="p">}</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
	<span class="sh">"</span><span class="s">content-type</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">application/x-www-form-urlencoded</span><span class="sh">"</span><span class="p">,</span>
	<span class="sh">"</span><span class="s">Accept-Encoding</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">application/gzip</span><span class="sh">"</span><span class="p">,</span>
	<span class="sh">"</span><span class="s">X-RapidAPI-Key</span><span class="sh">"</span><span class="p">:</span> <span class="sh">""</span><span class="p">,</span>
	<span class="sh">"</span><span class="s">X-RapidAPI-Host</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">google-translate1.p.rapidapi.com</span><span class="sh">"</span>
<span class="p">}</span>

<span class="c1">#response = requests.post(url, data=payload, headers=headers)
</span><span class="n">example</span> <span class="n">response</span> <span class="o">=</span> <span class="p">{</span><span class="sh">'</span><span class="s">data</span><span class="sh">'</span><span class="p">:</span> <span class="p">{</span><span class="sh">'</span><span class="s">translations</span><span class="sh">'</span><span class="p">:</span> <span class="p">[{</span><span class="sh">'</span><span class="s">translatedText</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">Hola Mundo!</span><span class="sh">'</span><span class="p">}]}}</span>
<span class="n">translation</span> <span class="o">=</span> <span class="n">response</span><span class="p">[</span><span class="sh">"</span><span class="s">data</span><span class="sh">"</span><span class="p">][</span><span class="sh">"</span><span class="s">translations</span><span class="sh">"</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="sh">"</span><span class="s">translatedText</span><span class="sh">"</span><span class="p">]</span>
<span class="nf">print</span><span class="p">(</span><span class="n">translation</span><span class="p">)</span>
</code></pre></div></div> </article> </div> </main> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2023 Sean Trautman. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="noopener noreferrer">Jekyll</a>. Hosted by <a href="https://pages.github.com/" target="_blank" rel="noopener noreferrer">GitHub Pages</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js" integrity="sha256-EdPgYcPk/IIrw7FYeuJQexva49pVRZNmt3LculEr7zM=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js"></script> <script defer src="/assets/js/common.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>