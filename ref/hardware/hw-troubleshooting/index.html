<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>hw-troubleshooting | ST</title> <meta name="author" content="Sean Trautman"/> <meta name="description" content="Intro to hw-troubleshooting"/> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"/> <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-DF7Zhf293AJxJNTmh5zhoYYIMs2oXitRfBjY+9L//AY=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"/> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha256-i1+4qU2G2860dGGIOJscdC30s9beBXjFfzjWLjBRsBg=" crossorigin="anonymous"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/native.css" media="" id="highlight_theme_light"/> <link rel="shortcut icon" href="/assets/img/st-logo-transparent.png"/> <link rel="stylesheet" href="/assets/css/main.css"> <link rel="canonical" href="https://straut12.github.io/ref/hardware/hw-troubleshooting/"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/native.css" media="none" id="highlight_theme_dark"/> <script src="/assets/js/theme.js"></script> <script src="/assets/js/dark_mode.js"></script> </head> <body class="fixed-top-nav "> <div class="site-container"> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/">ST</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/"></a> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Coding</a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item" href="/ref/coding/git/">VScode Github</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/coding/bash/">Bash Shell</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/coding/python/">Python</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/coding/js/">JavaScript</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/coding/html/">Web HTML</a> </div> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Data Analysis</a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item" href="/ref/data-analysis/data-collection/">data collection</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/data-analysis/databases/">databases</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/data-analysis/basic-charting/">basic charting</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/data-analysis/data-visualization/">data visualization</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/data-analysis/ml/">machine learning</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/data-analysis/statistics/">notes</a> </div> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Linux</a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item" href="/ref/linux/linuxdistros/">Linux Options</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/linux/desktop/">Desktop Appearance</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/linux/software/">Installing SW</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/linux/sharing/">File Sharing</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/linux/vnc-ssh/">Remote vnc ssh</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/linux/terminal/">Terminal cli</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/linux/autostart/">Autostart systemd</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/linux/logs/">Logs</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/linux/list/">List of SW to Install</a> </div> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">Repositories</a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="site-body wrapper"> <aside class="site-sidebar" id="site-sidebar"> <nav class="toc"> <header><h4 class="toc__title">Table of Contents</h4></header> <ul class="toc__menu"> <li><a href="#general">General</a></li> <li><a href="#gpio-troubleshooting">GPIO Troubleshooting</a></li> <li> <a href="#rpi-gpio">RPi GPIO</a> <ul> <li> <a href="#piscope">Piscope</a> <ul> <li><a href="#install-pigpio">Install pigpio</a></li> <li><a href="#install-piscope">Install piscope</a></li> </ul> </li> <li><a href="#nodered">NodeRed</a></li> </ul> </li> <li><a href="#esp32">ESP32</a></li> </ul> </nav> </aside> <main> <div class="post"> <p class="post-description">Intro to hw-troubleshooting</p> <article> <h1 id="general">General</h1> <p>This page currently focuses on GPIO pins. Other hardware like leds, circuits, sensors are a little more straight forward to trouble shoot. First make sure you buy two or more of each so you can swap components and by trial and error determine the faulty part. Also have a multimeter to check the voltage and/or current.</p> <h1 id="gpio-troubleshooting">GPIO Troubleshooting</h1> <p>Two common scenarios come up where a tool to test the GPIO pins is useful.</p> <ol> <li>After soldering a GPIO pin header</li> <li>When a piece of code isn’t working and you’re wondering if the pins are at fault.</li> </ol> <p>I’ve wasted time in the past trouble shooting code only to realize the GPIO pin pullup or pulldown resistor wasn’t working.</p> <p>Another benefit of going thru the process of checking the pins for hi/lo, PWM, and internal pull up/down resistor performance is that it’s a good opportunity to learn the basics of those functions.</p> <h1 id="rpi-gpio">RPi GPIO</h1> <p>Below are some tools useful in ruling out GPIO pin hardware on a RPi. First the two modes to test are input and output</p> <p><strong>Input</strong></p> <ul> <li>w/ internal pullup resistor</li> <li>w/ internal pulldown resistor</li> </ul> <p><strong>Output</strong></p> <ul> <li>Digital (hi/lo or 1/0)</li> <li>PWM</li> </ul> <h2 id="piscope">Piscope</h2> <p>The most thorough tool for checking RPi’s uses <a href="https://abyz.me.uk/rpi/pigpio/python.html" target="_blank" rel="noopener noreferrer">pigpio</a> with the <a href="https://abyz.me.uk/rpi/pigpio/piscope.html" target="_blank" rel="noopener noreferrer">piscope</a> functions. This will tests all the pins input and output.</p> <h3 id="install-pigpio">Install pigpio</h3> <p><code class="language-plaintext highlighter-rouge">$ wget https://github.com/joan2937/pigpio/archive/master.zip</code><br> <code class="language-plaintext highlighter-rouge">$ unzip master.zip</code><br> <code class="language-plaintext highlighter-rouge">$ cd pigpio-master</code><br> <code class="language-plaintext highlighter-rouge">$ make</code><br> <code class="language-plaintext highlighter-rouge">$ sudo make install</code></p> <p>Check with<br> <code class="language-plaintext highlighter-rouge">sudo ./x_pigpio</code> (check C)<br> <code class="language-plaintext highlighter-rouge">sudo pigpiod</code> to start daemon <code class="language-plaintext highlighter-rouge">$ sudo killall pigpiod</code> to kill daemon<br> <code class="language-plaintext highlighter-rouge">./x_pigpio.py</code> (check python)</p> <h3 id="install-piscope">Install piscope</h3> <p><code class="language-plaintext highlighter-rouge">$ wget abyz.me.uk/rpi/pigpio/piscope.tar</code><br> <code class="language-plaintext highlighter-rouge">$ tar xvf piscope.tar</code><br> <code class="language-plaintext highlighter-rouge">$ cd PISCOPE</code><br> <code class="language-plaintext highlighter-rouge">$ make hf</code><br> <code class="language-plaintext highlighter-rouge">$ make install</code></p> <p>Run with commands below (pigpiod daemon needs to be running)<br> On Pi: <code class="language-plaintext highlighter-rouge">$ piscope &amp;</code></p> <p>Remote ssh<br> <code class="language-plaintext highlighter-rouge">$ ssh -X pi@ipaddress</code><br> <code class="language-plaintext highlighter-rouge">$ piscope &amp;</code></p> <p>Processing on remote Linux PC<br> <code class="language-plaintext highlighter-rouge">$ export PIGPIO_ADDR='pi@ipaddress'</code><br> <code class="language-plaintext highlighter-rouge">$ piscope &amp;</code></p> <p>To start a pwm signal on a pin<br> <code class="language-plaintext highlighter-rouge">$ pigs p 22 64</code> (will start a PWM, 25% dutycycle, on GPIO pin 22)<br> <code class="language-plaintext highlighter-rouge">$ pigs p 22 0</code> (stop the PWM)</p> <p>To test all GPIO pins<br> Download gpiotest<br> Then run with <code class="language-plaintext highlighter-rouge">$ ./gpiotest</code></p> <p>Example results</p> <div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">Pull up on gpio 4 failed.
Pull up on gpio 22 failed.
Pull down on gpio 23 failed.
Tested user gpios: 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 ​
Failed user gpios: 4 22 23
</span></code></pre></div></div> <p>Can compare good vs bad results on pin 4 on two different RPis. You see the red highlighted one on pin4 failed to go high or pull down/up. The green/good example on another pi shows pin 4 went high and passed the pulldown test.<br> Then used a multi-meter to measure voltage in all 4 modes. Pins with bad pullup/pulldown internal resistors did not go to the intended 0 or 3.3V. GPIO 24 is a good pin for comparison.</p> <div class="row"> <div class="col-xlg-auto mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/hardware/pigpio2.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-auto mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/hardware/pigpio1.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="row"> <div class="col-md mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/hardware/pigpio3.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <h2 id="nodered">NodeRed</h2> <p>Node Red RPi functions are another quick way to test the different modes. It is not as thorough but quicker.</p> <ul> <li>​For output you can check hi/lo or PWM (use an o-scope to see results)</li> <li>For input you can toggle between pulldown and pullup resistor to confirm it moves from 0-3.3V. Can use a multimeter or led to see the result. <ul> <li>You inject an input like 1(hi) or 0(lo) with a multimeter or led connected to the pin to watch its response.</li> </ul> </li> </ul> <div class="row"> <div class="col-md mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/hardware/nodered.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p>​Node Red code below is for importing into node red</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[{</span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"706510fe.1755a"</span><span class="p">,</span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"tab"</span><span class="p">,</span><span class="nl">"label"</span><span class="p">:</span><span class="s2">"Flow 1"</span><span class="p">,</span><span class="nl">"disabled"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="nl">"info"</span><span class="p">:</span><span class="s2">""</span><span class="p">},{</span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"47f6d9a9.6d86c8"</span><span class="p">,</span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"group"</span><span class="p">,</span><span class="nl">"z"</span><span class="p">:</span><span class="s2">"706510fe.1755a"</span><span class="p">,</span><span class="nl">"name"</span><span class="p">:</span><span class="s2">"OUTPUT - PWM"</span><span class="p">,</span><span class="nl">"style"</span><span class="p">:{</span><span class="nl">"label"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="nl">"fill"</span><span class="p">:</span><span class="s2">"#addb7b"</span><span class="p">},</span><span class="nl">"nodes"</span><span class="p">:[</span><span class="s2">"ac9df3b9.6814a"</span><span class="p">,</span><span class="s2">"95f23903.8359d8"</span><span class="p">,</span><span class="s2">"ea6f64c4.58dc18"</span><span class="p">],</span><span class="nl">"x"</span><span class="p">:</span><span class="mi">654</span><span class="p">,</span><span class="nl">"y"</span><span class="p">:</span><span class="mi">139</span><span class="p">,</span><span class="nl">"w"</span><span class="p">:</span><span class="mi">312</span><span class="p">,</span><span class="nl">"h"</span><span class="p">:</span><span class="mi">122</span><span class="p">},{</span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"a65846a0.950598"</span><span class="p">,</span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"group"</span><span class="p">,</span><span class="nl">"z"</span><span class="p">:</span><span class="s2">"706510fe.1755a"</span><span class="p">,</span><span class="nl">"name"</span><span class="p">:</span><span class="s2">"OUTPUT-DIGITIAL (0/1)"</span><span class="p">,</span><span class="nl">"style"</span><span class="p">:{</span><span class="nl">"label"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="nl">"fill"</span><span class="p">:</span><span class="s2">"#c8e7a7"</span><span class="p">},</span><span class="nl">"nodes"</span><span class="p">:[</span><span class="s2">"3d763c68.d3c4c4"</span><span class="p">,</span><span class="s2">"daacaf30.bc261"</span><span class="p">,</span><span class="s2">"bf6bc9a6.43e5b8"</span><span class="p">],</span><span class="nl">"x"</span><span class="p">:</span><span class="mi">334</span><span class="p">,</span><span class="nl">"y"</span><span class="p">:</span><span class="mi">139</span><span class="p">,</span><span class="nl">"w"</span><span class="p">:</span><span class="mi">292</span><span class="p">,</span><span class="nl">"h"</span><span class="p">:</span><span class="mi">122</span><span class="p">},{</span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"ae60ca9f.edea08"</span><span class="p">,</span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"group"</span><span class="p">,</span><span class="nl">"z"</span><span class="p">:</span><span class="s2">"706510fe.1755a"</span><span class="p">,</span><span class="nl">"name"</span><span class="p">:</span><span class="s2">"INPUT (PULLUP/PULLDOWN)"</span><span class="p">,</span><span class="nl">"style"</span><span class="p">:{</span><span class="nl">"label"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="nl">"fill"</span><span class="p">:</span><span class="s2">"#ffff7f"</span><span class="p">},</span><span class="nl">"nodes"</span><span class="p">:[</span><span class="s2">"71d1e9d1.027e38"</span><span class="p">,</span><span class="s2">"63e531c7.f632"</span><span class="p">],</span><span class="nl">"x"</span><span class="p">:</span><span class="mi">494</span><span class="p">,</span><span class="nl">"y"</span><span class="p">:</span><span class="mi">299</span><span class="p">,</span><span class="nl">"w"</span><span class="p">:</span><span class="mi">352</span><span class="p">,</span><span class="nl">"h"</span><span class="p">:</span><span class="mi">82</span><span class="p">},{</span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"3d763c68.d3c4c4"</span><span class="p">,</span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"rpi-gpio out"</span><span class="p">,</span><span class="nl">"z"</span><span class="p">:</span><span class="s2">"706510fe.1755a"</span><span class="p">,</span><span class="nl">"g"</span><span class="p">:</span><span class="s2">"a65846a0.950598"</span><span class="p">,</span><span class="nl">"name"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="nl">"pin"</span><span class="p">:</span><span class="s2">"7"</span><span class="p">,</span><span class="nl">"set"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="nl">"level"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="nl">"freq"</span><span class="p">:</span><span class="s2">"50"</span><span class="p">,</span><span class="nl">"out"</span><span class="p">:</span><span class="s2">"out"</span><span class="p">,</span><span class="nl">"x"</span><span class="p">:</span><span class="mi">550</span><span class="p">,</span><span class="nl">"y"</span><span class="p">:</span><span class="mi">200</span><span class="p">,</span><span class="nl">"wires"</span><span class="p">:[]},{</span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"daacaf30.bc261"</span><span class="p">,</span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"inject"</span><span class="p">,</span><span class="nl">"z"</span><span class="p">:</span><span class="s2">"706510fe.1755a"</span><span class="p">,</span><span class="nl">"g"</span><span class="p">:</span><span class="s2">"a65846a0.950598"</span><span class="p">,</span><span class="nl">"name"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="nl">"props"</span><span class="p">:[{</span><span class="nl">"p"</span><span class="p">:</span><span class="s2">"payload"</span><span class="p">},{</span><span class="nl">"p"</span><span class="p">:</span><span class="s2">"topic"</span><span class="p">,</span><span class="nl">"vt"</span><span class="p">:</span><span class="s2">"str"</span><span class="p">}],</span><span class="nl">"repeat"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="nl">"crontab"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="nl">"once"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="nl">"onceDelay"</span><span class="p">:</span><span class="mf">0.1</span><span class="p">,</span><span class="nl">"topic"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="nl">"payload"</span><span class="p">:</span><span class="s2">"1"</span><span class="p">,</span><span class="nl">"payloadType"</span><span class="p">:</span><span class="s2">"num"</span><span class="p">,</span><span class="nl">"x"</span><span class="p">:</span><span class="mi">430</span><span class="p">,</span><span class="nl">"y"</span><span class="p">:</span><span class="mi">180</span><span class="p">,</span><span class="nl">"wires"</span><span class="p">:[[</span><span class="s2">"3d763c68.d3c4c4"</span><span class="p">]]},{</span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"bf6bc9a6.43e5b8"</span><span class="p">,</span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"inject"</span><span class="p">,</span><span class="nl">"z"</span><span class="p">:</span><span class="s2">"706510fe.1755a"</span><span class="p">,</span><span class="nl">"g"</span><span class="p">:</span><span class="s2">"a65846a0.950598"</span><span class="p">,</span><span class="nl">"name"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="nl">"props"</span><span class="p">:[{</span><span class="nl">"p"</span><span class="p">:</span><span class="s2">"payload"</span><span class="p">},{</span><span class="nl">"p"</span><span class="p">:</span><span class="s2">"topic"</span><span class="p">,</span><span class="nl">"vt"</span><span class="p">:</span><span class="s2">"str"</span><span class="p">}],</span><span class="nl">"repeat"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="nl">"crontab"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="nl">"once"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="nl">"onceDelay"</span><span class="p">:</span><span class="mf">0.1</span><span class="p">,</span><span class="nl">"topic"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="nl">"payload"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="nl">"payloadType"</span><span class="p">:</span><span class="s2">"num"</span><span class="p">,</span><span class="nl">"x"</span><span class="p">:</span><span class="mi">430</span><span class="p">,</span><span class="nl">"y"</span><span class="p">:</span><span class="mi">220</span><span class="p">,</span><span class="nl">"wires"</span><span class="p">:[[</span><span class="s2">"3d763c68.d3c4c4"</span><span class="p">]]},{</span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"ac9df3b9.6814a"</span><span class="p">,</span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"inject"</span><span class="p">,</span><span class="nl">"z"</span><span class="p">:</span><span class="s2">"706510fe.1755a"</span><span class="p">,</span><span class="nl">"g"</span><span class="p">:</span><span class="s2">"47f6d9a9.6d86c8"</span><span class="p">,</span><span class="nl">"name"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="nl">"props"</span><span class="p">:[{</span><span class="nl">"p"</span><span class="p">:</span><span class="s2">"payload"</span><span class="p">},{</span><span class="nl">"p"</span><span class="p">:</span><span class="s2">"topic"</span><span class="p">,</span><span class="nl">"vt"</span><span class="p">:</span><span class="s2">"str"</span><span class="p">}],</span><span class="nl">"repeat"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="nl">"crontab"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="nl">"once"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="nl">"onceDelay"</span><span class="p">:</span><span class="mf">0.1</span><span class="p">,</span><span class="nl">"topic"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="nl">"payload"</span><span class="p">:</span><span class="s2">"20"</span><span class="p">,</span><span class="nl">"payloadType"</span><span class="p">:</span><span class="s2">"num"</span><span class="p">,</span><span class="nl">"x"</span><span class="p">:</span><span class="mi">750</span><span class="p">,</span><span class="nl">"y"</span><span class="p">:</span><span class="mi">180</span><span class="p">,</span><span class="nl">"wires"</span><span class="p">:[[</span><span class="s2">"ea6f64c4.58dc18"</span><span class="p">]]},{</span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"71d1e9d1.027e38"</span><span class="p">,</span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"rpi-gpio in"</span><span class="p">,</span><span class="nl">"z"</span><span class="p">:</span><span class="s2">"706510fe.1755a"</span><span class="p">,</span><span class="nl">"g"</span><span class="p">:</span><span class="s2">"ae60ca9f.edea08"</span><span class="p">,</span><span class="nl">"name"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="nl">"pin"</span><span class="p">:</span><span class="s2">"16"</span><span class="p">,</span><span class="nl">"intype"</span><span class="p">:</span><span class="s2">"down"</span><span class="p">,</span><span class="nl">"debounce"</span><span class="p">:</span><span class="s2">"25"</span><span class="p">,</span><span class="nl">"read"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="nl">"x"</span><span class="p">:</span><span class="mi">580</span><span class="p">,</span><span class="nl">"y"</span><span class="p">:</span><span class="mi">340</span><span class="p">,</span><span class="nl">"wires"</span><span class="p">:[[</span><span class="s2">"63e531c7.f632"</span><span class="p">]]},{</span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"63e531c7.f632"</span><span class="p">,</span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"debug"</span><span class="p">,</span><span class="nl">"z"</span><span class="p">:</span><span class="s2">"706510fe.1755a"</span><span class="p">,</span><span class="nl">"g"</span><span class="p">:</span><span class="s2">"ae60ca9f.edea08"</span><span class="p">,</span><span class="nl">"name"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="nl">"active"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="nl">"tosidebar"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="nl">"console"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="nl">"tostatus"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="nl">"complete"</span><span class="p">:</span><span class="s2">"false"</span><span class="p">,</span><span class="nl">"statusVal"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="nl">"statusType"</span><span class="p">:</span><span class="s2">"auto"</span><span class="p">,</span><span class="nl">"x"</span><span class="p">:</span><span class="mi">730</span><span class="p">,</span><span class="nl">"y"</span><span class="p">:</span><span class="mi">340</span><span class="p">,</span><span class="nl">"wires"</span><span class="p">:[]},{</span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"95f23903.8359d8"</span><span class="p">,</span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"inject"</span><span class="p">,</span><span class="nl">"z"</span><span class="p">:</span><span class="s2">"706510fe.1755a"</span><span class="p">,</span><span class="nl">"g"</span><span class="p">:</span><span class="s2">"47f6d9a9.6d86c8"</span><span class="p">,</span><span class="nl">"name"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="nl">"props"</span><span class="p">:[{</span><span class="nl">"p"</span><span class="p">:</span><span class="s2">"payload"</span><span class="p">},{</span><span class="nl">"p"</span><span class="p">:</span><span class="s2">"topic"</span><span class="p">,</span><span class="nl">"vt"</span><span class="p">:</span><span class="s2">"str"</span><span class="p">}],</span><span class="nl">"repeat"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="nl">"crontab"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="nl">"once"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="nl">"onceDelay"</span><span class="p">:</span><span class="mf">0.1</span><span class="p">,</span><span class="nl">"topic"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="nl">"payload"</span><span class="p">:</span><span class="s2">"10"</span><span class="p">,</span><span class="nl">"payloadType"</span><span class="p">:</span><span class="s2">"num"</span><span class="p">,</span><span class="nl">"x"</span><span class="p">:</span><span class="mi">750</span><span class="p">,</span><span class="nl">"y"</span><span class="p">:</span><span class="mi">220</span><span class="p">,</span><span class="nl">"wires"</span><span class="p">:[[</span><span class="s2">"ea6f64c4.58dc18"</span><span class="p">]]},{</span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"ea6f64c4.58dc18"</span><span class="p">,</span><span class="nl">"type"</span><span class="p">:</span><span class="s2">"rpi-gpio out"</span><span class="p">,</span><span class="nl">"z"</span><span class="p">:</span><span class="s2">"706510fe.1755a"</span><span class="p">,</span><span class="nl">"g"</span><span class="p">:</span><span class="s2">"47f6d9a9.6d86c8"</span><span class="p">,</span><span class="nl">"name"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="nl">"pin"</span><span class="p">:</span><span class="s2">"15"</span><span class="p">,</span><span class="nl">"set"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="nl">"level"</span><span class="p">:</span><span class="s2">"0"</span><span class="p">,</span><span class="nl">"freq"</span><span class="p">:</span><span class="s2">"50"</span><span class="p">,</span><span class="nl">"out"</span><span class="p">:</span><span class="s2">"pwm"</span><span class="p">,</span><span class="nl">"x"</span><span class="p">:</span><span class="mi">880</span><span class="p">,</span><span class="nl">"y"</span><span class="p">:</span><span class="mi">200</span><span class="p">,</span><span class="nl">"wires"</span><span class="p">:[]}]</span><span class="w">
</span></code></pre></div></div> <h1 id="esp32">ESP32</h1> <p>For the esp32 you’ll need a quick micropython script that test the different modes of the pin. It’s a fairly manual test. You have a few options for measuring the voltage</p> <ol> <li>External multi-meter and write down the result</li> <li>External o-scope and write down the result</li> <li>Or esp32 pins on the esp32 itself to measure the voltage and PWM (ie pins 34 and 15 below)</li> </ol> <p>Input/Output check</p> <ul> <li>Check input voltage with internal up/down resistors using one of options above</li> <li>Check input reading with PWM frequency (will need a PWM frequency meter like XY-PWM or use one of the pins to create a PWM signal).</li> <li>Check output voltage at both hi/lo state.</li> <li>Check output PWM (will need an o-scope or use one the pins to measure the PWM signal)</li> </ul> <p>I wrote a <a href="https://github.com/stemjust4u/hardware-troubleshooting/tree/main/upython" target="_blank" rel="noopener noreferrer">script</a> to check the esp32 pins using the on-board ADC/PWM. I use pin 34 for ADC and pin 15 for PWM (but you can change it in the code). It’s located on github.</p> <p>After each test there is a pause to move either the ADC or PWM lead to the next GPIO pin to be tested. I keep the final results file in my project folder so I can quickly reference which pins on which esp32 device should not be used.</p> <p><strong>Note</strong> - reading the pins, especially at higher frequencies, is less accurate than creating a PWM signal.</p> <p>Below are example results for the I/O portion</p> <div class="row"> <div class="col-md mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/hardware/esp32hw.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="row"> <div class="col-md mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/hardware/esp32hw1.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <hr> <hr> </article> </div> </main> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2023 Sean Trautman. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="noopener noreferrer">Jekyll</a>. Hosted by <a href="https://pages.github.com/" target="_blank" rel="noopener noreferrer">GitHub Pages</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js" integrity="sha256-EdPgYcPk/IIrw7FYeuJQexva49pVRZNmt3LculEr7zM=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js"></script> <script defer src="/assets/js/common.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>