<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>esp32 | ST</title> <meta name="author" content="Sean Trautman"/> <meta name="description" content="Intro to esp32"/> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"/> <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-DF7Zhf293AJxJNTmh5zhoYYIMs2oXitRfBjY+9L//AY=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"/> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha256-i1+4qU2G2860dGGIOJscdC30s9beBXjFfzjWLjBRsBg=" crossorigin="anonymous"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/native.css" media="" id="highlight_theme_light"/> <link rel="shortcut icon" href="/assets/img/st-logo-transparent.png"/> <link rel="stylesheet" href="/assets/css/main.css"> <link rel="canonical" href="https://straut12.github.io/ref/hardware/esp32/"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/native.css" media="none" id="highlight_theme_dark"/> <script src="/assets/js/theme.js"></script> <script src="/assets/js/dark_mode.js"></script> </head> <body class="fixed-top-nav "> <div class="site-container"> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/">ST</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/"></a> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Coding</a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item" href="/ref/coding/git/">VScode Github</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/coding/bash/">Bash Shell</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/coding/python/">Python</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/coding/js/">JavaScript</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/coding/html/">Web HTML</a> </div> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Data Analysis</a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item" href="/ref/data-analysis/data-collection/">data collection</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/data-analysis/databases/">databases</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/data-analysis/basic-charting/">basic charting</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/data-analysis/data-visualization/">data visualization</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/data-analysis/ml/">machine learning</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/data-analysis/statistics/">notes</a> </div> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Linux</a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item" href="/ref/linux/linuxdistros/">Linux Options</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/linux/desktop/">Desktop Appearance</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/linux/software/">Installing SW</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/linux/sharing/">File Sharing</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/linux/vnc-ssh/">Remote vnc ssh</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/linux/terminal/">Terminal cli</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/linux/autostart/">Autostart systemd</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/linux/logs/">Logs</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/linux/list/">List of SW to Install</a> </div> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">Repositories</a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="site-body wrapper"> <aside class="site-sidebar" id="site-sidebar"> <nav class="toc"> <header><h4 class="toc__title">Table of Contents</h4></header> <ul class="toc__menu"> <li><a href="#esp32">ESP32</a></li> <li><a href="#compared-to-rpi">Compared to RPi</a></li> <li><a href="#download-micropython-firmware">Download microPython Firmware</a></li> <li><a href="#programming-the-esp">Programming the esp</a></li> <li> <a href="#option-1-thonny-ide">Option 1 Thonny IDE</a> <ul> <li><a href="#additional-steps-for-non-rpi-os">Additional steps for non-RPi OS</a></li> <li><a href="#install-on-rpi-os-lite">Install on RPi OS lite</a></li> <li><a href="#install-esptool-and-upython-firmware">Install esptool and upython firmware</a></li> </ul> </li> <li> <a href="#option-2-vscode-pymakr">Option 2 VScode-Pymakr</a> <ul> <li><a href="#install-esptool">Install esptool</a></li> <li><a href="#install-mpython-firmware">Install mPython Firmware</a></li> </ul> </li> <li><a href="#pymakr-setup">Pymakr Setup</a></li> <li><a href="#helpful-commands">Helpful Commands</a></li> </ul> </nav> </aside> <main> <div class="post"> <p class="post-description">Intro to esp32</p> <article> <h1 id="esp32">ESP32</h1> <p><a href="https://www.espressif.com/en/products/socs/esp32" target="_blank" rel="noopener noreferrer">Espressif</a> microcontrollers (esp32 and esp8266) are great when you need a very low power, simple solution for reading either digital or analog input and/or turning an external device on/off. They have built-in wifi/bluetooth, very low power usage (&lt; 0.1W), and can be programmed with MicroPython (or Arduino). I use the ESP32 most since it has multiple 12 bit ADC pins while the ESP8266 only has a single 10 bit ADC. They can be easily programmed with Arduino (C/C++) or microPython. My preferred language is <a href="https://micropython.org/" target="_blank" rel="noopener noreferrer">microPython</a> since it allows similar code to be copied between a Raspberry Pi and ESP32. However, it is a little slower when running microPython vs C++. For most of my projects it is not noticeable and the convenience of microPython is worth it. (Stepper motor project is one scenario where C++ may be a better option)</p> <p>Most my projects will have a esp32/MicroPython (I use μpython for shorthand) option along with the RPi/Python code. uPython includes a small subset of Python libraries to make beginner projects easier. For more advanced projects some adjustments to the code will be needed. See <a href="../../../ref/morecoding/python-vs-micropython/">python vs upython section</a>. At minimum you will have a boot.py and main.py that run when the esp is powered. But you still have the ability to write packages/modules, store them on the esp in a /lib folder, and then import them into your main.py (ie you can create adc, motor, servo modules and import them for use in main)</p> <div class="row"> <div class="col-8 mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/hardware/esp32.jpg" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <hr> <h1 id="compared-to-rpi">Compared to RPi</h1> <p>The ESP32/ESP8266 differ from the Raspberry Pi in a couple ways.​</p> <ul> <li>It has no O/S. Instead the bootloader allows you to load your micropython program to the ESPxx where it will keep running as long as the ESPxx has power.</li> <li>At minimum you will have a boot.py and main.py. Both get loaded when the esp is powered. The boot typically has minimal code to finish the boot process. But the variables defined in boot are accessible in main.</li> <li>ESPxx also have analog in pins (ADC) for directly measuring voltage vs a digital, binary signal (lo/hi or 0V-3.3V). You do not need an external ADC like the Pi requires. When using a pin as an input always confirm you are not exceeding it’s voltage range (esp32/Rpi is 3.3V max, esp8266 analog is 1V). If your input is greater than this you need a voltage divider (logic converter if going from 5V-3.3V)</li> </ul> <hr> <h1 id="download-micropython-firmware">Download microPython Firmware</h1> <ul> <li>First download the micropython firmware .bin file from <a href="https://micropython.org/download/" target="_blank" rel="noopener noreferrer">https://micropython.org/download/</a> </li> <li>Select the Espressif board you’re using. Then the latest, stable GENERIC .bin file. (SPIRAM version is if you need access to extra memory).</li> </ul> <blockquote> <p>Make sure your micro USB cable has data lines. Many thinner cables are charge only. I use a <a href="https://www.amazon.com/s?k=micro+usb+to+DIP&amp;ref=nb_sb_noss_2" target="_blank" rel="noopener noreferrer">micro USB to DIP</a> and <a href="https://www.amazon.com/s?k=female+usb+solder+jack+connector&amp;ref=nb_sb_noss_2" target="_blank" rel="noopener noreferrer">USB solder socket connector</a> to check continuity on the D+/D- pins.</p> </blockquote> <h1 id="programming-the-esp">Programming the esp</h1> <p>Next steps covers 2 options for installing the upython firmware on your board and programming it using an IDE.</p> <hr> <h1 id="option-1-thonny-ide">Option 1 Thonny IDE</h1> <p><a href="https://thonny.org/" target="_blank" rel="noopener noreferrer">Thonny</a> has been the easiest to setup (comes installed on RPi) and a reliable IDE with an easy connection to ESP32. I’ve had the best luck with the most recent version of Thonny 3.3.3+ (default on 32bit RPi OS). The older version I have problems connecting to esp32 sometimes. I noticed 64bit Ubuntu installed 3.3.4. So depending on your system this has what worked for me.</p> <p>NOTE - RPi OS (32bit) Thonny comes installed as 3.3.3+ and extra steps not needed. If using RPi OS skip to installing esptool/firmware below.​</p> <h2 id="additional-steps-for-non-rpi-os">Additional steps for non-RPi OS</h2> <ul> <li>Install Tkinter dependency <code class="language-plaintext highlighter-rouge">$ sudo apt install python3-tk</code> </li> <li>Ubuntu (64bit)I first tried <code class="language-plaintext highlighter-rouge">$ sudo pip3 install thonny</code> But did not work completely. Then tried <code class="language-plaintext highlighter-rouge">$ sudo apt install thonny</code> and had 3.3.4</li> <li>Another option is try <code class="language-plaintext highlighter-rouge">$ bash &lt;(wget -O - https://thonny.org/installer-for-linux)</code> </li> <li>On non-RaspberryPi OS install you will likely need to add your user to the dialout group to have access to the serial port (USB) for programming the esp. But you can hold off and see if you get the error later. Otherwise use <code class="language-plaintext highlighter-rouge">$ sudo usermod -a -G dialout $USER</code> to add your use.</li> </ul> <h2 id="install-on-rpi-os-lite">Install on RPi OS lite</h2> <p>(Thonny not pre installed) Can install with <code class="language-plaintext highlighter-rouge">$ sudo apt install thonny</code>, check <code class="language-plaintext highlighter-rouge">$ thonny --version</code> and make sure 3.3.3+</p> <h2 id="install-esptool-and-upython-firmware">Install esptool and upython firmware</h2> <ul> <li>Once installed open Thonny and Install the <strong>esptool</strong> package under under <strong>Tools/Manage plug-ins</strong>.</li> <li>Then go to Tools/Options/Interpreter and you can select the ESP32/ESP8266 option.</li> <li>On the same page you can select the option to <strong>Install or update firmware</strong> using the .bin file you downloaded.</li> <li>You can confirm the port by plugging/unplugging the ESP32 and hitting reload. Or <code class="language-plaintext highlighter-rouge">$ ls /dev/tty*</code> showed CP2102 USB to serial converter.</li> <li>Select <strong>Install</strong> ​​ ​Once upython is installed you can select the <strong>interpreter</strong> under <strong>Run for esp32</strong>. <br> Also use Stop/Restart backend, ctrl-C, Ctrl-D to alternate between programming (should see the command line »&gt;) or to run the program. You can not program it while it is running.</li> </ul> <p>Thonny has a nice file manager system to easily create directories on the esp32 and download/upload between your local Pi/PC.</p> <div class="row"> <div class="col-md mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/hardware/thonny.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <hr> <h1 id="option-2-vscode-pymakr">Option 2 VScode-Pymakr</h1> <p>Another option that has the advantage of working with VScode is Pymakr. But there are more steps to setup. I would start with Thonny/RPi and move to Pymakr only if you have started using VScode and familiar with extensions (or if you do not have a Pi).</p> <h2 id="install-esptool">Install esptool</h2> <ul> <li>Connect the esp32 to the USB port and confirm you have access to the tty ports.</li> <li>Install esptool <code class="language-plaintext highlighter-rouge">$ python3 -m pip install esptool</code> </li> <li>Check access with <code class="language-plaintext highlighter-rouge">$ esptool.py read_mac</code> </li> <li>If you get ‘access denied’ then try adding your user to the dialout group. Your user needs to be in the dialout group for access to serial ports.</li> <li> <code class="language-plaintext highlighter-rouge">$ groups</code>(will show you what groups your user id is in)</li> <li>To add your user - Use the usermod command with -a (add) and -G (groups) on dialout</li> <li><code class="language-plaintext highlighter-rouge">$ sudo usermod -a -G dialout $USER</code></li> <li>Then completely logout and log back in</li> <li>Check access with <code class="language-plaintext highlighter-rouge">$ esptool.py read_mac</code> </li> <li>If still having problems here are some extra checks from github</li> <li>Add your user to the tty group with usermod command</li> <li>Change ownership of ttyUSB0 with chown</li> <li><code class="language-plaintext highlighter-rouge">$ sudo su</code></li> <li><code class="language-plaintext highlighter-rouge">$ cd /dev/</code></li> <li> <code class="language-plaintext highlighter-rouge">$ chown $USER ttyUSB0</code> ​ <h2 id="install-mpython-firmware">Install mPython Firmware</h2> <p>Once access to the esp32 is confirmed with esptool.py install the micropython firmware (.bin). For esp32 can use these commands from upython.org to first erase the flash and then program the firmware. (replace esp32xx.bin with the .bin file you downloaded)</p> </li> <li>esp32 -&gt; <code class="language-plaintext highlighter-rouge">$ esptool.py --chip esp32 --port /dev/ttyUSB0 erase_flash</code> </li> <li>esp32 -&gt; <code class="language-plaintext highlighter-rouge">$ esptool.py --chip esp32 --port /dev/ttyUSB0 --baud 460800 write_flash -z 0x1000 esp32xx.bin</code> ​​</li> <li>esp8266 -&gt; <code class="language-plaintext highlighter-rouge">$ esptool.py --port /dev/ttyUSB0 erase_flash</code> </li> <li>esp8266 -&gt; <code class="language-plaintext highlighter-rouge">$ esptool.py --port /dev/ttyUSB0 --baud 460800 write_flash --flash_size=detect 0 esp8266</code> </li> </ul> <h1 id="pymakr-setup">Pymakr Setup</h1> <p>Setup Pymakr for coding</p> <ul> <li>Identify the manufacturer of the esp board (will be needed later in Pymakr)</li> <li>In windows look at the manufacturer description in device manager</li> <li>In linux type <code class="language-plaintext highlighter-rouge">$ lsusb</code> </li> <li>To confirm the port (in linux) can type <code class="language-plaintext highlighter-rouge">$ ls /dev/ttyUSB*</code> (plug/unplug to see what is added)</li> <li>​Install <a href="../../../ref/system-setup//">VScode and node.js</a> </li> <li>Inside VScode install the Pymakr extension</li> <li>Open global config file <strong>pymakr.json</strong> (can use All Commands at bottom to find Global Setting)</li> <li>For auto detect blank the address (“address”: “”) and confirm “auto_connect”: true,</li> <li>Under “autoconnect_comport_manufacturers” enter the manufacturer from earlier steps (Unknown manufacturer listed at bottom)</li> <li>Example of mine <div class="language-console highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="go">"autoconnect_comport_manufacturers": [
"Silicon Labs",
"Pycom",
"Pycom Ltd.",
"FTDI",
"Microsoft",
"Microchip Technology, Inc.",
"Prolific Technology Inc.",
"Cygnal Integrated Products, Inc.",
"Unknown manufacturer"
]
</span></code></pre></div> </div> </li> <li> <p>sync_file_types will have files that can sync to your device</p> </li> <li>Restart VScode</li> <li>My pymakr continued to show ‘Connecting to /dev/ttyUSB0…’ and was running the code pre-existing on the esp32. But the Pymakr Console option in the bottom menu updated with a check mark. At this point I could do Ctrl-C to get to a upython prompt »&gt;</li> <li>You’ll want to be in a local folder to upload/download code between the esp32 and your PC.</li> </ul> <p>A great resource is at <a href="https://randomnerdtutorials.com/" target="_blank" rel="noopener noreferrer">randomnerdtutorials</a></p> <hr> <h1 id="helpful-commands">Helpful Commands</h1> <p>Some Helpful Commands To get basic information on esp device. From a command line on the Pi it is connected to. <code class="language-plaintext highlighter-rouge">$ esptool.py read_mac</code></p> <p>If using Thonny - Under “View” turn on “Plotter” and “Files” so you can see the files on your PC vs the files on your ESP32. You should see a “boot.py” on the MicroPython device. You can use the Thonny menu items on the esp32 directory menu to upload/download files between your Pi and the esp32. You can also check storage space on the esp32.</p> <p>Other method for listing files, change directories, etc. using uos library. Can also be incorporated in your code. Use single quotes ‘name’</p> <div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">&gt;</span><span class="o">&gt;&gt;</span> import uos
<span class="gp">&gt;</span><span class="o">&gt;&gt;</span> uos.uname<span class="o">()</span>
<span class="gp">&gt;</span><span class="o">&gt;&gt;</span> uos.listdir<span class="o">()</span>
<span class="gp">&gt;</span><span class="o">&gt;&gt;</span> uos.chdir<span class="o">(</span><span class="s1">'/dirname'</span><span class="o">)</span>
<span class="gp">&gt;</span><span class="o">&gt;&gt;</span> uos.getcwd<span class="o">()</span>
<span class="gp">&gt;</span><span class="o">&gt;&gt;</span> uos.mkdir<span class="o">(</span><span class="s1">'/lib'</span><span class="o">)</span>
<span class="gp">&gt;</span><span class="o">&gt;&gt;</span> uos.rmdir<span class="o">(</span><span class="s1">'/test'</span><span class="o">)</span>
<span class="gp">&gt;</span><span class="o">&gt;&gt;</span> uos.rename<span class="o">(</span>from, to<span class="o">)</span>
</code></pre></div></div> <p>To check free memory, RAM (gc - garbage collector). RAM is used for running the program (variables, wifi, TCP/IP). ESP8266 will be a little over 30k and ESP32 around 110k. You can do things like using integers instead of float to save memory. But for smaller projects with the ESPxx boards I have not had issues running out of memory.</p> <div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">&gt;</span><span class="o">&gt;&gt;</span> import gc
<span class="gp">&gt;</span><span class="o">&gt;&gt;</span> gc.collect<span class="o">()</span>
<span class="gp">&gt;</span><span class="o">&gt;&gt;</span> gc.mem_free<span class="o">()</span>
</code></pre></div></div> <p>​105900 bytes (~106Kb) or</p> <div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">&gt;</span><span class="o">&gt;&gt;</span><span class="nv">baseline</span><span class="o">=</span>gc.mem_alloc<span class="o">()</span>
<span class="gp">&gt;</span><span class="o">&gt;&gt;</span>gc.collect<span class="o">()</span><span class="p">;</span>print<span class="o">(</span><span class="s1">'\n\nUsed RAM:{:&gt;6} Free Ram:{:&gt;6} Net used:{:&gt;6}'</span>.format<span class="o">(</span>gc.mem_alloc<span class="o">()</span>,gc.mem_free<span class="o">()</span>,gc.mem_alloc<span class="o">()</span><span class="nt">-baseline</span><span class="o">))</span><span class="p">;</span>gc.collect<span class="o">()</span>
</code></pre></div></div> <p>Flash memory for storing micropython and your .py files is separate and will be in the MB range</p> <p>Q​uick program to make the ESP32 onboard LED blink</p> <ul> <li>Create main.py program</li> <li> <strong>Save As</strong>, Select <strong>MicroPython device</strong> and name it main.py</li> <li>Now you should have <strong>boot.py</strong> and <strong>main.py</strong> on the MicroPython device folder</li> <li>Run main.py</li> </ul> <p><strong>main.py</strong></p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">machine</span> <span class="kn">import</span> <span class="n">Pin</span>
<span class="kn">from</span> <span class="n">time</span> <span class="kn">import</span> <span class="n">sleep</span>

<span class="n">led2</span> <span class="o">=</span> <span class="nc">Pin</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">Pin</span><span class="p">.</span><span class="n">OUT</span><span class="p">)</span> <span class="c1">#2 is the internal LED
</span>
<span class="n">led2</span><span class="p">.</span><span class="nf">value</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>


<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="n">led2</span><span class="p">.</span><span class="nf">value</span><span class="p">(</span><span class="ow">not</span> <span class="n">led2</span><span class="p">.</span><span class="nf">value</span><span class="p">())</span>
    <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">led2</span><span class="sh">"</span><span class="p">,</span> <span class="n">led2</span><span class="p">.</span><span class="nf">value</span><span class="p">())</span>
    <span class="nf">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
</code></pre></div></div> <div class="row float-right"> <div class="col-md mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/hardware/thonny1.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p>Thonny has a plotter that will also plot the 0, 1 from the print statement. (You can print multiple variables on a single print line)</p> <p>Other useful commands are under “Run” at the bottom of the menu. Send EOF/Soft reboot is useful for rebooting the ESP32</p> <blockquote> <p>Using Thonny to write programs in microPython and upload to ESP32 has worked best for me. If wanting to do C++ then Arduino is a good IDE. Some ESP32’s required me to hold the “boot” button when uploading code in Arduino. Once the terminal says “Connecting” you can release the boot button.</p> </blockquote> <p>Commands inside Thonny​ To change esp32 directories in the upython command line</p> <div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">&gt;</span><span class="o">&gt;&gt;</span> %cd /dir
<span class="gp">&gt;</span><span class="o">&gt;&gt;</span> %cd ..
</code></pre></div></div> <p>Manually installing esp32 tool<br> <code class="language-plaintext highlighter-rouge">$ pip3 install –upgrade esptool</code> (or)<br> <code class="language-plaintext highlighter-rouge">$ python3 -m pip install esptool</code></p> <p>To erase flash<br> <code class="language-plaintext highlighter-rouge">$ esptool.py --chip esp32 --port /dev/ttyUSB0 erase_flash</code><br> To program the firmware<br> <code class="language-plaintext highlighter-rouge">$ esptool.py --chip esp32 --port /dev/ttyUSB0 --baud 460800 write_flash -z 0x1000 esp32xxx.bin</code></p> <p>(on non RPi machines you may have to modify dialout group. My Thonny gave instructions when I got the error)<br> <code class="language-plaintext highlighter-rouge">sudo usermod -a -G dialout $USER</code></p> <hr> <hr> </article> </div> </main> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2023 Sean Trautman. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="noopener noreferrer">Jekyll</a>. Hosted by <a href="https://pages.github.com/" target="_blank" rel="noopener noreferrer">GitHub Pages</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js" integrity="sha256-EdPgYcPk/IIrw7FYeuJQexva49pVRZNmt3LculEr7zM=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js"></script> <script defer src="/assets/js/common.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>