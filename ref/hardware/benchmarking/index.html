<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>Benchmarking | ST</title> <meta name="author" content="Sean Trautman"/> <meta name="description" content="Intro to benchmarking"/> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"/> <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-DF7Zhf293AJxJNTmh5zhoYYIMs2oXitRfBjY+9L//AY=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"/> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha256-i1+4qU2G2860dGGIOJscdC30s9beBXjFfzjWLjBRsBg=" crossorigin="anonymous"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/native.css" media="" id="highlight_theme_light"/> <link rel="shortcut icon" href="/assets/img/st-logo-transparent.png"/> <link rel="stylesheet" href="/assets/css/main.css"> <link rel="canonical" href="https://straut12.github.io/ref/hardware/benchmarking/"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/native.css" media="none" id="highlight_theme_dark"/> <script src="/assets/js/theme.js"></script> <script src="/assets/js/dark_mode.js"></script> </head> <body class="fixed-top-nav "> <div class="site-container"> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/">ST</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/"></a> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Coding</a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item" href="/ref/coding/git/">VScode Github</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/coding/bash/">Bash Shell</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/coding/python/">Python</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/coding/js/">JavaScript</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/coding/html/">Web HTML</a> </div> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Data Analysis</a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item" href="/ref/data-analysis/data-collection/">data collection</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/data-analysis/databases/">databases</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/data-analysis/basic-charting/">basic charting</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/data-analysis/data-visualization/">data visualization</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/data-analysis/ml/">machine learning</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/data-analysis/statistics/">notes</a> </div> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Linux</a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item" href="/ref/linux/linuxdistros/">Linux Options</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/linux/desktop/">Desktop Appearance</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/linux/software/">Installing SW</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/linux/sharing/">File Sharing</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/linux/vnc-ssh/">Remote vnc ssh</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/linux/terminal/">Terminal cli</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/linux/autostart/">Autostart systemd</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/linux/logs/">Logs</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/linux/list/">List of SW to Install</a> </div> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">Repositories</a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="site-body wrapper"> <aside class="site-sidebar" id="site-sidebar"> <nav class="toc"> <header><h4 class="toc__title">Table of Contents</h4></header> <ul class="toc__menu"> <li><a href="#benchmarking-programs">Benchmarking Programs</a></li> <li><a href="#rpi-hardware">RPi Hardware</a></li> <li> <a href="#phoronix-test-suite">Phoronix-test-suite</a> <ul> <li><a href="#rpiubuntu">RPi/Ubuntu</a></li> <li><a href="#rpi-related-tests">RPi related tests</a></li> <li><a href="#windows-10">Windows 10</a></li> <li><a href="#system-monitor">System monitor</a></li> <li><a href="#processor">Processor</a></li> <li><a href="#disk">Disk</a></li> <li><a href="#memory">Memory</a></li> <li><a href="#network">Network</a></li> <li><a href="#web-browsing">Web Browsing</a></li> </ul> </li> <li> <a href="#sysbench">Sysbench</a> <ul> <li><a href="#cpu-test">CPU test</a></li> <li><a href="#io-test">I/O test</a></li> <li><a href="#memory-1">Memory</a></li> <li><a href="#usb-and-sd-card-speed">USB and SD Card Speed</a></li> </ul> </li> <li><a href="#video-benchmarking-fps">Video Benchmarking (fps)</a></li> </ul> </nav> </aside> <main> <div class="post"> <p class="post-description">Intro to benchmarking</p> <article> <h1 id="benchmarking-programs">Benchmarking Programs</h1> <p>Benchmarking is not necessary for any projects. But it can be informative and you’ll learn a lot. Here are some options for playing around with it. I didn’t spend a lot of time in this area so I don’t have detailed notes. There is enough information you can google and find more though.</p> <ul> <li>sysbench (installed thru synaptic) Quick test (geared for mysql, db systems)</li> <li>phoronix-test-suite (download .deb and install gdebi) Can compare across Raspberry Pi, WIndows, Linux</li> <li>hdparm (installed thru synaptic) test is sequential (better to have test for random access)​</li> </ul> <h1 id="rpi-hardware">RPi Hardware</h1> <p>SYSTEM (all components)</p> <ul> <li>CPU - My Pi4 is over-clocked to 2.1 GHz, Pi3’s go up to 1.4GHz</li> <li>Memory - Pi4=LPDDR4, Pi3=DDR2</li> <li>Disk (microSD) older UHS1 and class 10 cards should have min write speed of 10MB/s (the card may state a higher, ‘up to’ speed on the package, but that doesn’t mean it’s what you will get). The Pi4 has a faster microSD reader (50MBps vs 25 MBps, hdparm). Running a benchmark and comparing cards (sequential and random read/write speeds) will help quantify the difference. But in general even cheaper class 10 cards have been sufficient for me on Raspberry Pi’s. It all depends on what your expectations are.</li> <li>Network - Pi3 ethernet is slowest 10/100. Pi3B+ is faster Gigabit (over USB 2) but still slower than the Pi4 Gigabit.</li> </ul> <h1 id="phoronix-test-suite">Phoronix-test-suite</h1> <h2 id="rpiubuntu">RPi/Ubuntu</h2> <ul> <li>Download/Install from .deb or installation from github</li> <li>Install from github - php requirements</li> <li><code class="language-plaintext highlighter-rouge">$ sudo apt install php7.3-cli php7.3-xml php7.3-gd php7.3-bz2 php7.3-sqlite3 php7.3-curl</code></li> <li>Install pts from github</li> <li><code class="language-plaintext highlighter-rouge">$ cd /opt</code></li> <li><code class="language-plaintext highlighter-rouge">$ wget https://github.com/phoronix-test-suite/phoronix-test-suite/releases/download/........tar.gz</code></li> <li><code class="language-plaintext highlighter-rouge">$ gunzip phoronix-test-suite-xxxx.tar.gz</code></li> <li><code class="language-plaintext highlighter-rouge">$ tar xvf phoronix-test-suite-xxxx.tar</code></li> <li><code class="language-plaintext highlighter-rouge">$ cd phoronix-test-suite</code></li> <li> <code class="language-plaintext highlighter-rouge">$ ./install-sh</code> Phoronix-test-suite icon is installed under ‘System Tools’. Or you can type <code class="language-plaintext highlighter-rouge">$ phoronix-test-suite shell</code>in a terminal.</li> </ul> <h2 id="rpi-related-tests">RPi related tests</h2> <ul> <li>1907120-HV-RPIMONITO11 is a test I used to compare RPis</li> <li>2007316-NE-RPINTEL8536 recent Pi4 to Intel test</li> <li>1907127-HV-RASPBERRY81 (takes 3-4 hrs to run on Pi4)​</li> </ul> <h2 id="windows-10">Windows 10</h2> <p>Note - This is what I did to to get pts to work on windows 10. I wanted to be able to compare to my windows PC, too. There’s also info in PTS website under Notes-General for PHP. Phoronix-test-suite-docs</p> <ul> <li>install cygwin for terminal commands https://www.cygwin.com/</li> <li>download PTS from github. Click on ‘code’ and download the ZIP.</li> <li>extract to c:\ drive</li> <li>Use cygwin terminal to go to the phoronix dir. For me -&gt; <code class="language-plaintext highlighter-rouge">$ cd /cygdrive/c/phoronix-test-suite-10.0.1</code> </li> <li>Run .bat file inside phoronix dir <code class="language-plaintext highlighter-rouge">$ ./phoronix-test-suite.bat</code> </li> <li>The .bat file also downloaded php and extracted to C:\PHP but it didn’t seem to update env variables because I kept getting an error about php not installed when running phoronix-test-suite</li> <li>to fix PHP –&gt; go to C:\PHP\ and copy php.ini-production to php.ini (needs php.ini file)</li> <li>php.ini file extensions update –&gt; remove semi colon and update ‘extension_dir=”C:\PHP\ext” You’re telling it where the extensions are located.</li> <li>more php.ini extensions update –&gt; remove semi colon from extensions that are useful. I did openssl, curl, gd2, mbstring, mysql, pdo_mysql, xmlrpc, bz2, sockets, sqlite3</li> <li>Add C:\php to path environment variable in windows. In windows settings search for ‘environment variables’, then ‘Advanced’ tab, ‘Environment Variables’ button, ‘edit text’, add C:\PHP and C:\PHP\ext (make sure ; is between them)</li> <li>reboot I still had a problem with the phoronix-test-suite defining the path ($PTS_DIR) for the .php files. My computer didn’t like how the path was defined. I had to modify the phoronix-test-suite file (I use notepad++). At the bottom of the file I removed the $PTS_DIR and replaced with ‘.’ for current directory. What my line looks like after updating -&gt; <code class="language-plaintext highlighter-rouge">$PTS_PREPEND_LAUNCH $PHP_BIN ./pts-core/phoronix-test-suite.php $@</code> Now I could run <code class="language-plaintext highlighter-rouge">$ ./phoronix-test-suite interactive</code> I used the interactive menu until I got comfortable with some of the commands.​ Phoronix-test-suite Usage I used the interactive option to get used to the commands Benchmark gives you the option to upload to https://openbenchmarking.org/ From https://openbenchmarking.org/ you can compare to other tests you’ve ran on other systems, compare to other results people have uploaded, browse other test suites, etc.</li> </ul> <h2 id="system-monitor">System monitor</h2> <p>options (get plots for temp, freq, etc) To see what sensors are supported <code class="language-plaintext highlighter-rouge">$ phoronix-test-suite system-sensors</code> For my Raspberry Pi 4</p> <ul> <li>cpu.freq</li> <li>cpu.peak-freq</li> <li>cpu.usage</li> <li>hdd.read-speed Drive Read Speed (mmcblk0): 0.00 MB/s</li> <li>hdd.write-speed Drive Write Speed (mmcblk0): 0.02 MB/s</li> <li>memory.usage Memory Usage: 228 Megabytes</li> <li>sys.temp System Temperature: 43.3 Celsius</li> <li>MONITOR=cpu.freq,cpu.peak-freq,cpu.usage,hdd.read-speed,hdd.write-speed,memory.usage,sys.temp</li> </ul> <p>Other monitor options</p> <ul> <li>MONITOR=cpu.usage,gpu.temp,cpu.temp,gpu.usage, sys.temp</li> <li>MONITOR=all.usage (didn’t work on my Pi4)</li> <li>TEST_TIMEOUT_AFTER= (number of minutes)</li> </ul> <p>You put the options before the pts command. example <code class="language-plaintext highlighter-rouge">$ MONITOR=sys.temp phoronix-test-suite benchmark c-ray</code> Ran quick test with <code class="language-plaintext highlighter-rouge">$ MONITOR=cpu.peak-freq,cpu.usage,hdd.read-speed,hdd.write-speed,memory.usage,sys.temp phoronix-test-suite benchmark c-ray</code></p> <p>Some options from phoronix forum (from timtaw) Fast screening - timtaw/screening-live-superfast Light screening - timtaw/screening-live-fast</p> <h2 id="processor">Processor</h2> <p>Processor (single-threaded): SciMark (Computational Test: Fast Fourier Transform): 3 minutes Processor (multi-threaded): Himeno Benchmark: 3 minutes, C-Ray: 6 minutes, Smallpt: 4 minutes</p> <h2 id="disk">Disk</h2> <p>Flexible IO Tester (Type: Random Read; IO Engine: POSIX AIO; Buffered: No; Direct: Yes; Block Size: 4 KB): 6 minutes PostMark: 17 minutes iozone (4k block size and 100MB file) aio-stress (a-synhronous I/O)</p> <h2 id="memory">Memory</h2> <p>RAMspeed SMP (Type: Add; Benchmark: Integer): 6 minutes CacheBench (Test: Test All Options): 20 minutes Stream (Type: Test All Options): 41 minutes</p> <h2 id="network">Network</h2> <p>Loopback TCP Network Performance: 3 minutes iperf</p> <h2 id="web-browsing">Web Browsing</h2> <p>octane</p> <p>System: Hierarchical INTegration (Test: Test All Options): 51 minutes</p> <h1 id="sysbench">Sysbench</h1> <h2 id="cpu-test">CPU test</h2> <p>with prime number 20000 (phoronix test 200,000,000) $ sysbench –test=cpu –cpu-max-prime=20000 –num-threads=4 run look at total time</p> <h2 id="io-test">I/O test</h2> <p>1st creates test file larger than RAM, runs tests, then deletes/cleans up test file<br> <code class="language-plaintext highlighter-rouge">$ sysbench --test=fileio --file-total-size=2G prepare $ sysbench --test=fileio --file-total-size=2G --file-test-mode=rndrw --init-rng=on --max-time=300 --max-requests=0 run $ sysbench --test=fileio --file-total-size=2G cleanup </code></p> <h2 id="memory-1">Memory</h2> <p><code class="language-plaintext highlighter-rouge">$ sysbench --test=memory run --memory-total-size=2G</code></p> <p><code class="language-plaintext highlighter-rouge">$ sysbench --test=memory run --memory-total-size=2G --memory-oper=read</code></p> <p>look at kb/sec</p> <h2 id="usb-and-sd-card-speed">USB and SD Card Speed</h2> <p><code class="language-plaintext highlighter-rouge">$ sudo hdparm -tT --direct /dev/sda1</code> (USB drive)</p> <p><code class="language-plaintext highlighter-rouge">$ sudo hdparm -tT --direct /dev/mmcblk0</code> (sd card)</p> <h1 id="video-benchmarking-fps">Video Benchmarking (fps)</h1> <p>​The RPi3 does an ok job at playing video and RPi4 is even better. But there is significant drop off in comparison to a PC/laptop. To compare performance between RPis download the raspbian version of geexlab. Unzip and then click on the executable file. Drag and drop different .xml files to see the fps.</p> <p>You can also play Youtube videos and look at the details for frames dropped and fps.</p> <hr> <hr> <div class="row"> <div class="col-md mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/hardware/flappybird.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="row justify-content-center float-right"> <div class="col-4-auto mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/hardware/flappybird.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <hr> <p>Images can you col-# col-sm-# col-md-# col-lg-# Use auto to auto size around image Just wrap your images with <code class="language-plaintext highlighter-rouge">&lt;div class="col-sm"&gt;</code> and place them inside <code class="language-plaintext highlighter-rouge">&lt;div class="row"&gt;</code> (read more about the <a href="https://getbootstrap.com/docs/4.4/layout/grid/" target="_blank" rel="noopener noreferrer">Bootstrap Grid</a> system).</p> </article> </div> </main> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2023 Sean Trautman. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="noopener noreferrer">Jekyll</a>. Hosted by <a href="https://pages.github.com/" target="_blank" rel="noopener noreferrer">GitHub Pages</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js" integrity="sha256-EdPgYcPk/IIrw7FYeuJQexva49pVRZNmt3LculEr7zM=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js"></script> <script defer src="/assets/js/common.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>