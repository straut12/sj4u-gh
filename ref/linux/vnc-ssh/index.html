<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>vnc ssh | ST</title> <meta name="author" content="Sean Trautman"/> <meta name="description" content="Intro to vnc, ssh, remote connections"/> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"/> <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-DF7Zhf293AJxJNTmh5zhoYYIMs2oXitRfBjY+9L//AY=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"/> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha256-i1+4qU2G2860dGGIOJscdC30s9beBXjFfzjWLjBRsBg=" crossorigin="anonymous"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/native.css" media="" id="highlight_theme_light"/> <link rel="shortcut icon" href="/assets/img/st-logo-transparent.png"/> <link rel="stylesheet" href="/assets/css/main.css"> <link rel="canonical" href="https://straut12.github.io/ref/linux/vnc-ssh/"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/native.css" media="none" id="highlight_theme_dark"/> <script src="/assets/js/theme.js"></script> <script src="/assets/js/dark_mode.js"></script> </head> <body class="fixed-top-nav "> <div class="site-container"> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/">ST</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/"></a> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Coding</a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item" href="/ref/coding/git/">VScode Github</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/coding/bash/">Bash Shell</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/coding/python/">Python</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/coding/js/">JavaScript</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/coding/html/">Web HTML</a> </div> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Data Analysis</a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item" href="/ref/data-analysis/data-collection/">data collection</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/data-analysis/databases/">databases</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/data-analysis/basic-charting/">basic charting</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/data-analysis/data-visualization/">data visualization</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/data-analysis/ml/">machine learning</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/data-analysis/statistics/">notes</a> </div> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Linux</a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item" href="/ref/linux/linuxdistros/">Linux Options</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/linux/desktop/">Desktop Appearance</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/linux/software/">Installing SW</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/linux/sharing/">File Sharing</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/linux/vnc-ssh/">Remote vnc ssh</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/linux/terminal/">Terminal cli</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/linux/autostart/">Autostart systemd</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/linux/logs/">Logs</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/ref/linux/list/">List of SW to Install</a> </div> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">Repositories</a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="site-body wrapper"> <aside class="site-sidebar" id="site-sidebar"> <nav class="toc"> <header><h4 class="toc__title">Table of Contents</h4></header> <ul class="toc__menu"> <li><a href="#vnc-viewers">VNC Viewers</a></li> <li><a href="#vnc-servers">VNC Servers</a></li> <li> <a href="#vnc-server-setup">VNC Server Setup</a> <ul> <li><a href="#vino">Vino</a></li> <li><a href="#x11vnc">x11vnc</a></li> <li><a href="#realvnc-with-home-subscription">RealVNC with Home Subscription</a></li> <li><a href="#vnc-for-osmc-on-rpi">VNC for OSMC on RPi</a></li> </ul> </li> <li><a href="#ssh-and-sftp">ssh and sftp</a></li> <li><a href="#ssh-key-authentication">ssh Key Authentication</a></li> <li><a href="#rpi-hunter">rpi-hunter</a></li> <li><a href="#useful-terms">Useful Terms</a></li> </ul> </nav> </aside> <main> <div class="post"> <p class="post-description">Intro to vnc, ssh, remote connections</p> <article> <h1 id="vnc-viewers">VNC Viewers</h1> <p>This page is focused on connecting to a Linux PC remotely (not connecting to a Windows PC with RDP). Quick explanation on terms before starting.</p> <ul> <li>Host - Any computer/device that is accessible over the network.</li> <li>Server-host - The Linux PC you’re wanting to connect to will need a vnc server installed and running</li> <li>Viewer-host - You use a device (Linux/Windows PC, tablets, phone) as the viewer ​ The server and the viewer will be separate programs. There are a lot of vnc server and viewer options and direct vs cloud connection is one difference to note. Below are setups I’ve used with some quick pros/cons.</li> </ul> <p><strong>RPi systems come with Realvnc already setup and just has to be enabled. These notes are primarily for cases where a vnc server wasn’t setup</strong></p> <hr> <p><strong>VNC Viewers</strong></p> <div class="row"> <div class="col-1 mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/linux/vnc1.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-1 mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/linux/vnc2.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-1 mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/linux/vnc3.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <ul> <li>RealVNC Viewer, Remmina, and Vinagre are popular viewers</li> <li>RealVNC .deb can be downloaded from RealVNC website for installation. Remmina and Vinagre are only viewers (do not create a server). They can be installed from Software Store or Synaptic (apt)</li> <li>Remmina - once connected I select the gear icon (Preferences) and choose “Best(slowest)” for better quality image. If you have issues with Remmina not showing the VNC plugin, open Synaptic and confirm remmina-plugin-vnc is installed, then close it and run <code class="language-plaintext highlighter-rouge">$ sudo killall remmina</code>. Now reopen and check VNC option.</li> </ul> <hr> <h1 id="vnc-servers">VNC Servers</h1> <div class="row"> <div class="col-4 mt-3 mt-md-0"> <figure> <picture> <img src="/assets/img/linux/servers.jpg" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p>Direct connect options</p> <ul> <li>vino and x11vnc for Ubuntu families (elementary OS, Zorin(gnome), etc) <ul> <li>Viewer and host should be on same network, do not need internet.</li> <li>No file transfer (I use overGrive and sftp for file transfer. rsync is another option) ​* Currently vino comes installed on Ubuntu and integrated with Gnome system settings.</li> </ul> </li> </ul> <p>​Cloud connect options</p> <ul> <li>RealVNC Server - Details below are for the free “Home” subscription <ul> <li>Viewer and host do not need to be on same network. Just need internet connection.</li> <li>Up to 5 PCs on one email account.</li> <li>No direct connect or file transfer</li> <li>​Use RealVNC Viewer and login with your RealVNC account. ​A benefit with RPi using Raspberry Pi OS is that it comes with a custom “Home” RealVNC server installed with service mode (includes direct connect and file transfer). It just has to be enabled in Raspi Config menu.<br> ​ My Setup Preference (influenced by the fact I do Raspberry Pi STEM projects)</li> </ul> </li> <li>Viewer - I use RealVNC (can do direct and cloud connections)</li> <li>Server - depends on the system <ul> <li>Raspberry Pi - Built-in RealVNC server and viewer. Just enable.</li> <li>Ubuntu families with GNOME - I enable the default vino server. To allow RealVNC viewer to connect to it I disable the vino encryption (details below)</li> <li>Non-GNOME DE - I install x11vnc server (details below) I also install the RealVNC Home server (cloud) on top of the x11vnc/vino server. This gives me both cloud and direct connection. I have had the best luck installing the x11vnc/vino server first and then the RealVNC Home server.</li> </ul> </li> </ul> <blockquote> <p>Since I often swap between which computer is the local vs remote I install both servers and viewers on all PCs.</p> </blockquote> <hr> <h1 id="vnc-server-setup">VNC Server Setup</h1> <p>Typically vnc servers use port 5900 to LISTEN for connections (except the RealVNC “Home” subscription with cloud). So ensure you only have one server installed to avoid port conflicts.</p> <p>Can use netsat (net-tools) or lsof (List of Open File) to see if port 5900 is in LISTEN state.</p> <ul> <li> <code class="language-plaintext highlighter-rouge">$ sudo apt install net-tools</code><br> Then the two commands</li> <li><code class="language-plaintext highlighter-rouge">$ sudo netstat -tulp</code></li> <li> <code class="language-plaintext highlighter-rouge">$ sudo lsof -i -P -n | grep LISTEN</code><br> I prefer the lsof because it shows if running with root vs USER. This is important in setting up x11vnc later. With a fresh elementary OS install I show no vnc server on port 5900 <div class="language-console highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span><span class="nb">sudo </span>lsof <span class="nt">-i</span> <span class="nt">-P</span> <span class="nt">-n</span> | <span class="nb">grep </span>LISTEN
<span class="go">systemd-r  IPv4 TCP 127.0.0.53:53 (LISTEN) 
cupsd root IPv6 TCP [::1]:631 (LISTEN)         
cupsd root IPv4 TCP 127.0.0.1:631 (LISTEN)
</span></code></pre></div> </div> </li> </ul> <hr> <h2 id="vino">Vino</h2> <p>Currently Ubuntu comes with vino server installed and will lauch at startup. You enable it thru desktop system gui “Settings” and then “Sharing”. Turn the sharing/remote on and other options, ie require a password for access.<br> I was able to connect with Remmina and Vinagre viewers once “sharing” is enabled. But RealVNC viewer did not like the encryption vino is using and gave an error.<br> To use RealVNC viewer with vino server I had to disable the encryption with<br> <code class="language-plaintext highlighter-rouge">$ gsettings set org.gnome.Vino require-encryption false</code><br> Now I was able to connect with all VNC viewers.<br> If you want vino encryption enabled you’ll need to use Remmina or Vinagre viewer.<br> ​Now check port 5900 with lsof.</p> <div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span><span class="nb">sudo </span>lsof <span class="nt">-i</span> <span class="nt">-P</span> <span class="nt">-n</span> | <span class="nb">grep </span>LISTEN
<span class="go">systemd-r  IPv4 TCP 127.0.0.53:53 (LISTEN) 
cupsd root IPv6 TCP [::1]:631 (LISTEN)         
cupsd root IPv4 TCP 127.0.0.1:631 (LISTEN)
vino-serv USER IPv6 TCP *:5900 (LISTEN)         
vino-serv USER IPv4 TCP *:5900 (LISTEN)
</span></code></pre></div></div> <hr> <h2 id="x11vnc">x11vnc</h2> <p>If switching from vino to x11vnc uninstall vino first<br> <code class="language-plaintext highlighter-rouge">$ sudo apt purge vino</code><br> Now install x11vnc server<br> <code class="language-plaintext highlighter-rouge">$ sudo apt install x11vnc</code><br> Next you set the password. The default command stores the password file in $Home/.vnc/passwd . I ran into problems when trying to get x11vnc daemon to start automatically after boot. I would get “-auth guess: failed for display=:’0’” errors in the service log from $systemctl status x11vnc. However I could get it to work if I used “startup application” to start the service. A better solution was moving the password to an /etc/ directory. Now I could start the x11vnc service with either systemd or startup application.</p> <p><strong>Option 1</strong><br> Set password file in default $HOME/.vnc/passwd<br> <code class="language-plaintext highlighter-rouge">$ x11vnc -storepasswd</code><br> Then for start on boot put command below in “startup applications” from desktop settings</p> <div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">x11vnc -auth guess -forever -loop -noxdamage -repeat -rfbauth $</span>HOME/.vnc/passwd <span class="nt">-rfbport</span> 5900 <span class="nt">-shared</span>
</code></pre></div></div> <p><strong>Option 2</strong><br> Set password file in /etc/ directory (used <code class="language-plaintext highlighter-rouge">$ sudo mkdir /etc/mkdir/</code>for examples below)<br> <code class="language-plaintext highlighter-rouge">$ sudo x11vnc -storepasswd your-password /etc/x11vnc/passwd</code><br> or<br> $<code class="language-plaintext highlighter-rouge">sudo x11vnc -storepasswd /etc/x11vnc/passwd</code><br> ​and follow prompts<br> Now set up x11vnc to launch during startup using systemd by creating a x11vnc.service.​​<br> <code class="language-plaintext highlighter-rouge">$ sudo nano /lib/systemd/system/x11vnc.service​</code></p> <div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">[Unit]​​
Description=Start x11vnc at startup.
After=multi-user.target

[Service] ​
Type=simple
ExecStart=/usr/bin/x11vnc -auth guess -forever -loop -noxdamage -repeat -rfbauth /etc/x11vnc/passwd -rfbport 5900 -shared
Restart=on-failure

[Install]
WantedBy=multi-user.target
</span></code></pre></div></div> <p><strong>(If copy/pasting from text box make sure there is a return after the Unit/Service/Install headers or you will get an error about Invalid section header. If necessary type it from scratch in a clean file.)</strong><br> Then get it running with<br> <code class="language-plaintext highlighter-rouge">$ sudo systemctl daemon-reload</code><br> <code class="language-plaintext highlighter-rouge">$ sudo systemctl start x11vnc.service</code><br> To have it start on boot use “enable”<br> <code class="language-plaintext highlighter-rouge">$ sudo systemctl enable x11vnc.service</code><br> Check port 5900 with lsof</p> <div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span><span class="nb">sudo </span>lsof <span class="nt">-i</span> <span class="nt">-P</span> <span class="nt">-n</span> | <span class="nb">grep </span>LISTEN
<span class="go">systemd-r  IPv4 TCP 127.0.0.53:53 (LISTEN) 
cupsd root IPv6 TCP [::1]:631 (LISTEN)         
cupsd root IPv4 TCP 127.0.0.1:631 (LISTEN)
x11vnc root IPv6 TCP *:5900 (LISTEN)         
x11vnc root IPv4 TCP *:5900 (LISTEN)
</span></code></pre></div></div> <p>There is a third option if you don’t want it running as root.​ In the x11vnc.service file set your user/group and then update ownership of the password file to match.</p> <div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">[Service]
User=Your-USER
Group=Your-GROUP
</span></code></pre></div></div> <p>And chown on the password file <code class="language-plaintext highlighter-rouge">$ sudo chown Your-USER:Your-GROUP /etc/x11vnc/passwd</code> Now restart the x11vnc service and check port 5900. It should be running at user-level now.</p> <hr> <h2 id="realvnc-with-home-subscription">RealVNC with Home Subscription</h2> <p>To setup RealVNC server with the free “Home” subscription</p> <ul> <li>Go to RealVNC website <ul> <li>​Download the Server .deb</li> <li>Register with an email address/password</li> <li>Activate the ‘Home’ subscription</li> </ul> </li> <li>After connecting computers (up to 5) you can come back to the RealVNC website and rename/remove the computers on your account.</li> </ul> <p>Now install Real VNC server on PC you want to connect to. ​</p> <ul> <li>Install the downloaded RealVNC server .deb from above</li> <li><code class="language-plaintext highlighter-rouge">$ sudo gdebi VNC-Server..</code></li> <li>After install run the license wizard and enter your RealVNC email/login info.</li> <li>$ sudo vnclicensewiz</li> <li>Now start the server</li> <li><code class="language-plaintext highlighter-rouge">$ sudo systemctl start vncserver-x11-serviced.service</code></li> <li>​To have it start on boot each time run “enable” command</li> <li><code class="language-plaintext highlighter-rouge">$ sudo systemctl enable vncserver-x11-serviced.service</code></li> </ul> <p>Installing VNC viewer on the PC you want to use to view the host PC</p> <ul> <li>Download RealVNC viewer .deb from website and install</li> <li><code class="language-plaintext highlighter-rouge">$ sudo gdebi VNC-Viewer..</code></li> <li>Use ‘login’ option and login with same email/password combo as RealVNC account.</li> <li>The host computer will show up in your Team (Home) and you can now connect <ul> <li>Will use the password you entered specifically for VNC login to that PC created in step 6 above.​</li> </ul> </li> </ul> <p>For non-Raspberry Pi PC only running RealVNC Home subscription I do not get anything on port 5900.</p> <p>​For Raspberry Pi I get.</p> <div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span><span class="nb">sudo </span>lsof <span class="nt">-i</span> <span class="nt">-P</span> <span class="nt">-n</span> | <span class="nb">grep </span>LISTEN
<span class="go">systemd-r  IPv4 TCP 127.0.0.53:53 (LISTEN) 
cupsd root IPv6 TCP [::1]:631 (LISTEN)         
cupsd  root IPv4 TCP 127.0.0.1:631 (LISTEN)
vncserver root IPv6 TCP *:5900 (LISTEN)         
vncserver root IPv4 TCP *:5900 (LISTEN)
</span></code></pre></div></div> <h2 id="vnc-for-osmc-on-rpi">VNC for OSMC on RPi</h2> <p>x11vnc did not work for me (OSMC on Pi does not use X11)</p> <ul> <li>Script by MarkusLange</li> <li><code class="language-plaintext highlighter-rouge">$ wget https://raw.githubusercontent.com/MarkusLange/VNC-Server-install-script-for-OSMC/master/osmc_vnc_install_cli.bash</code></li> <li>Make it executable:</li> <li><code class="language-plaintext highlighter-rouge">$ chmod +x osmc_vnc_install_cli.bash</code></li> <li>Start the GUI with:</li> <li><code class="language-plaintext highlighter-rouge">$ sudo ./osmc_vnc_install_cli.bash</code></li> <li>Follow the options</li> <li>OSMC System-Update</li> <li>Install VNC Server and Service (port 5900)</li> <li>Activate VNC Service</li> <li>You should see port 5900 LISTENing with</li> <li><code class="language-plaintext highlighter-rouge">$ netstat -tulp</code></li> <li>On PC (client) side, RealVNC viewer did not work. But Vinagre and Remmina viewers worked well.</li> </ul> <p><strong>Notes on other vnc attempts with tightvnc and tigervnc</strong> In my case connecting with other VNC tools was not as easy and often ended up with black screen or slow/limited functionality. <br> Other VNC connections I tried<br> tightvnc<br> ultraVNC<br> tigervnc<br> vnc4server</p> <p>Remmina does not create a server. Used for viewing and RDP (Remote Desktop Protocol for Windows connections)</p> <p>Useful commands when experimenting with tigerVNC server<br> $ vncserver Creates a new connection<br> $ sudo netstat -tulpn See connections<br> As you create more vncserver connections it will go to 5901, 5902 etc<br> $ vncserver -kill :1 Kill a connection listed in netstat command</p> <hr> <h1 id="ssh-and-sftp">ssh and sftp</h1> <p>ssh and sftp are options for logging into a terminal on another computer and running command lines. Although there is no windows environment, you can still execute commands like starting a virtual vnc session, or edit/view files, copy files back and forth, even do python debugging with pudb.</p> <p>ssh has two choices for security or authentication. The default method is a simple password. But it can be updated to use key-based authentication which uses a private-public key pair.</p> <p><strong>Similar to vnc you need a ssh server running to allow ssh into your system. The openssh-server should be installed with the Raspberry Pi OS. And RPi Imager now lets you enable ssh and create a password in the Imager settings before you download/install to the sd card. Assuming you enabled ssh in the Imager settings you’ll be able to ssh into it after you boot up.</strong></p> <p><strong>ssh setup</strong><br> If for some reason openssh was not installed you can set it up.<br> Install the ssh server<br> <code class="language-plaintext highlighter-rouge">$ sudo apt install openssh-server</code><br> lsof should show port 22 LISTENing</p> <div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span><span class="nb">sudo </span>lsof <span class="nt">-i</span> <span class="nt">-P</span> <span class="nt">-n</span> | <span class="nb">grep </span>LISTEN
<span class="go">systemd-r  IPv4 TCP 127.0.0.53:53 (LISTEN) 
cupsd root IPv6 TCP [::1]:631 (LISTEN)         
cupsd root IPv4 TCP 127.0.0.1:631 (LISTEN)
vncserver root IPv6 TCP *:5900 (LISTEN)         
vncserver root IPv4 TCP *:5900 (LISTEN)
sshd root IPv6 TCP *:22 (LISTEN)         
sshd root IPv4 TCP *:22 (LISTEN)
</span></code></pre></div></div> <p>Can check the status<br> <code class="language-plaintext highlighter-rouge">​$ systemctl status sshd</code> <br> Enable ssh to start on boot<br> <code class="language-plaintext highlighter-rouge">$ sudo systemctl enable sshd</code> <br> Can test some ssh commands.<br> <code class="language-plaintext highlighter-rouge">$ ssh &lt;user&gt;@&lt;IP address&gt;</code><br> Login and check if it works<br> <code class="language-plaintext highlighter-rouge">$ exit</code> to leave</p> <p>You can also use an app like PuTTY​​<br> Login using the IP address and port 22</p> <hr> <p><strong>sftp for copying files</strong></p> <ul> <li>Login to remote PC with sftp</li> <li><code class="language-plaintext highlighter-rouge">$ sftp user@&lt;IP address&gt;</code></li> <li>Create a test file</li> <li><code class="language-plaintext highlighter-rouge">$ touch testfile</code></li> <li>Check if you can copy a file from host to client</li> <li><code class="language-plaintext highlighter-rouge">$ get testfile</code></li> <li>Check if you can copy a file from client to host</li> <li><code class="language-plaintext highlighter-rouge">$ put testfile</code></li> <li>Note - If getting access denied errors may have to update the ssh config file on the host. These updates have worked for me if using password authentication (and not keys)</li> <li> <code class="language-plaintext highlighter-rouge">$ sudo nano /etc/ssh/sshd_config</code> <div class="language-console highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="go">PermitRootLogin yes              
PasswordAuthentication yes ​
</span></code></pre></div> </div> </li> </ul> <p>For copying directories sftp with -r (recursive)</p> <ul> <li><code class="language-plaintext highlighter-rouge">$ sftp -r user@&lt;IP address&gt;</code></li> </ul> <p>Or use rsync (much faster for a lot of files)</p> <ul> <li><code class="language-plaintext highlighter-rouge">$ rsync -avz source destination</code></li> <li> <code class="language-plaintext highlighter-rouge">$ rsync -avz ./dir user@&lt;IP address&gt;:/home/user/dir</code> <div class="language-console highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="go">-v (verbose)
-a (archive, preserve sym links, file permissions, etc)
-z (compress)
</span></code></pre></div> </div> </li> </ul> <hr> <h1 id="ssh-key-authentication">ssh Key Authentication</h1> <p>ssh-keygen is a way of creating a secure method to log into remote hosts and allow transfer of code/files/data between your system/client and github or another PC/server. The general concept is two files with keys (a private and matching public key) are created and stored in ~/.ssh. The public key is copied to the remote host (ie github) or server (in the server authorized_keys file). When connecting from your PC/client to the remote host/server a check will be done to confirm the private and public keys match.</p> <blockquote> <p>seahorse is a gui version for checking ssh keys</p> </blockquote> <p>Example files for RSA algo ssh</p> <ul> <li>Private -&gt; <strong>id_rsa</strong> (The private key acts as a password, remains on your PC, and should not be shared)</li> <li>Public -&gt; <strong>id_rsa.pub</strong> (The public key is copied to remote host (ie github or server). When you login, the remote is able to use the public key for verification and grant access. (in server scenario the sshd_config will also need to be updated to disable the default simple PasswordAuthentication)</li> </ul> <blockquote> <p>Note I mainly use ssh key authentication for connecting my system to github account. So the notes here are focused on that scenario</p> </blockquote> <p><strong>Detailed Steps</strong> <strong>Creating the Pair of Private/Public Keys on your PC/Client Side</strong></p> <ul> <li> <p>RSA type SSH keys are what worked best for me with Raspberry Pi</p> </li> <li>You can run <code class="language-plaintext highlighter-rouge">$ ls -al ~/.ssh</code> to see if you already have an existing key.</li> <li>If there is an <strong>id_rsa.pub</strong> and <strong>id_rsa</strong> then you already have keys. Assuming you haven’t already used it, the <strong>id_rsa.pub</strong> can be copied to a remote host for ssh key authentication. However if you’ve already used that key for another account you’ll need to follow the steps below to create a new pair and give them a different name.</li> </ul> <p><strong>Create a Key Pair</strong></p> <ul> <li>If you need to create a key pair you use ssh-keygen (will create both the private and public key)</li> <li>Github now has a note that rsa keys need increased security. To increase security you can specify the algo (-t) and bits (-b):<br> <code class="language-plaintext highlighter-rouge">$ ssh-keygen -t rsa -b 4096 -C "email@gmail.com"</code> </li> <li> <p>It will ask you to save the file. If the first time you can save as default. If you already have key pairs for other accounts then change the name and use the new name for commands below. This may also be relevant if using multiple github accounts. You’ll need to create a separate file for each and update the ~/.ssh/config file where you can point the github account to the appropriate ssh key file. See the <a href="../../../ref/coding/git/#vs-code-git-workflow">VScode Github</a> section under Coding for more info.</p> </li> <li>Start the ssh-agent in the background and add the newly created SSH key(private) to the ssh-agent. (ssh-agent keeps track of keys and passphrases so you don’t have to keep entering a password/passphrase).</li> <li><code class="language-plaintext highlighter-rouge">$ eval "$(ssh-agent -s)"</code></li> <li> <code class="language-plaintext highlighter-rouge">$ ssh-add ~/.ssh/id_rsa</code>​</li> </ul> <p><strong>Sharing/Copying the Public Key to the Remote Host/Server (ie github)</strong></p> <ul> <li>​Now you can copy the public key to a remote host like github so you can upload from your local PC to your remote github account. Don’t forget to use the new id_rsa.pub name if you had to change it from the default.</li> <li>A tool you can use to copy the key is</li> <li> <code class="language-plaintext highlighter-rouge">xclip -sel clip &lt; ~/.ssh/id_rsa.pub</code><br> *win<code class="language-plaintext highlighter-rouge">clip &lt; C:\Users\xxx\.ssh\id_rsa.pub</code> </li> <li>Or you can manually open the rsa.pub file and copy the key. Once you have the key copied you go to the remote host and paste the key in your account security settings.</li> <li>Example for github.</li> <li>Copy the key inside ~/.ssh/id_rsa.pub</li> <li>Go to github, then profile, settings, SSH key, new key and paste the key here.</li> <li>Now github can authenticate your local PC.</li> </ul> <p><strong>Enable ssh Key Authentication for a Server/PC</strong><br> If enabling keys for ssh to a server or another PC you paste the key into the server’s authorized_keys file. The best way to do this is using the ssh-copy-id tool. Example below.</p> <ul> <li>Login to the server</li> <li><code class="language-plaintext highlighter-rouge">$ ssh-copy-id remote-user-name@ipaddress</code></li> <li>It will reply with the RSA fingerprint and confirm you want to add it the list of known hosts.</li> </ul> <p>Or you can manually copy/paste the RSA key and paste it in the authorized_key file.</p> <ul> <li><code class="language-plaintext highlighter-rouge">$ sudo nano ~/.ssh/authorized_keys</code></li> <li>Paste the public key into the file and make sure it is on a single line. <div class="language-console highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="go">ssh-rsa AAB34NJD34987...   
</span></code></pre></div> </div> </li> </ul> <p>By default ssh only uses password authentication. For the remote PC/server to require keys instead of just a password you need to update the sshd_config file<br> <code class="language-plaintext highlighter-rouge">$ sudo nano /etc/ssh/sshd_config</code><br> Uncomment the PasswordAuthentication line and set it to Yes</p> <p>Part of the ssh security involves a fingerprint check (the fingerprint is a short version of the server’s public key). It checks the remote server’s fingerprint and compares it with the fingerprint saved from the last time you connected. If the fingerprint has changed you will get a warning. (fingerprint is stored at $HOME/.ssh/known_hosts). You can do a couple checks to confirm the system you’re logging into.</p> <ul> <li>Go to or remote desktop to the server</li> <li>The server ssh key fingerprints are under /etc/ssh/ so run command below (assuming using SHA256)</li> <li><code class="language-plaintext highlighter-rouge">ssh-keygen -lf /etc/ssh/ssh_host_ecdsa_key.pub</code></li> <li>You can compare the returned fingerprint to what the ssh authentication error showed</li> <li>To show key <code class="language-plaintext highlighter-rouge">ssh-keygen -E sha256 -lf ~/.ssh/id_rsa.pub</code> To fix the mismatch on your remote machine’s run the command below to remove the server from the remote known hosts file</li> <li><code class="language-plaintext highlighter-rouge">ssh-keygen -f "$HOME/.ssh/known_hosts" -R "IP-address-of-server"</code></li> <li>or you can try <code class="language-plaintext highlighter-rouge">ssh-keygen -R github.com (or IP addresses)</code> </li> <li>Now login again and it will update the known hosts file with the server info</li> </ul> <hr> <p><strong>Useful Network Commands for IP address and hostname (nmap)</strong> When connecting to a RPi with ssh/VNC or if accessing a server port (node-red, http, python docs, etc) you’ll need the IP address or hostname. Some useful commands to find IP address and host name information.</p> <blockquote> <p>What is a host? Any computer or device that is accessible over the network <br> The current computer can be accessed with 127.0.0.1 or localhost. (you can verify in the host table with $ cat /etc/hosts and see 127.0.0.1 linked to localhost)</p> </blockquote> <p>To get the IP address or hostname for access from a remote PC you can use commands below. Each gives more information.<br> <code class="language-plaintext highlighter-rouge">$ hostname -I | awk '{print $1}'</code><br> <code class="language-plaintext highlighter-rouge">$ hostname -I</code><br> <code class="language-plaintext highlighter-rouge">$ ifconfig</code><br> For the hostname of your PC<br> <code class="language-plaintext highlighter-rouge">$ hostnamectl</code> (or simply hostname)</p> <p>Now that you have the IP address and/or hostname you can use either for accessing a remote computer/device. When using the hostname just add .local to the end. Some examples<br> SSH<br> <code class="language-plaintext highlighter-rouge">$ ssh username@10.0.0.110</code><br> or<br> <code class="language-plaintext highlighter-rouge">$ ssh username@hostname.local</code></p> <p>Node-red Server via a web browser (uses port 1880)<br> http://10.0.0.115:1880<br> or<br> http://hostname.local:1880</p> <p>To access from another computer you can use the IP address hostname found above.You can also update the lookup table with the hostname used for accessing from another computer.<br> <code class="language-plaintext highlighter-rouge">$ sudo nano /etc/hostname</code><br> <code class="language-plaintext highlighter-rouge">$ sudo nano /etc/hosts</code>(here you will see the 127.0.0.1 linked to localhost. Leave this line alone. Further down will be 127.0.1.1. Update the name next to this address.<br> To update the hostname of your RPi just go to $ sudo raspi-config and change the hostname in system options. ​ Now that you know the hostname you can <br> Commands below are helpful for finding the IP address of a device on your network. RPi-hunter(below) is the best tool for specifically finding Raspberry Pi’s on your network.</p> <p><code class="language-plaintext highlighter-rouge">$ arp -a</code> (quick , but no description)<br> Nmap can scan the subnet. May have some description.<br> <code class="language-plaintext highlighter-rouge">$ sudo nmap -sP 10.0.0.0/24 </code><br> Replace 10.0.0.0 with your IP address.<br> (/24 means subnet of 255.255.255.X or only scan the last field, X. This is the part that will change across different devices on your network)</p> <p>Gui based IP scanner<br> I have tried Angry IP scanner but it did not give me anymore information than nmap<br> ​nessus free version IP scanner is useful for getting security risks. But a large install (&gt; 2 GB)</p> <hr> <h1 id="rpi-hunter">rpi-hunter</h1> <p>A useful RPi tool for updating multiple RPis at once is rpi-hunter. You can send payload commands to multiple machines.<br> RPi-Hunter Installation</p> <ul> <li><code class="language-plaintext highlighter-rouge">$ pip3 install -U argparse termcolor</code></li> <li><code class="language-plaintext highlighter-rouge">$ sudo apt -y install arp-scan tshark sshpass</code></li> <li><code class="language-plaintext highlighter-rouge">$ git clone https://github.com/BusesCanFly/rpi-hunter.git</code></li> <li>if getting no termcolor error then →</li> <li><code class="language-plaintext highlighter-rouge">$ sudo apt-get install python-termcolor</code></li> </ul> <p>Using RPi-Hunter</p> <ul> <li><code class="language-plaintext highlighter-rouge">$ cd rpi-hunter</code></li> <li> <code class="language-plaintext highlighter-rouge">$ chmod +x rpi-hunter.py</code> (make it executable)</li> <li> <code class="language-plaintext highlighter-rouge">$ sudo python rpi-hunter.py -h</code> (help command)</li> <li><code class="language-plaintext highlighter-rouge">$ ./rpi-hunter.py</code></li> <li>-r (IP range)</li> <li>Can take a while to scan all IP’s (including non Pi’s)</li> <li>Better to create files with IP lists of known Pi groups</li> <li>example below is using ./scan/rpis file</li> <li>-f (list of Rpi Ips) default is in dir /scan/rpi_list ** using rpis</li> <li><code class="language-plaintext highlighter-rouge">$ ./rpi-hunter.py -c ‘password’ -f ./scan/rpis --payload 'apt update'</code></li> <li><code class="language-plaintext highlighter-rouge">$ ./rpi-hunter.py -c ‘password’ -f ./scan/rpis --payload 'apt full-upgrade'</code></li> <li><code class="language-plaintext highlighter-rouge">$ ./rpi-hunter.py -c ‘password’ -f ./scan/rpis --payload 'hostnamectl'</code></li> <li><code class="language-plaintext highlighter-rouge">$ ./rpi-hunter.py -c ‘password’ -f ./scan/rpis --payload 'sudo shutdown -h now'</code></li> </ul> <hr> <p><strong>ufw Firewall</strong> ufw is a simple firewall. I typically have it disabled for my home STEM projects because if I enabled it I would still open ports for ssh/vnc, making the ufw even less valuable.</p> <p>If you do use ufw here are some commands and common ports.</p> <div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span><span class="nb">sudo </span>apt <span class="nb">install </span>ufw
<span class="gp">$</span><span class="w"> </span><span class="nb">sudo </span>ufw <span class="nb">enable</span>
<span class="gp">$</span><span class="w"> </span><span class="nb">sudo </span>ufw disable
<span class="gp">$</span><span class="w"> </span><span class="nb">sudo </span>ufw status verbose
<span class="go">
Install gui for ufw
</span><span class="gp">$</span><span class="w"> </span><span class="nb">sudo </span>apt <span class="nb">install </span>gufw
<span class="go">
</span><span class="gp">$</span><span class="w"> </span><span class="nb">sudo </span>ufw allow 5900/tcp <span class="o">(</span>vnc<span class="o">)</span>
<span class="gp">​$</span><span class="w"> </span><span class="nb">sudo </span>ufw allow 20/21 <span class="o">(</span>ftp<span class="o">)</span>
<span class="gp">$</span><span class="w"> </span><span class="nb">sudo </span>ufw allow 22/tcp
<span class="gp">$</span><span class="w"> </span><span class="nb">sudo </span>ufw allow 23 <span class="o">(</span>telnet<span class="o">)</span>
<span class="gp">$</span><span class="w"> </span><span class="nb">sudo </span>ufw allow 8086/tcp
<span class="gp">$</span><span class="w"> </span><span class="nb">sudo </span>ufw allow 8088 <span class="o">(</span>influx<span class="o">)</span>
<span class="gp">$</span><span class="w"> </span><span class="nb">sudo </span>ufw allow 1880 <span class="o">(</span>node red<span class="o">)</span>
<span class="gp">$</span><span class="w"> </span><span class="nb">sudo </span>ufw allow 1883 <span class="o">(</span>mqtt<span class="o">)</span>
<span class="gp">$</span><span class="w"> </span><span class="nb">sudo </span>ufw allow 3000 <span class="o">(</span>grafana<span class="o">)</span>
<span class="go">
To close a port
</span><span class="gp">$</span><span class="w"> </span><span class="nb">sudo </span>ufw deny &lt;port&gt;
<span class="go">
To see description of all ports
</span><span class="gp">$</span><span class="w"> </span>nano /etc/services
</code></pre></div></div> <hr> <h1 id="useful-terms">Useful Terms</h1> <ul> <li>Display - can use echo $DISPLAY to see monitor connected (will be :0 for primary display and blank if no monitor)</li> <li>Host - Any computer/device that is accessible over the network.</li> <li>VNC - A graphical system that gives you the ability to remotely control a host device, your PC or RPi, from another host/device.</li> <li>ssh - Terminal or command line system that give you the ability to remotely login into your PC/RPi and run commands from another device (ie, edit files using terminal text editors like nano).</li> <li>sftp - Secure method to remotely transfer files between hosts (requires the ssh server running). Similar to Putty.</li> <li> <p>Telnet - For reference, an older type of remote login. But not as secure as ssh.</p> </li> <li>VNC server in service mode - Replicates what you would see if sitting at the server-host computer. Provides cloud connection (no direction connection with free ‘Home’ subscription)</li> <li>VNC server in virtual mode - Created in memory and only the VNC user can see it. I use this on Raspberry Pi when booting to command line.</li> </ul> <p>Some terms you’ll see from output of $ ifconfig</p> <ul> <li>eth0 or eno1: - Ethernet adapter where you physically plug a cable (aka ethernet, network, lan cable)</li> <li>lo: - Loop back device with address 127.0.0.1 A virtual network interface used to connect to local servers running on your machine.</li> <li>wlan0 or wlpxs0: - wireless card - most likely where you’ll look for IP info</li> <li>127.0.0.1 - Loopback address that points back to the current computer. Your computer’s TCP/IP will know you’re connecting to a server on your own computer and not the internet.</li> <li>IPv4 and IPv6 - Both are IP address types. IPv6 is newer and made it possible to have more addresses to handle growing number of machines.</li> <li>TX = Transmit</li> <li> <p>RX = Receive</p> </li> <li>localhost - Address for current computer. The ‘name’ for 127.0.0.1</li> <li>$ hostnamectl set-hostname <new-name> Will update /etc/hostname</new-name> </li> <li>$ sudo nano /etc/hosts Update also</li> <li>First line 127.0.0.1 is the loopback (lo) address</li> <li>127.0.0.1 localhost</li> <li>127.0.1.1 <custom host="" name=""></custom> </li> <li>change 127.0.1.1 if using static IP</li> <li> <p>$ hostnamectl</p> </li> <li>LAN - Local Area Network. Group of computers connected to each other on a local network.</li> </ul> <p>Public and Private IP Addresses</p> <ul> <li>IP address (Private)- The local address/number assigned to your computer (examples are 10.x.x.x or 192.168.x.x with x ranging from 0-255) within your local network. Similar to the address of your house. The address your PC is given will be unique to the network you’re on at the time (A network can not have duplicate IP addresses). But if your network uses DHCP (Dynamic Host Configuration Protocol) or if you go to another network (ie coffee shop) your IP address will change. That is why it is useful to know the $ ifconfig or $ hostname -I (capital i, not L) commands. You can always get the IP address of machines you’re working with on a project.</li> <li> <p>Static IP address - It is possible to configure the IP address of a RPi or other system to be static (not change). But one risk is that when your RPi is turned off (your network can’t see it) the network may assign that IP address to another machine. Then when you turn the RPi on it will not be able to connect because of an IP address conflic (duplicates).</p> </li> <li> <p>Public IP Address - Unique, public, address assigned to web sites for connecting to external locations thru the internet</p> </li> <li>IP (Internet Protocol) - Connectionless protocol for delivering information or data packets between computers (a source and a host). Does not send an acknowledgement.</li> <li>TCP (Transmission Control Protocol) - Connection protocol that complements the IP. Provides error-checking and acknowledge of transmissions between systems to ensure data is reliable.</li> <li> <p>TCP/IP - TCP and IP work together to connect computers and send packets of data between them (request, acknowledge, transfer)</p> </li> <li>Port - A virtual communication endpoint that is software based (it is not physical hardware). Require both client and server to create a connection or socket. Identifies application or service running. Port 22=ssh, 5900=vnc, 8088=influxdb, 1880=node-red, 1883=mqtt, 3000=grafana)</li> <li>Socket - A channel or combination of the remote/client ports/addresses, and protocol.</li> <li>TCP/IP = protocol</li> <li>Client IP (network layer) + Client port (transport layer)</li> <li>Remote IP + Remote port</li> </ul> <p><strong>Network Terms</strong></p> <p>Network Terms<br> Netplan - network configuration utility</p> <ul> <li>renderer networkd vs NetworkManager</li> <li>/etc/netplan/*yaml<br> RPi-Ubuntu 20.1 setup (/etc/netplan/01-network-manager-all.yaml)<br> On my Ubuntu/Rpi renderer = NetworkManager<br> NetworkManager.service = active</li> <li>network-manager.service not present</li> </ul> <p>systemd-networkd.service<br> System daemon that manages network configurations. Detects and configures network devices as they appear.<br> Status on my devices</p> <ul> <li>rpi4 inactive</li> <li>rpiOS-mate = inactive</li> <li>ubuntu = inactive</li> </ul> <p>Network Manger = high-level interface for the configuration of the network interfaces<br> network-manager.service = NetworkManager.service<br> Status on my devices</p> <ul> <li>RPiOS with Mate = active</li> <li>dhclient</li> <li>If using Network Manager then disable dhcpcd</li> </ul> <p>dhcpcd<br> server program that operates as a daemon on a server to provide Dynamic Host Configuration Protocol service to a network<br> Status on my devices</p> <ul> <li>RPi4 = active</li> <li>wpa_supplicant</li> </ul> <hr> <hr> </article> </div> </main> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2023 Sean Trautman. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="noopener noreferrer">Jekyll</a>. Hosted by <a href="https://pages.github.com/" target="_blank" rel="noopener noreferrer">GitHub Pages</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js" integrity="sha256-EdPgYcPk/IIrw7FYeuJQexva49pVRZNmt3LculEr7zM=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js"></script> <script defer src="/assets/js/common.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>